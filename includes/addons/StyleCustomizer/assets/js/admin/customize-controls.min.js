!function(r,s,c){"use strict";s.bind("ready",function(){r("#customize-info").find(".panel-title.site-title").text(c.panelTitle),r("#customize-info").find(".customize-panel-description:first").text(c.panelDescription)}),s.ToggleControl=s.Control.extend({ready:function(){var t=this;t.container.on("change","input:checkbox",function(){var e=!!this.checked;t.setting.set(e)})}}),s.SliderControl=s.Control.extend({ready:function(){var n=this,e=n.container,t=e.find(".everest-forms-slider"),o=e.find('.everest-forms-slider-input input[type="number"]'),e=Number(o.attr("min")),i=Number(o.attr("max")),a=Number(o.attr("step"));t.slider({range:"min",min:e,max:i,value:o.val(),step:a,slide:function(e,t){o.val(t.value).keyup()},change:function(e,t){n.setting.set(t.value)}}),n.container.on("click",".reset",function(e){e.preventDefault(),t.slider("option","value",n.params["default"])}),n.container.on("change keyup input","input.slider-input",function(e){("keyup"!==e.type&&"input"!==e.type||""!==r(this).val())&&t.slider("option","value",r(this).val())})}}),s.Select2Control=s.Control.extend({ready:function(){var e=this.container.find(".evf-select2");e.select2({minimumResultsForSearch:10,allowClear:!!e.data("allow_clear"),placeholder:e.data("placeholder")})}}),s.DimensionControl=s.Control.extend({ready:function(){var i=this,e=i.container,a=e.find(".dimension-input");i.container.find(".responsive-tabs li:not(:first)").hide(),i.container.on("keyup input",".dimension-input",function(){var n=r(this),e=n.attr("name"),t=parseInt(n.attr("min")),o=parseInt(n.attr("max"));n.val()<t&&n.val(n.attr("min")),n.val()>o&&n.val(n.attr("max")),i.is_anchor()?a.each(function(e,t){r(t).val(n.val()),i.saveValue(r(t).attr("name"),n.val())}):i.saveValue(e,n.val())}),i.container.on("change",'.dimension-unit-item input[type="radio"]',function(){i.saveValue("unit",r(this).val())}),i.container.on("change",".dimension-anchor",function(){r(this).is(":checked")?(r(this).parent("label").removeClass("unlinked").addClass("linked"),a.first().trigger("keyup")):r(this).parent("label").removeClass("linked").addClass("unlinked")}),i.container.on("change",'.responsive-tab-item input[type="radio"]',function(){var n=i.get_value(),o=r(this).val();n[o]!==undefined?(a.each(function(e,t){r(t).val(n[o][r(t).attr("name")])}),i.container.find('.dimension-unit-item input[value="'+n[o].unit+'"]').attr("checked","checked")):a.val(""),i.saveValue("top",e.find('input[name="top"]').val())}),i.container.on("click",".reset",function(e){e.preventDefault(),a.each(function(e,t){i.params["default"].desktop?(r(t).val(i.params["default"].desktop[r(t).attr("name")]),i.saveValue(r(t).attr("name"),i.params["default"].desktop[r(t).attr("name")])):(r(t).val(i.params["default"][r(t).attr("name")]),i.saveValue(r(t).attr("name"),i.params["default"][r(t).attr("name")]))})}),i.container.on("click",'.responsive-tab-item input[type="radio"]',function(){var e=r(this).val();r("#customize-controls").find('.responsive-tab-item input[type="radio"][value="'+e+'"]').prop("checked",!0).each(function(e,t){t=r(t).closest(".responsive-tab-item").closest("li");0===t.index()&&t.siblings().toggle()}),s.previewedDevice.set(e)})},is_anchor:function(){return r(this.container).find(".dimension-anchor").is(":checked")},selected_responsive:function(){return r(this.container).find('.responsive-tab-item input[type="radio"]:checked').val()},selected_unit:function(){return r(this.container).find('.dimension-unit-item input[type="radio"]:checked').val()},get_value:function(){return Object.assign({},this.setting._value)},saveValue:function(e,t){var n=this,o=n.container.find(".dimension-hidden-value"),i=n.get_value();!0===n.params.responsive?(undefined===i[n.selected_responsive()]&&(i[n.selected_responsive()]={}),i[n.selected_responsive()][e]=t,0<n.params.unit_choices.length&&(i[n.selected_responsive()].unit=n.selected_unit())):(i[e]=t,0<Object.keys(n.params.unit_choices).length&&(i.unit=n.selected_unit())),jQuery(o).val(JSON.stringify(i)).trigger("change"),n.setting.set(i)}}),s.ImageCheckboxControl=s.Control.extend({ready:function(){var e=this;e.container.on("change",'input[type="checkbox"]',function(){e.saveValue(r(this).val(),r(this).is(":checked"))})},saveValue:function(e,t){var n=this.container.find(".image-checkbox-hidden-value"),o=this.params.value;o[e]=t,o=Object.assign({},o),jQuery(n).val(JSON.stringify(o)).trigger("change"),this.setting.set(o)}}),s.controlConstructor=r.extend(s.controlConstructor,{"evf-color":s.ColorControl,"evf-toggle":s.ToggleControl,"evf-slider":s.SliderControl,"evf-select2":s.Select2Control,"evf-dimension":s.DimensionControl,"evf-background":s.BackgroundControl,"evf-image_checkbox":s.ImageCheckboxControl,"evf-background_image":s.BackgroundImageControl}),r(function(){r.each(["wrapper","field_styles","checkbox_radio_styles","button","success_message","error_message","validation_message"],function(e,i){r.each({border_type:{controls:["border_width","border_color"],callback:function(e){return"none"!==e}},style_variation:{controls:["size","color","checked_color"],callback:function(e){return"default"!==e}},background_image:{controls:["background_preset","background_position","background_size","background_repeat","background_attachment"],callback:function(e){return!!e}},show_submission_message:{controls:["font_size","font_style","text_alignment","font_color","background_color","border_type","border_width","border_color","border_radius"],callback:function(e){return!!e}}},function(e,o){s("everest_forms_styles["+c.form_id+"]["+i+"]["+e+"]",function(n){r.each(o.controls,function(e,t){s.control("everest_forms_styles["+c.form_id+"]["+i+"]["+t+"]",function(t){var e=function(e){t.container.toggle(o.callback(e))};e(n.get()),n.bind(e)})})})})}),s.control("everest_forms_styles["+c.form_id+"][wrapper][background_preset]",function(e){var o={"default":[!1,!1,!1,!1],fill:[!0,!1,!1,!1],fit:[!0,!1,!0,!1],repeat:[!0,!1,!1,!0],custom:[!0,!0,!0,!0]},i={"default":[_wpCustomizeBackground.defaults["default-position-x"],_wpCustomizeBackground.defaults["default-position-y"],_wpCustomizeBackground.defaults["default-size"],_wpCustomizeBackground.defaults["default-repeat"],_wpCustomizeBackground.defaults["default-attachment"]],fill:["left","top","cover","no-repeat","fixed"],fit:["left","top","contain","no-repeat","fixed"],repeat:["left","top","auto","repeat","scroll"]},t=function(n){_.each(["background_position","background_size","background_repeat","background_attachment"],function(e,t){t=s.control("everest_forms_styles["+c.form_id+"][wrapper]["+t+"]");t&&t.container.toggle(o[n][e])})},n=function(n){_.each(["background_position_x","background_position_y","background_size","background_repeat","background_attachment"],function(e,t){e=s("everest_forms_styles["+c.form_id+"][wrapper]["+e+"]");e&&e.set(i[n][t])})},a=e.setting.get();t(a),e.setting.bind("change",function(e){t(e),"custom"!==e&&n(e)})}),s.control("everest_forms_styles["+c.form_id+"][wrapper][background_repeat]",function(t){t.elements[0].unsync(s("everest_forms_styles["+c.form_id+"][wrapper][background_repeat]")),t.element=new s.Element(t.container.find("input")),t.element.set("no-repeat"!==t.setting()),t.element.bind(function(e){t.setting.set(e?"repeat":"no-repeat")}),t.setting.bind(function(e){t.element.set("no-repeat"!==e)})}),s.control("everest_forms_styles["+c.form_id+"][wrapper][background_attachment]",function(t){t.elements[0].unsync(s("everest_forms_styles["+c.form_id+"][wrapper][background_attachment]")),t.element=new s.Element(t.container.find("input")),t.element.set("fixed"!==t.setting()),t.element.bind(function(e){t.setting.set(e?"scroll":"fixed")}),t.setting.bind(function(e){t.element.set("fixed"!==e)})}),s.control("everest_forms_styles["+c.form_id+"][template]",function(e){e.elements[0].bind(function(e){t(e)})});var t=function(e){var o="everest_forms_styles["+c.form_id+"]";if("undefined"==typeof _evfCustomizeControlsL10n.templates[e])return!1;e=_evfCustomizeControlsL10n.templates[e].data;e&&r.each(e,function(n,e){r.each(e,function(e,t){i(o+"["+n+"]["+e+"]",t)})})},i=function(e,i){s.control(e,function(e){var n=e.container;switch(e.setting.set(i),e.params.type){case"evf-slider":n.find(".everest-forms-slider").slider("option","value",i);break;case"evf-select2":n.find(".evf-select2").trigger("change");break;case"evf-image_checkbox":var t=n.find(".image-checkbox-hidden-value"),o=i;"string"!=typeof i?o=JSON.stringify(i):i=JSON.parse(i),t.val(o).trigger("change"),r.each(i,function(e,t){n.find('.image-checkbox-wrapper input[value="'+e+'"]').prop("checked",t)});break;case"evf-dimension":o=n.find('.responsive-tab-item input[type="radio"]:checked').val();void 0===o?r.each(i,function(e,t){n.find('input.dimension-input[name="'+e+'"]').val(t)}):"undefined"!=typeof i[o]&&r.each(i[o],function(e,t){n.find('input.dimension-input[name="'+e+'"]').val(t)})}})};r(function(){var e,t,n,o;t=_evfCustomizeControlsL10n.form_id,t=r("#customize-control-everest_forms_styles-"+t+"-template"),(e=r("<div id='everest-forms-save-template-container'></div>")).append(r('<span class="customize-control-title">Create Style Template</span>')),e.append(r('<span class="description customize-control-description">Create a new style template from current styles.</span>')),e.append(r("<input type='text' id='everest-forms-new-template-name' placeholder='Template Name' />")),e.append(r("<div><button class='button button-primary' id='everest-forms-save-template-button'>Create</button></div>")),t.before(e),e.find("div button").bind("click",function(e){if(e.preventDefault(),e.stopPropagation(),"disabled"===r("#save.save").attr("disabled")){e=r("#everest-forms-new-template-name").val();if(e.length)r.post(_evfCustomizeControlsL10n.ajax_url,{action:"save_template",name:e,form_id:_evfCustomizeControlsL10n.form_id,_nonce:_evfCustomizeControlsL10n.save_nonce}).done(function(t){if(t.success)s.control("everest_forms_styles["+c.form_id+"][template]",function(e){e.setting.set(t.data.template_id);s.previewer.save();s.bind("saved",function(){location.reload()})});else alert(t.data.message)});else alert("Please provide a suitable template name and try again.")}else alert("Please save the unsaved changes to create the template.")}),t=_evfCustomizeControlsL10n.form_id,t=r("#customize-control-everest_forms_styles-"+t+"-template").find(".image-radio-wrapper li"),n=r('<span class="evf-delete-template-btn dashicons dashicons-no" title="Delete Template"></span>'),t.each(function(){var e,t=r(this);["default","layout-two"].includes(t.find("input").val())||((e=n.clone().hide()).bind("click",function(){confirm("Are you sure you want to delete this template ?")&&o(t)}),t.append(e),t.bind("mouseover",function(){e.show()}),t.bind("mouseout",function(){e.hide()}))}),o=function(e){var t=r(e),e=t.find("input").val();r.post(_evfCustomizeControlsL10n.ajax_url,{action:"delete_template",name:e,_nonce:_evfCustomizeControlsL10n.delete_nonce}).done(function(e){e.success&&t.remove()})}})})}(jQuery,wp.customize,_evfCustomizeControlsL10n);