!function(i,d){var u=i(document);d.updates.installExtension=function(e){var a=i(".plugin-card-"+e.slug),s=a.find(".install-now, .activate-now");return e=_.extend({success:d.updates.installExtensionSuccess,error:d.updates.installExtensionError},e),s.html()!==d.updates.l10n.installing&&s.data("originaltext",s.html()),s.addClass("updating-message").attr("aria-label",d.updates.l10n.pluginInstallingLabel.replace("%s",s.data("name"))).text(d.updates.l10n.installing),d.a11y.speak(d.updates.l10n.installingMsg,"polite"),a.removeClass("plugin-card-install-failed").find(".notice.notice-error").remove(),u.trigger("wp-extension-installing",e),d.updates.ajax("everest_forms_install_extension",e)},d.updates.installExtensionSuccess=function(e){if("everest-forms_page_evf-builder"===pagenow){i('tr[data-slug="'+e.slug+'"]').removeClass("install").addClass("installed").find(".plugin-status span").removeClass("updating-message install-now").addClass("updated-message active").attr("aria-label",d.updates.l10n.pluginInstalledLabel.replace("%s",e.pluginName)).text(d.updates.l10n.pluginInstalled),d.a11y.speak(d.updates.l10n.installedMsg,"polite"),u.trigger("wp-plugin-bulk-install-success",e)}else{var a=i(".plugin-card-"+e.slug).find(".install-now"),s=i(".plugin-card-"+e.slug).find(".status-label");a.removeClass("updating-message").addClass("updated-message installed button-disabled").attr("aria-label",d.updates.l10n.pluginInstalledLabel.replace("%s",e.pluginName)).text(d.updates.l10n.pluginInstalled),d.a11y.speak(d.updates.l10n.installedMsg,"polite"),u.trigger("wp-plugin-install-success",e),e.activateUrl&&setTimeout(function(){s.removeClass("status-install-now").addClass("status-active").text(d.updates.l10n.pluginInstalled),a.removeClass("install-now installed button-disabled updated-message").addClass("activate-now button-primary").attr("href",e.activateUrl).attr("aria-label",d.updates.l10n.activatePluginLabel.replace("%s",e.pluginName)).text(d.updates.l10n.activatePlugin)},1e3)}},d.updates.installExtensionError=function(e){if("everest-forms_page_evf-builder"===pagenow){var a=i('tr[data-slug="'+e.slug+'"]'),s=a.find(".plugin-status span");if(!d.updates.isValidResponse(e,"install"))return;if(d.updates.maybeHandleCredentialError(e,"install-plugin"))return;t=d.updates.l10n.installFailed.replace("%s",e.errorMessage),s.removeClass("updating-message").addClass("updated-message").attr("aria-label",d.updates.l10n.pluginInstallFailedLabel.replace("%s",a.data("name"))).text(d.updates.l10n.installFailedShort),d.a11y.speak(t,"assertive"),u.trigger("wp-plugin-bulk-install-error",e)}else{var t,l=i(".plugin-card-"+e.slug),n=l.find(".install-now");if(!d.updates.isValidResponse(e,"install"))return;if(d.updates.maybeHandleCredentialError(e,"everest_forms_install_extension"))return;t=d.updates.l10n.installFailed.replace("%s",e.errorMessage),l.addClass("plugin-card-update-failed").append('<div class="notice notice-error notice-alt is-dismissible"><p>'+t+"</p></div>"),l.on("click",".notice.is-dismissible .notice-dismiss",function(){setTimeout(function(){l.removeClass("plugin-card-update-failed").find(".column-name a").focus()},200)}),n.removeClass("updating-message").addClass("button-disabled").attr("aria-label",d.updates.l10n.pluginInstallFailedLabel.replace("%s",n.data("name"))).text(d.updates.l10n.installFailedShort),d.a11y.speak(t,"assertive"),u.trigger("wp-plugin-install-error",e)}},d.updates.queueChecker=function(){var e;if(!d.updates.ajaxLocked&&d.updates.queue.length){switch((e=d.updates.queue.shift()).action){case"everest_forms_install_extension":d.updates.installExtension(e.data)}u.trigger("wp-updates-queue-job",e)}},i(function(){i("#extension-filter").on("click",".extension-install .install-now",function(e){var a=i(e.target),s=i(this).data("name");e.preventDefault(),a.hasClass("updating-message")||a.hasClass("button-disabled")||(d.updates.shouldRequestFilesystemCredentials&&!d.updates.ajaxLocked&&(d.updates.requestFilesystemCredentials(e),u.on("credential-modal-cancel",function(){i(".install-now.updating-message").removeClass("updating-message").text(d.updates.l10n.installNow).attr("aria-label",d.updates.l10n.pluginInstallNowLabel.replace("%s",s)),d.a11y.speak(d.updates.l10n.updateCancel,"polite")})),d.updates.installExtension({name:s,slug:a.data("slug")}))})})}(jQuery,window.wp);