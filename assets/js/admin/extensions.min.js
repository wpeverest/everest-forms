!function(n,i){var r=n(document);__=i.i18n.__,_x=i.i18n._x,sprintf=i.i18n.sprintf,i.updates.installExtension=function(e){var a=n(".plugin-card-"+e.slug),s=a.find(".install-now, .activate-now");return e=_.extend({success:i.updates.installExtensionSuccess,error:i.updates.installExtensionError},e),s.html()!==__("Installing...")&&s.data("originaltext",s.html()),s.addClass("updating-message").attr("aria-label",sprintf(_x("Installing %s...","everest-forms"),s.data("name"))).text(__("Installing...")),i.a11y.speak(__("Installing... please wait."),"polite"),a.removeClass("plugin-card-install-failed").find(".notice.notice-error").remove(),r.trigger("wp-extension-installing",e),i.updates.ajax("everest_forms_install_extension",e)},i.updates.installExtensionSuccess=function(e){var a,s;"everest-forms_page_evf-builder"===pagenow?(n('tr[data-slug="'+e.slug+'"]').removeClass("install").addClass("installed").find(".plugin-status span").removeClass("updating-message install-now").addClass("updated-message active").attr("aria-label",sprintf(_x("%s installed!","everest-forms"),e.pluginName)).text(_x("Installed!","plugin")),i.a11y.speak(__("Installation completed successfully."),"polite"),r.trigger("wp-plugin-bulk-install-success",e)):(a=n(".plugin-card-"+e.slug).find(".install-now"),s=n(".plugin-card-"+e.slug).find(".status-label"),a.removeClass("updating-message").addClass("updated-message installed button-disabled").attr("aria-label",sprintf(_x("%s installed!","everest-forms"),e.pluginName)).text(_x("Installed!","everest-forms")),i.a11y.speak(__("Installation completed successfully."),"polite"),r.trigger("wp-plugin-install-success",e),e.activateUrl&&setTimeout(function(){s.removeClass("status-install-now").addClass("status-active").text(i.updates.l10n.pluginInstalled),a.removeClass("install-now installed button-disabled updated-message").addClass("activate-now button-primary").attr("href",e.activateUrl),"plugins-network"===pagenow?a.attr("aria-label",sprintf(_x("Network Activate %s","everest-forms"),e.pluginName)).text(__("Network Activate")):a.attr("aria-label",sprintf(_x("Activate %s","everest-forms"),e.pluginName)).text(__("Activate"))},1e3))},i.updates.installExtensionError=function(e){var a,s,t,l;"everest-forms_page_evf-builder"===pagenow?(a=n('tr[data-slug="'+e.slug+'"]').find(".plugin-status span"),i.updates.isValidResponse(e,"install")&&!i.updates.maybeHandleCredentialError(e,"install-plugin")&&(l=sprintf(__("Installation failed: %s"),e.errorMessage),a.removeClass("updating-message").addClass("updated-message").attr("aria-label",sprintf(_x("%s installation failed","everest-forms"),t.data("name"))).text(__("Installation Failed!")),i.a11y.speak(l,"assertive"),r.trigger("wp-plugin-bulk-install-error",e))):(t=(s=n(".plugin-card-"+e.slug)).find(".install-now"),i.updates.isValidResponse(e,"install")&&!i.updates.maybeHandleCredentialError(e,"everest_forms_install_extension")&&(l=sprintf(__("Installation failed: %s"),e.errorMessage),s.addClass("plugin-card-update-failed").append('<div class="notice notice-error notice-alt is-dismissible"><p>'+l+"</p></div>"),s.on("click",".notice.is-dismissible .notice-dismiss",function(){setTimeout(function(){s.removeClass("plugin-card-update-failed").find(".column-name a").focus()},200)}),t.removeClass("updating-message").addClass("button-disabled").attr("aria-label",sprintf(_x("%s installation failed","everest-forms"),t.data("name"))).text(__("Installation Failed!")),i.a11y.speak(l,"assertive"),r.trigger("wp-plugin-install-error",e)))},i.updates.queueChecker=function(){var e;!i.updates.ajaxLocked&&i.updates.queue.length&&("everest_forms_install_extension"===(e=i.updates.queue.shift()).action&&i.updates.installExtension(e.data),r.trigger("wp-updates-queue-job",e))},n(function(){n("#extension-filter").on("click",".extension-install .install-now",function(e){var a=n(e.target),s=n(this).data("name");e.preventDefault(),a.hasClass("updating-message")||a.hasClass("button-disabled")||(i.updates.shouldRequestFilesystemCredentials&&!i.updates.ajaxLocked&&(i.updates.requestFilesystemCredentials(e),r.on("credential-modal-cancel",function(){n(".install-now.updating-message").removeClass("updating-message").attr("aria-label",sprintf(_x("Install %s now","everest-forms"),s)).text(__("Install Now")),i.a11y.speak(__("Update canceled."),"polite")})),i.updates.installExtension({name:s,slug:a.data("slug")}))})})}(jQuery,window.wp);