!function(n){var o={init:function(){n(document).ready(o.ready),o.bindChangeFileName(),o.bindImportEntries()},ready:function(){n(document).on("click",".everest_forms_import_entries",o.handleImportEntriesClick)},handleImportEntriesClick:function(){var e=n("#everest-forms-import-csv").prop("files")[0],r=n("#everest-forms-import-entries").val(),t=new FormData;t.append("form_id",r),t.append("csvfile",e),t.append("action","everest_forms_map_csv"),t.append("security",evf_import_entries_obj.nonce),n.ajax({url:evf_import_entries_obj.ajax_url,type:"POST",data:t,contentType:!1,processData:!1,beforeSend:function(){n(".everest_forms_import_entries").closest(".everest_forms_import_entries").append('<i class="evf-loading evf-loading-active"></i>'),n(".everest-froms-import_notice").remove()},success:function(e){n(".everest_forms_import_entries").find(".evf-loading").remove(),n(".everest-froms-import_notice").remove(),!0===e.success?(message_string="",n(".everest-forms-upload-csv-container").hide(),n(".evf-form-and-csv-upload").append(e.data.html),$wrapper=n(".evf-map-entries-to-form-wrapper"),n(document).off("click",".evf-add-clone",o.handleAddClone),n(document).off("click",".evf-remove-clone",o.handleRemoveClone),n(document).on("click",".evf-add-clone",o.handleAddClone),n(document).on("click",".evf-remove-clone",o.handleRemoveClone)):message_string='<div id="message" class="error inline everest-froms-import_notice"><p><strong>'+e.data.message+"</strong></p></div>",n(".everest-forms-import-entries-wrapper").find("h3").after(message_string)}})},handleAddClone:function(e){e.preventDefault(),$this=n(this),$wrapper.find(".evf-remove-clone").removeClass("everest-forms-hidden"),($wrapperCloned=$wrapper.clone()).insertAfter($this.parents("div.evf-map-entries-to-form-wrapper"))},handleRemoveClone:function(e){e.preventDefault(),($this=n(this)).parents("div.evf-map-entries-to-form-wrapper").remove(),1===n(".evf-map-entries-to-form-wrapper").length&&n(".evf-map-entries-to-form-wrapper").find(".evf-remove-clone").addClass("everest-forms-hidden")},bindChangeFileName:function(){n("#everest-forms-import-csv").on("change",function(e){var r=n("#everest-forms-import-csv").prop("files")[0];n("#import-file-name-entry").html(r.name)})},bindImportEntries:function(){n(document).on("click",".evf-import-entries-btn",function(e){e.preventDefault();e={data:n("#evf-import-entries-form").serializeArray(),action:"everest_forms_import_entries",security:evf_import_entries_obj.nonce};n.ajax({url:evf_import_entries_obj.ajax_url,type:"POST",data:e,beforeSend:function(){n(".evf_import_entries_btn").append('<i class="evf-loading evf-loading-active"></i>'),n(".everest-froms-import_notice").remove()},success:function(e){n(".evf_import_entries_btn").find(".evf-loading").remove(),!0===e.success?(message_string='<div id="message" class="updated inline everest-froms-import_notice"><p><strong>'+e.data.message+'</strong></p><a href="'+e.data.entry_link+'" class="button button-primary" target="_blank">'+e.data.button_text+"</a></div>",n(".everest-forms-upload-csv-container").show(),n(".everest-forms-import-entries-wrapper").find("h3").after(message_string),n("#everest-forms-import").val(""),n("#everest-forms-import-csv").val(""),n("#import-file-name-entry").html("No files selected"),n(".evf-map-entries-to-form").remove()):(message_string+='<div id="message" class="error inline everest-froms-import_notice"><p><strong>'+e.data.message+"</strong></p></div>",n(".everest-forms-import-entries-wrapper").find("h3").after(message_string))}})})}};o.init()}(jQuery);