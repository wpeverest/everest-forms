!function(s){var e={init:function(){s(document).ready(e.ready),e.bindChangeFileName(),e.bindImportEntries()},ready:function(){s(".everest_forms_import_entries").on("click",function(){var e=s("#everest-forms-import-csv").prop("files")[0],r=s("#everest-forms-import-entries").val(),t=new FormData;t.append("form_id",r),t.append("csvfile",e),t.append("action","everest_forms_map_csv"),t.append("security",evf_import_entries_obj.nonce),s.ajax({url:evf_import_entries_obj.ajax_url,type:"POST",data:t,contentType:!1,processData:!1,beforeSend:function(){s(".everest_forms_import_entries").closest(".everest_forms_import_entries").append('<i class="evf-loading evf-loading-active"></i>'),s(".everest-froms-import_notice").remove()},success:function(e){s(".everest_forms_import_entries").find(".evf-loading").remove(),s(".everest-froms-import_notice").remove(),!0===e.success?(message_string="",s(".evf-form-and-csv-upload").empty().append(e.data.html),$wrapper=s(".evf-map-entries-to-form-wrapper"),s(document).on("click",".evf-add-clone",function(e){e.preventDefault(),$this=s(this),$wrapper.find(".evf-remove-clone").removeClass("everest-forms-hidden"),($wrapperCloned=$wrapper.clone()).insertAfter($this.parents("div.evf-map-entries-to-form-wrapper"))}),s(document).on("click",".evf-remove-clone",function(e){e.preventDefault(),($this=s(this)).parents("div.evf-map-entries-to-form-wrapper").remove(),1===s(".evf-map-entries-to-form-wrapper").length&&s(".evf-map-entries-to-form-wrapper").find(".evf-remove-clone").addClass("everest-forms-hidden")})):message_string='<div id="message" class="error inline everest-froms-import_notice"><p><strong>'+e.data.message+"</strong></p></div>",s(".everest-forms-import-entries-wrapper").find("h3").after(message_string)}})})},bindChangeFileName:function(){s("#everest-forms-import-csv").on("change",function(e){var r=s("#everest-forms-import-csv").prop("files")[0];s("#import-file-name-entry").html(r.name)})},bindImportEntries:function(){s(document).on("click",".evf-import-entries-btn",function(e){e.preventDefault();e={data:s("#evf-import-entries-form").serializeArray(),action:"everest_forms_import_entries",security:evf_import_entries_obj.nonce};s.ajax({url:evf_import_entries_obj.ajax_url,type:"POST",data:e,beforeSend:function(){s(".evf_import_entries_btn").append('<i class="evf-loading evf-loading-active"></i>'),s(".everest-froms-import_notice").remove()},success:function(e){s(".evf_import_entries_btn").find(".evf-loading").remove(),!0===e.success?(s(".evf-form-and-csv-upload").empty(),message_string='<div id="message" class="updated inline everest-froms-import_notice"><p><strong>'+e.data.message+"</strong></p></div>",message_string+='<a href="'+e.data.entry_link+'" class="button button-primary" target="_blank">'+e.data.button_text+"</a>"):message_string+='<div id="message" class="error inline everest-froms-import_notice"><p><strong>'+e.data.message+"</strong></p></div>",s(".everest-forms-import-entries-wrapper").find("h3").after(message_string)}})})}};e.init()}(jQuery);