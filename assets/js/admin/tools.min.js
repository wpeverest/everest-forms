jQuery(function(r){r("#log-viewer-select").on("click","h2 a.page-title-action-all",function(e){return e.stopImmediatePropagation(),window.confirm(everest_forms_admin_tools.delete_all_log_confirmation)}),r("#log-viewer-select").on("click","h2 a.page-title-action",function(e){return e.stopImmediatePropagation(),window.confirm(everest_forms_admin_tools.delete_log_confirmation)}),r("#everest-forms-form-migrator").on("change",function(){var t=r(this),e=t.val();void 0!==e&&""!==e&&(e={action:"everest_forms_form_migrator_forms_list",form_slug:e,security:everest_forms_form_migrator.evf_form_migrator_forms_list_nonce},r.ajax({url:everest_forms_form_migrator.ajax_url,type:"POST",dataType:"JSON",data:e,beforeSend:function(){t.closest(".evf-fm-select-popular-form").append('<i class="evf-loading evf-loading-active"></i>')},success:function(e){!0===e.success?r(document).find("#evf-fm-forms-list-container").html(e.data.forms_list_table):r(document).find("#evf-fm-forms-list-container").html(e.data.message),t.closest(".evf-fm-select-popular-form").find(".evf-loading").remove()}}))}),r(document).ready(function(){function t(e,t){var o=r(document).find(".evf-fm-forms-table").data("form-slug");void 0!==o&&""!==o&&(o={action:"everest_forms_form_migrator",form_slug:o,form_ids:t,security:everest_forms_form_migrator.evf_form_migrator_nonce},r.ajax({url:everest_forms_form_migrator.ajax_url,type:"POST",dataType:"JSON",data:o,beforeSend:function(){e.closest("td").append('<i class="evf-loading evf-loading-active"></i>'),r(".everest-froms-import_notice").remove()},success:function(e){r(".everest-froms-import_notice").remove(),r(".evf-loading").remove();var t,o="",o=!0===e.success?(t=e.data.form_data,r.each(t,function(e,t){!1!==t&&(t=r('button[data-form-id="'+e+'"]'),e=r('p[data-form-id="'+e+'"]'),r(t).prop("disabled",!1),r(e).text("Yes"))}),'<div id="message" class="updated inline everest-froms-import_notice"><p><strong>'+e.data.message+"</strong></p></div>"):'<div id="message" class="error inline everest-froms-import_notice"><p><strong>'+e.data.message+"</strong></p></div>";r(document).find("#evf-fm-forms-list-container").prepend(o)}}))}r(document).on("click","#evf-fm-select-all",function(){var e=r(document).find(".evf-fm-select-single:visible");1==r(this).prop("checked")?r.each(e,function(e,t){r(t).attr("checked",!0),r(t).prop("checked",!0)}):r.each(e,function(e,t){r(t).attr("checked",!1),r(t).prop("checked",!1)})}),r(document).on("click",".evf-fm-select-single",function(){r(document).find("#evf-fm-select-all").prop("checked",!1)}),r(document).on("click",".evf-fm-page",function(){var e,t,o;r(this).hasClass("evf-fm-btn-active")||(r(".evf-fm-page").removeClass("evf-fm-btn-active"),r(this).addClass("evf-fm-btn-active"),o=r(document).find(".evf-fm-forms-table"),t=r(this).closest(".evf-fm-pagination").data("form-per-page"),t=(e=(r(this).data("page")-1)*t+1)+t-1,(o=o.find(".evf-fm-row")).addClass("evf-fm-hide-row"),o.slice(e-1,t).removeClass("evf-fm-hide-row"))}),r(document).on("click",".evf-fm-import-single",function(e){e.preventDefault();e=r(this).data("form-id");t(r(this),[e])}),r(document).on("click",".evf-fm-import-selected-btn",function(e){e.preventDefault();var e=r(document).find(".evf-fm-forms-table"),e=r(e).find("td .evf-fm-select-single:checked"),o=[];r.each(e,function(e,t){t=r(t).data("form-id");o.push(t)}),0!==o.length&&t(r(this),o)}),r(document).on("click",".evf-fm-import-entry",function(e){e.preventDefault();var t=r(this),e=r(document).find(".evf-fm-forms-table").data("form-slug"),o=t.data("form-id");void 0!==e&&""!==e&&(e={action:"everest_forms_form_entry_migrator",form_slug:e,form_id:o,security:everest_forms_form_migrator.evf_form_entry_migrator_nonce},r.ajax({url:everest_forms_form_migrator.ajax_url,type:"POST",dataType:"JSON",data:e,beforeSend:function(){t.closest("td").append('<i class="evf-loading evf-loading-active"></i>'),r(".everest-froms-import_notice").remove()},success:function(e){r(".everest-froms-import_notice").remove(),r(".evf-loading").remove();var t="",t=!0===e.success?'<div id="message" class="updated inline everest-froms-import_notice"><p><strong>'+e.data.message+"</strong></p></div>":'<div id="message" class="error inline everest-froms-import_notice"><p><strong>'+e.data.message+"</strong></p></div>";r(document).find("#evf-fm-forms-list-container").prepend(t)}}))})})});