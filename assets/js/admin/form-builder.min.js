!function(v,p){var e,m={init:function(){v(document).ready(function(e){e("evf-panel-integrations-button a").hasClass("active")||(e("#everest-forms-panel-integrations").find(".everest-forms-panel-sidebar a").first().addClass("active"),e("#everest-forms-panel-integrations").find(".everest-forms-panel-sidebar a").hasClass("active")&&e("#everest-forms-panel-integrations").find(".everest-forms-panel-sidebar a").next(".everest-forms-active-connections").first().addClass("active"),e(".everest-forms-panel-content").find(".evf-panel-content-section").first().addClass("active"))}),v(document).ready(function(e){e("evf-panel-payment-button a").hasClass("active")||(e("#everest-forms-panel-payment").find(".everest-forms-panel-sidebar a").first().addClass("active"),e(".everest-forms-panel-content").find(".evf-panel-content-section").first().addClass("active"))}),v(document.body).on("click","a.help_tip, a.everets-forms-help-tip",this.preventTipTipClick).on("click","#copy-shortcode",this.copyShortcode).on("aftercopy","#copy-shortcode",this.copySuccess).on("aftercopyfailure","#copy-shortcode",this.copyFail),v(document).ready(m.ready),v(window).on("load",m.load),v(document.body).on("adjust_builder_width",function(){var e=v("#everest-forms-builder").width();v("#everest-forms-builder").width(e)}).trigger("adjust_builder_width"),v(document.body).on("click","#collapse-button",function(){v("#everest-forms-builder").width(""),v(document.body).trigger("adjust_builder_width")}),v(window).on("resize orientationchange",function(){var e;clearTimeout(e),e=setTimeout(function(){v("#everest-forms-builder").width(""),v(document.body).trigger("adjust_builder_width")},250)}).trigger("resize")},preventTipTipClick:function(){return!1},copyShortcode:function(e){evfClearClipboard(),evfSetClipboard(v(".evf-shortcode-field").find("input").val(),v(this)),e.preventDefault()},copySuccess:function(){v("#copy-shortcode").tipTip({attribute:"data-copied",activation:"focus",fadeIn:50,fadeOut:50,delay:0}).focus()},copyFail:function(){v(".evf-shortcode-field").find("input").focus().select()},load:function(){v(".everest-forms-overlay").fadeOut()},ready:function(){e=v("#everest-forms-builder"),m.bindUIActions(),jconfirm.defaults={closeIcon:!0,backgroundDismiss:!0,escapeKey:!0,animationBounce:1,useBootstrap:!1,theme:"modern",boxWidth:"400px",columnClass:"evf-responsive-class"},v(document).trigger("everest_forms_ready")},bindUIActions:function(){m.bindDefaultTabs(),m.checkEmptyGrid(),m.bindFields(),m.bindFormPreview(),m.bindGridSwitcher(),m.bindFieldSettings(),m.bindFieldDelete(),m.bindCloneField(),m.bindSaveOption(),m.bindAddNewRow(),m.bindRemoveRow(),m.bindFormSettings(),m.bindFormIntegrations(),m.bindFormPayment(),m.choicesInit(),m.choicesUpdate(),m.bindUIActionsFields(),"field-options"===p.tab&&v(".evf-panel-field-options-button").trigger("click")},bindUIActionsFields:function(){e.on("click",".everest-forms-fields-tab a",function(e){e.preventDefault(),m.fieldTabChoice(v(this).attr("id"))}),e.on("change",".everest-forms-field-option-address input.hide",function(){var e=v(this),t=e.parent().parent().data("field-id"),i=e.parent().parent().data("subfield");v("#everest-forms-field-"+t).find(".everest-forms-"+i).toggleClass("hidden")}),e.on("input",".everest-forms-field-option-row-label input",function(){var e=v(this),t=e.val(),i=e.parent().data("field-id");v("#everest-forms-field-"+i).find(".label-title .text").text(t)}),e.on("input",".everest-forms-field-option-row-description textarea",function(){var e=v(this),t=e.val(),i=e.parent().data("field-id"),n=v("#everest-forms-field-"+i).find(".description");n.hasClass("nl2br")?n.html(t.replace(/\n/g,"<br>")):n.html(t)}),e.on("change",".everest-forms-field-option-row-required input",function(e){var t=v(this).parent().data("field-id");v("#everest-forms-field-"+t).toggleClass("required")}),e.on("change",".everest-forms-field-option-row-confirmation input",function(){var e=v(this).parent().data("field-id");v("#everest-forms-field-"+e).find(".everest-forms-confirm").toggleClass("everest-forms-confirm-enabled everest-forms-confirm-disabled"),v("#everest-forms-field-option-"+e).toggleClass("everest-forms-confirm-enabled everest-forms-confirm-disabled")}),e.on("input",".everest-forms-field-option-row-placeholder input",function(e){var t=v(this),i=t.val(),n=t.parent().data("field-id"),s=v("#everest-forms-field-"+n).find(".primary-input");s.is("select")?i.length?s.find(".placeholder").length?s.find(".placeholder").text(i):s.prepend('<option class="placeholder" selected>'+i+"</option>"):s.find(".placeholder").remove():s.attr("placeholder",i)}),e.on("input",".everest-forms-field-option-address input.placeholder",function(e){var t=v(this),i=t.val(),n=t.parent().parent().data("field-id"),s=t.parent().parent().data("subfield");v("#everest-forms-field-"+n).find(".everest-forms-"+s+" input").attr("placeholder",i)}),e.on("input",".everest-forms-field-option-row-confirmation_placeholder input",function(){var e=v(this),t=e.val(),i=e.parent().data("field-id");v("#everest-forms-field-"+i).find(".secondary-input").attr("placeholder",t)}),e.on("change",".everest-forms-field-option-row-label_hide input",function(){var e=v(this).parent().data("field-id");v("#everest-forms-field-"+e).toggleClass("label_hide")}),e.on("change",".everest-forms-field-option-row-sublabel_hide input",function(){var e=v(this).parent().data("field-id");v("#everest-forms-field-"+e).toggleClass("sublabel_hide")})},choicesInit:function(){v(".evf-choices-list").sortable({axis:"y",out:function(e){var t=v(e.target).attr("data-field-id");m.choiceChange(t)}})},choiceChange:function(e){var t=v("#everest-forms-field-option-row-"+e+"-choices"),i=v("#everest-forms-field-"+e),n=i.find("ul.primary-input"),s=t.find("ul.evf-choices-list").attr("data-field-type");"select"===s&&(n=i.find("select.primary-input")),n.html(""),v.each(t.find("ul.evf-choices-list").find("li"),function(){var e=v(this).find(".default").attr("type"),t=e?'<input type="'+e+'" disabled="">':"",i=v("<li/>").append(t);"select"===s&&(i=v("<option/>"),v(this).find(".default").is(":checked")&&i.attr("selected","selected")),i.append(v(this).find(".label").val()),v(this).find(".default").is(":checked")&&i.find("input").prop("checked",!0),n.append(i)})},choicesUpdate:function(){v("body").on("click",".evf-choices-list a.add",function(){var e=v(this).closest("li").clone();e.find('input[type="text"]').val("");var t=v(this).closest(".evf-choices-list"),i=t.attr("data-field-id"),n=t.find("li").length;n++,e.find('input[type="checkbox"],input[type="radio"]').prop("checked",!1),e.attr("data-key",n),e.find(".default").attr("name","form_fields["+i+"][choices]["+n+"][default]"),e.find(".label").attr("name","form_fields["+i+"][choices]["+n+"][label]"),e.find(".value").attr("name","form_fields["+i+"][choices]["+n+"][value]"),v(this).closest("li").after(e),m.choiceChange(i)}),v("body").on("click",".evf-choices-list a.remove",function(){var e=v(this).closest(".evf-choices-list"),t=e.attr("data-field-id");e.find("li").length<2?v.alert({title:!1,content:p.i18n_field_error_choice,icon:"dashicons dashicons-info",type:"blue",buttons:{ok:{text:p.i18n_ok,btnClass:"btn-confirm",keys:["enter"]}}}):(v(this).closest("li").remove(),m.choiceChange(t))});v("body").on("keyup paste click",".evf-choices-list input",function(){var e=v(this).closest(".evf-choices-list").attr("data-field-id");"radio"===v(this).attr("type").toLowerCase()&&v(this).is(":checked")&&(v(this).closest(".evf-choices-list").find('input[type="radio"]').prop("checked",!1),v(this).prop("checked",!0)),m.choiceChange(e)})},bindFormSettings:function(){v("body").on("click",".evf-setting-panel",function(e){var t=v(this).attr("data-section");v(".evf-setting-panel").removeClass("active"),v(".evf-content-section").removeClass("active"),v(this).addClass("active"),v(".evf-content-"+t+"-settings").addClass("active"),e.preventDefault()}),v(".evf-setting-panel").eq(0).trigger("click")},bindFormIntegrations:function(){v("body").on("click",".evf-integrations-panel",function(e){var t=v(this).attr("data-section");v(".evf-integrations-panel").removeClass("active"),v(".evf-panel-content-section").removeClass("active"),v(this).addClass("active"),v(this).parent().find(".everest-forms-active-connections").removeClass("active"),v(this).next(".everest-forms-active-connections").addClass("active");var i=v(this).siblings(".everest-forms-active-connections.active").find(".everest-forms-active-connections-list li");i.length&&i.children(".user-nickname").first().trigger("click"),v(".evf-panel-content-section-"+t).addClass("active"),e.preventDefault()}),v(".evf-setting-panel").eq(0).trigger("click")},bindFormPayment:function(){v("body").on("click",".evf-payment-panel",function(e){var t=v(this).attr("data-section");v(".evf-payment-panel").removeClass("active"),v(".evf-panel-content-section").removeClass("active"),v(this).addClass("active"),v(".evf-panel-content-section-"+t).addClass("active"),e.preventDefault()}),v(".evf-setting-panel").eq(0).trigger("click")},removeRow:function(e){v.each(e.find(".everest-forms-field"),function(){var e=v(this),t=e.attr("data-field-id"),i=v("#everest-forms-field-option-"+t);e.remove(),i.remove()}),e.remove()},bindRemoveRow:function(){v("body").on("click",".evf-delete-row",function(){var e=v(this).closest(".evf-admin-row");v(".evf-admin-row").length<2?v.alert({title:p.i18n_row_locked,content:p.i18n_row_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:p.i18n_close,btnClass:"btn-confirm",keys:["enter"]}}}):v.confirm({title:!1,content:p.i18n_delete_row_confirm,type:"red",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:p.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){m.removeRow(e)}},cancel:{text:p.i18n_cancel}}})})},bindAddNewRow:function(){v("body").on("click",".evf-add-row span",function(){var e=v(".evf-admin-row").length,t=v(".evf-admin-row").eq(0).clone();t.find(".evf-admin-grid").html(""),t.attr("data-row-id",e+1),v(".evf-admin-field-wrapper").append(t),m.bindFields(),m.checkEmptyGrid()})},bindCloneField:function(){v("body").on("click",".everest-forms-preview .everest-forms-field .everest-forms-field-duplicate",function(){var e=v(this).closest(".everest-forms-field");e.hasClass("no-duplicate")?v.alert({title:p.i18n_field_locked,content:p.i18n_field_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:p.i18n_close,btnClass:"btn-confirm",keys:["enter"]}}}):v.confirm({title:!1,content:p.i18n_duplicate_field_confirm,type:"orange",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:p.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){m.cloneFieldAction(e)}},cancel:{text:p.i18n_cancel}}})})},cloneFieldAction:function(n){var s=n.attr("data-field-id"),e=p.form_id,t={action:"everest_forms_get_next_id",security:p.evf_get_next_id,form_id:e};v.ajax({url:p.ajax_url,data:t,type:"POST",beforeSend:function(){v(document.body).trigger("init_field_options_toggle")},success:function(e){if("boolean"==typeof e.success&&!0===e.success){var t=e.data.field_id,i=e.data.field_key;v("#everest-forms-field-id").val(t),m.render_node(n,s,i),v(document.body).trigger("init_field_options_toggle")}}})},render_node:function(e,s,o){var t=v(".everest-forms-field-options #everest-forms-field-option-"+s),i=v("#everest-forms-field-option-"+s+"-label").val(),n=e.attr("data-field-type"),r=t.html(),a=i+" "+p.i18n_copy,d=i.split(" ").join("_").replace(/\(|\)/g,"").toLowerCase()+"_"+Math.floor(1e3+9e3*Math.random()),l=e.clone(),f=new RegExp(s,"g");r=r.replace(f,o);var c=v('<div class="everest-forms-field-option everest-forms-field-option-'+n+'" id="everest-forms-field-option-'+o+'" data-field-id="'+o+'" />');c.append(r),v.each(t.find(":input"),function(){var e=v(this).attr("type"),t=v(this).attr("name").replace(f,o),i="";if("text"===e||"hidden"===e)i=v(this).val(),c.find('input[name="'+t+'"]').val(i),c.find('input[value="'+s+'"]').val(o);else if("checkbox"===e||"radio"===e)v(this).is(":checked")?c.find('input[name="'+t+'"]').prop("checked",!0).attr("checked","checked"):c.find('[name="'+t+'"]').prop("checked",!1).attr("checked",!1);else if(v(this).is("select")){if(v(this).find("option:selected").length){var n=v(this).find("option:selected").val();c.find('[name="'+t+'"]').find('[value="'+n+'"]').prop("selected",!0)}}else""!==v(this).val()&&c.find('[name="'+t+'"]').val(v(this).val())}),v(".everest-forms-field-options").append(c),v("#everest-forms-field-option-"+o+"-label").val(a),v("#everest-forms-field-option-"+o+"-meta-key").val(d),l.attr("class",e.attr("class")),l.attr("id","everest-forms-field-"+o),l.attr("data-field-id",o),l.attr("data-field-type",n),l.find(".label-title .text").text(a),e.closest(".evf-admin-grid").find('[data-field-id="'+s+'"]').after(l),v(document).trigger("everest-form-cloned",[o,n]),m.switchToFieldOptionPanel(o)},bindFieldDelete:function(){v("body").on("click",".everest-forms-preview .everest-forms-field .everest-forms-field-delete",function(){var t=v(this).closest(".everest-forms-field"),e=t.attr("data-field-id"),i=v("#everest-forms-field-option-"+e);v(this).closest(".evf-admin-grid");t.hasClass("no-delete")?v.alert({title:p.i18n_field_locked,content:p.i18n_field_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:p.i18n_close,btnClass:"btn-confirm",keys:["enter"]}}}):v.confirm({title:!1,content:p.i18n_delete_field_confirm,type:"red",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:p.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){v(".evf-panel-fields-button").trigger("click"),t.fadeOut("slow",function(){var e=t.attr("data-field-id");t.remove(),i.remove(),m.checkEmptyGrid(),v(".everest-forms-fields-tab").find("a").removeClass("active"),v(".everest-forms-fields-tab").find("a").first().addClass("active"),v(".everest-forms-add-fields").show(),m.conditionalLogicRemoveField(e)})}},cancel:{text:p.i18n_cancel}}})})},bindSaveOption:function(){v("body").on("click",".everest-forms-save-button",function(){var t=v(this),e=v("form#everest-forms-builder-form"),i=m.getStructure(),n=e.serializeArray();e.triggerHandler("everest_forms_process_ajax_data",[t,n])&&(n=e.triggerHandler("everest_forms_process_ajax_data",[t,n])),v(".everest-forms-panel-content-wrap").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var s=[];v(".everest-forms-field[data-field-id]").each(function(){s.push(v(this).attr("data-field-id"))});for(var o=n.length;o--;)if(n[o].name.startsWith("form_fields")){var r=!1;s.forEach(function(e){n[o].name.startsWith("form_fields["+e+"]")&&(r=!0)}),-1<o&&!1===r&&n.splice(o,1)}var a=n.concat(i),d={action:"everest_forms_save_form",security:p.evf_save_form,form_data:JSON.stringify(a)};v.ajax({url:p.ajax_url,data:d,type:"POST",beforeSend:function(){t.addClass("processing"),t.find(".loading-dot").remove(),t.append('<span class="loading-dot"></span>')},success:function(e){t.removeClass("processing"),t.find(".loading-dot").remove(),e.success||v.alert({title:e.data.errorTitle,content:e.data.errorMessage,icon:"dashicons dashicons-warning",type:"red",buttons:{ok:{text:p.i18n_ok,btnClass:"btn-confirm",keys:["enter"]}}}),v(".everest-forms-panel-content-wrap").unblock()}})})},getStructure:function(){var e=v(".evf-admin-field-wrapper"),o=[];return v.each(e.find(".evf-admin-row"),function(){var e=v(this),s=e.attr("data-row-id");v.each(e.find(".evf-admin-grid"),function(){var e=v(this),i=e.attr("data-grid-id"),n=0;v.each(e.find(".everest-forms-field"),function(){var e={name:"",value:""},t=v(this).attr("data-field-id");e.name="structure[row_"+s+"][grid_"+i+"]["+n+"]",n++,e.value=t,o.push(e)}),e.find(".everest-forms-field").length<1&&o.push({name:"structure[row_"+s+"][grid_"+i+"]",value:""})})}),o},getFieldArray:function(e){var t=[];return v.each(e.find(".everest-forms-field"),function(){var e=v(this).attr("data-field-id");t.push(e)}),t},checkEmptyGrid:function(){v.each(v(".evf-admin-grid"),function(){v(this).find(".everest-forms-field").length<1?v(this).addClass("evf-empty-grid"):v(this).removeClass("evf-empty-grid")}),m.choicesInit()},bindDefaultTabs:function(){v(document).on("click",".evf-nav-tab-wrapper a",function(e){e.preventDefault(),m.switchTab(v(this).data("panel"))})},switchTab:function(e){var t=v("#everest-forms-panel-"+e),i=v(".evf-panel-"+e+"-button");v(".evf-nav-tab-wrapper").find("a").removeClass("nav-tab-active"),i.addClass("nav-tab-active"),t.closest(".evf-tab-content").find(".everest-forms-panel").removeClass("active"),t.addClass("active"),"integrations"!==e&&"payments"!==e||(t.find(".everest-forms-panel-sidebar a").hasClass("active")||t.find(".everest-forms-panel-sidebar a").first().addClass("active"),v(".everest-forms-panel-content").find(".evf-panel-content-section").hasClass("active")||v(".everest-forms-panel-content").find(".evf-panel-content-section").first().addClass("active")),history.replaceState({},null,m.updateQueryString("tab",e)),m.switchPanel(e)},updateQueryString:function(e,t,i){i||(i=window.location.href);var n,s=new RegExp("([?&])"+e+"=.*?(&|#|$)(.*)","gi");if(s.test(i))return null!=t?i.replace(s,"$1"+e+"="+t+"$2$3"):(i=(n=i.split("#"))[0].replace(s,"$1$3").replace(/(&|\?)$/,""),"undefined"!=typeof n[1]&&null!==n[1]&&(i+="#"+n[1]),i);if(null!=t){var o=-1!==i.indexOf("?")?"&":"?";return i=(n=i.split("#"))[0]+o+e+"="+t,"undefined"!=typeof n[1]&&null!==n[1]&&(i+="#"+n[1]),i}return i},switchPanel:function(e){"field-options"===e&&m.switchToFieldOptionPanel()},switchToFieldOptionPanel:function(e){v(".everest-forms-field-options").find(".no-fields").hide(),v(".evf-admin-field-wrapper .everest-forms-field").removeClass("active"),v("#everest-forms-panel-fields").addClass("active"),v(".everest-forms-fields-tab").find("a").removeClass("active"),v(".everest-forms-fields-tab").find("a").last().addClass("active"),v(".everest-forms-add-fields").hide(),v(".everest-forms-field-options").show(),v(".everest-forms-field-options").find(".everest-forms-field-option").hide(),v(".evf-tab-lists").find("li a").removeClass("active"),v(".evf-tab-lists").find("li.evf-panel-field-options-button a").addClass("active"),v(document.body).trigger("evf-init-switch-field-options"),void 0!==e?(v("#everest-forms-field-option-"+e).show(),v("#everest-forms-field-"+e).addClass("active")):0<v(".evf-admin-field-wrapper .everest-forms-field").length?(v(".evf-admin-field-wrapper .everest-forms-field").eq(0).addClass("active"),v("#everest-forms-field-option-"+v(".evf-admin-field-wrapper .everest-forms-field").eq(0).attr("data-field-id")).show()):v(".everest-forms-field-options").find(".no-fields").show()},bindFields:function(){v(".evf-admin-field-wrapper").sortable({containment:".evf-admin-field-wrapper",tolerance:"pointer",revert:"invalid",placeholder:"evf-admin-row",forceHelperSize:!0,over:function(){v(".evf-admin-field-wrapper").addClass("evf-hover")},out:function(){v(".evf-admin-field-wrapper").removeClass("evf-hover")}}),v(".evf-admin-grid").sortable({containment:".evf-admin-field-wrapper",cancel:!1,over:function(e){v(e.target).addClass("evf-item-hover"),v(".evf-admin-grid").addClass("evf-hover"),m.checkEmptyGrid()},out:function(e){v(".evf-admin-grid").removeClass("evf-hover"),v(e.target).removeClass("evf-item-hover"),m.checkEmptyGrid()},revert:!0,connectWith:".evf-admin-grid"}).disableSelection(),v(".evf-registered-buttons button.evf-registered-item").draggable({connectToSortable:".evf-admin-grid",containment:"#everest-forms-builder",helper:"clone",cancel:!1,scroll:!1,delay:200,opacity:.75,start:function(e,t){v(this).data("uihelper",t.helper),v(".evf-admin-grid").addClass("evf-hover"),v(".evf-show-grid").closest(".evf-toggle-row").find(".evf-toggle-row-content").stop(!0).slideUp(200)},revert:function(e){return this.data("uihelper").data("dropped",!1!==e),!1===e},stop:function(e,t){if(!0===t.helper.data("dropped")){v(".evf-admin-grid").removeClass("evf-hover");var i=t.helper;m.fieldDrop(i)}}}).disableSelection()},fieldTabChoice:function(e){v(".everest-forms-fields-tab a").removeClass("active"),v(".everest-forms-field, .everest-forms-title-desc").removeClass("active"),v("#"+e).addClass("active"),"add-fields"===e?(v(".everest-forms-add-fields").show(),v(".everest-forms-field-options").hide()):("field-options"===e?(e=v(".everest-forms-field").first().data("field-id"),v(".everest-forms-field-options").show(),v(".everest-forms-field").first().addClass("active")):v("#everest-forms-field-"+e).addClass("active"),v(".everest-forms-field-option").hide(),v("#everest-forms-field-option-"+e).show(),v(".everest-forms-add-fields").hide())},bindFormPreview:function(){},bindGridSwitcher:function(){v("body").on("click",".evf-show-grid",function(e){e.stopPropagation(),m.checkEmptyGrid(),v(this).closest(".evf-toggle-row").find(".evf-toggle-row-content").stop(!0).slideToggle(200)}),v(document).click(function(){m.checkEmptyGrid(),v(".evf-show-grid").closest(".evf-toggle-row").find(".evf-toggle-row-content").stop(!0).slideUp(200)});v("body").on("click",".evf-grid-selector",function(){var e=v(this).closest(".evf-admin-row");if(!v(this).hasClass("active")){var t=parseInt(v(this).attr("data-evf-grid"),10);if(!(2<t)){var i=v('<div class="evf-admin-grid evf-grid-'+t+' ui-sortable evf-empty-grid" />'),n=v("<div/>");v.each(e.find(".evf-admin-grid"),function(){v(this).children("*").each(function(){n.append(v(this).clone())})}),e.find(".evf-admin-grid").remove(),e.find(".evf-clear ").remove(),e.append('<div class="clear evf-clear"></div>');for(var s=1;s<=t;s++)i.attr("data-grid-id",s),e.append(i.clone());e.append('<div class="clear evf-clear"></div>'),e.find(".evf-admin-grid").eq(0).append(n.html()),e.find(".evf-grid-selector").removeClass("active"),v(this).addClass("active"),m.bindFields()}}})},fieldDrop:function(o){var e=o.attr("data-field-type");o.css({left:"0",width:"100%"}),o.append('<i class="spinner is-active"></i>');var t={action:"everest_forms_new_field_"+e,security:p.evf_field_drop_nonce,field_type:e,form_id:p.form_id};v.ajax({url:p.ajax_url,data:t,type:"POST",beforeSend:function(){v(document.body).trigger("init_field_options_toggle")},success:function(e){var t=e.data.preview,i=e.data.options,n=e.data.form_field_id;v("#everest-forms-field-id").val(n),v(".everest-forms-field-options").find(".no-fields").hide(),v(".everest-forms-field-options").append(i),o.after(t);var s=v(t).attr("id");o.remove(),m.checkEmptyGrid(),v(document.body).trigger("init_tooltips"),v(document.body).trigger("init_field_options_toggle"),m.conditionalLogicAppendField(s)}})},conditionalLogicAppendField:function(s){var o=v("#"+s),r=o.index(),a=v(".everest-forms-conditional-fields").find(".evf-field-conditional-field-select"),e=o.attr("data-field-type"),t=o.attr("data-field-id"),d='<option class="evf-conditional-fields" data-field_type="'+e+'" data-field_id="'+t+'" value="'+t+'">'+o.find(".label-title .text ").text()+"</option>";v.fn.insertAt=function(e,t){var i=v.makeArray(this.children().clone(!0));i.splice(t,0,e),this.empty().append(i)},a.each(function(n,e){var t=s.replace("everest-forms-field-",""),i=v(e).attr("name");t===i.substring(i.indexOf("[")+1,i.indexOf("]"))?v(".evf-admin-row .evf-admin-grid .everest-forms-field").each(function(){var e=v(this).data("field-type"),t=v(this).data("field-id"),i=v(this).find(".label-title span").first().text();field_to_be_restricted=[],field_to_be_restricted=["html","title","address","image-upload","file-upload","date","hidden",o.attr("data-field-type")],-1===v.inArray(e,field_to_be_restricted)&&a.eq(n).append('<option class="evf-conditional-fields" data-field_type="'+e+'" data-field_id="'+t+'" value="'+t+'">'+i+"</option>")}):a.eq(n).insertAt(d,r)})},conditionalLogicRemoveField:function(e){v(".everest-forms-conditional-fields .evf-field-conditional-field-select option[value = "+e+" ]").remove()},bindFieldSettings:function(){v("body").on("click",".everest-forms-preview .everest-forms-field, .everest-forms-preview .everest-forms-field .everest-forms-field-setting",function(e){e.preventDefault();var t=v(this).closest(".everest-forms-field").attr("data-field-id");m.switchToFieldOptionPanel(t)})}};v(function(){m.init()})}(jQuery,window.evf_data),jQuery(function(){"checked"!=jQuery("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email").attr("checked")&&jQuery("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email-wrap").nextAll().hide(),jQuery("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email").on("change",function(){"checked"!=jQuery(this).attr("checked")?jQuery("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email-wrap").nextAll().hide():jQuery("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email-wrap").nextAll().show()});var e=jQuery("#everest-forms-panel-field-settings-redirect_to option:selected").val();"0"==e?(jQuery("#everest-forms-panel-field-settings-custom_page-wrap").hide(),jQuery("#everest-forms-panel-field-settings-external_url-wrap").hide()):"1"==e?(jQuery("#everest-forms-panel-field-settings-custom_page-wrap").show(),jQuery("#everest-forms-panel-field-settings-external_url-wrap").hide()):"2"==e&&(jQuery("#everest-forms-panel-field-settings-external_url-wrap").show(),jQuery("#everest-forms-panel-field-settings-custom_page-wrap").hide()),jQuery("#everest-forms-panel-field-settings-redirect_to").on("change",function(){"0"==this.value?(jQuery("#everest-forms-panel-field-settings-custom_page-wrap").hide(),jQuery("#everest-forms-panel-field-settings-external_url-wrap").hide()):"1"==this.value?(jQuery("#everest-forms-panel-field-settings-custom_page-wrap").show(),jQuery("#everest-forms-panel-field-settings-external_url-wrap").hide()):"2"==this.value&&(jQuery("#everest-forms-panel-field-settings-custom_page-wrap").hide(),jQuery("#everest-forms-panel-field-settings-external_url-wrap").show())}),jQuery(".evf-panel-field-options-button.evf-disabled-tab").hide()}),jQuery(function(a){a(document.body).on("init_tooltips",function(){a(".tips, .help_tip, .everest-forms-help-tooltip").tipTip({attribute:"data-tip",fadeIn:50,fadeOut:50,delay:200})}).trigger("init_tooltips"),a(document.body).on("init_add_fields_toogle",function(){a(".everest-forms-add-fields").on("click",".everest-forms-add-fields-group > a",function(e){e.preventDefault(),a(this).parent(".everest-forms-add-fields-group").toggleClass("closed").toggleClass("open")}),a(".everest-forms-add-fields").on("click",".everest-forms-add-fields-group a",function(){a(this).next(".evf-registered-buttons").stop().slideToggle()}),a(".everest-forms-add-fields-group.closed").each(function(){a(this).find(".evf-registered-buttons").hide()})}).trigger("init_add_fields_toogle"),a(document.body).on("init_field_options_toggle",function(){a(".everest-forms-field-option").on("click",".everest-forms-field-option-group > a",function(e){e.preventDefault(),a(this).parent(".everest-forms-field-option-group").toggleClass("closed").toggleClass("open")}),a(".everest-forms-field-option").on("click",".everest-forms-field-option-group a",function(e){a(e.target).filter(":input, option, .sort").length||a(this).next(".everest-forms-field-option-group-inner").stop().slideToggle()}),a(".everest-forms-field-option-group.closed").each(function(){a(this).find(".everest-forms-field-option-group-inner").hide()})}).trigger("init_field_options_toggle"),a(document).click(function(){a(".evf-smart-tag-lists").hide()}),a(document.body).on("click",".evf-toggle-smart-tag-display",function(e){e.stopPropagation(),a(".evf-smart-tag-lists").hide(),a(".evf-smart-tag-lists ul").empty(),a(this).parent().find(".evf-smart-tag-lists").toggle(),function(s,e){var o=[],r=[];if(a(".evf-admin-row .evf-admin-grid .everest-forms-field").each(function(){var e=a(this).data("field-type"),t=a(this).data("field-id");if(s===e){var i=a(this).find(".label-title span").first().text();r[t]=i}else{var n=a(this).find(".label-title span").first().text();o[t]=n}}),"email"===s)for(var t in r)a(e).parent().find(".evf-smart-tag-lists ul").append('<li class = "smart-tag-field" data-field_id="'+t+'">'+r[t]+"</li>");else for(var i in o)a(e).parent().find(".evf-smart-tag-lists ul").append('<li class = "smart-tag-field" data-field_id="'+i+'">'+o[i]+"</li>")}(a(this).data("fields"),a(this))}),a(document.body).on("click",".smart-tag-field",function(e){var t=a(this).data("field_id"),i=a(this).text(),n=a(this).parent().parent().parent(),s=n.find("input[type=text]"),o=n.find("textarea");if("fullname"!==t&&"email"!==t&&"subject"!==t&&"message"!==t){i=i.split(/[\s-_]/);for(var r=0;r<i.length;r++)i[r]=0===r?i[r].charAt(0).toLowerCase()+i[r].substr(1):i[r].charAt(0).toUpperCase()+i[r].substr(1);t=(i=i.join(""))+"_"+t}else t=t;s.val(s.val()+'{field_id="'+t+'"}'),o.val(o.val()+'{field_id="'+t+'"}')})});