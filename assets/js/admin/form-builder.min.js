!function(p,c){var a,m={init:function(){p(document).ready(function(e){e("evf-panel-integrations-button a").hasClass("active")||(e("#everest-forms-panel-integrations").find(".everest-forms-panel-sidebar a").first().addClass("active"),e("#everest-forms-panel-integrations").find(".everest-forms-panel-sidebar a").hasClass("active")&&e("#everest-forms-panel-integrations").find(".everest-forms-panel-sidebar a").next(".everest-forms-active-connections").first().addClass("active"),e(".everest-forms-panel-content").find(".evf-panel-content-section").first().addClass("active"))}),p(document).ready(function(o){"1"===o(".everest-forms-min-max-date-format input").val()&&(o(".everest-forms-min-date").addClass("flatpickr-field").flatpickr({disableMobile:!0,onChange:function(e,t,i){o(".everest-forms-min-date").val(t)},onOpen:function(e,t,i){i.set("maxDate",o(".everest-forms-max-date").val())}}),o(".everest-forms-max-date").addClass("flatpickr-field").flatpickr({disableMobile:!0,onChange:function(e,t,i){o(".everest-forms-max-date").val(t)},onOpen:function(e,t,i){i.set("minDate",o(".everest-forms-min-date").val())}})),o(".everest-forms-row-option select.evf-field-show-hide").each(function(){o(this).find('[selected="selected"]').prop("selected",!0)})}),p("evf-panel-payments-button a").hasClass("active")||(p("#everest-forms-panel-payments").find(".everest-forms-panel-sidebar a").first().addClass("active"),p(".everest-forms-panel-content").find(".evf-payment-setting-content").first().addClass("active")),p(document.body).find("#copy-shortcode").on("click",this.copyShortcode).on("aftercopy",this.copySuccess).on("aftercopyfailure",this.copyFail),p(document.body).find(".evf-copy-shortcode").each(function(){p(this).on("click",m.copyShortcode).on("aftercopy",m.copySuccess).on("aftercopyfailure",m.copyFail)}),p(document).ready(m.ready),p(window).on("load",m.load),p(document.body).on("evf-init-builder-fields",function(){m.bindFields()}).trigger("evf-init-builder-fields"),p(document.body).on("adjust_builder_width",function(){var e=p("#adminmenuwrap").width();p("#everest-forms-builder-form").css({width:"calc(100% - "+e+"px)"})}).trigger("adjust_builder_width"),p(document.body).on("click","#collapse-button",function(){p("#everest-forms-builder-form").width(""),p(document.body).trigger("adjust_builder_width")}),p(window).on("resize orientationchange",function(){clearTimeout(void 0),setTimeout(function(){p("#everest-forms-builder").width(""),p(document.body).trigger("adjust_builder_width")},250)}).trigger("resize")},copyShortcode:function(e){evfClearClipboard(),evfSetClipboard(p(this).closest(".evf-shortcode-field").find("input").val(),p(this)),e.preventDefault()},copySuccess:function(){p(this).tooltipster("content",p(this).attr("data-copied")).trigger("mouseenter").on("mouseleave",function(){var e=p(this);setTimeout(function(){e.tooltipster("content",e.attr("data-tip"))},1e3)})},copyFail:function(){p(this).closest(".evf-shortcode-field").find("input").focus().select()},load:function(){p(".everest-forms-overlay").fadeOut()},ready:function(){var e,t;a=p("#everest-forms-builder"),m.bindUIActions(),m.bindEditActions(),jconfirm.defaults={closeIcon:!0,backgroundDismiss:!0,escapeKey:!0,animationBounce:1,useBootstrap:!1,theme:"modern",boxWidth:"400px",columnClass:"evf-responsive-class"},"undefined"!=typeof PerfectScrollbar&&(e=p(".everest-forms-tab-content"),t=p(".everest-forms-panel"),1<=e.length&&(window.evf_tab_scroller=new PerfectScrollbar(".everest-forms-tab-content",{suppressScrollX:!0})),t.each(function(){var e=p(this),t=e.attr("id");1<=e.find(".everest-forms-panel-sidebar").length&&(window.evf_setting_scroller=new PerfectScrollbar("#"+t+" .everest-forms-panel-sidebar"))})),a.on("change",".everest-forms-field-option-row-limit_enabled input",function(e){m.updateTextFieldsLimitControls(p(e.target).parents(".everest-forms-field-option-row-limit_enabled").data().fieldId,e.target.checked)}),a.on("change",".everest-forms-field-option-row-min_length_enabled input",function(e){m.updateTextFieldsMinLengthControls(p(e.target).parents(".everest-forms-field-option-row-min_length_enabled").data().fieldId,e.target.checked)}),a.on("change",".everest-forms-field-option-select .everest-forms-field-option-row-enhanced_select input",function(e){m.enhancedSelectFieldStyle(p(e.target).parents(".everest-forms-field-option-row-enhanced_select").data().fieldId,e.target.checked)}),a.on("click",".everest-forms-field-option-row-choices .everest-forms-btn-group span",function(e){var t;p(this).hasClass("upgrade-modal")&&"checkbox"===p(this).data("type")?(p(this).parent().find("span").addClass("is-active"),p(this).removeClass("is-active"),m.updateEnhandedSelectField(p(e.target).parents(".everest-forms-field-option-row-choices").data().fieldId,!1)):(p(this).parent().find("span").removeClass("is-active"),p(this).addClass("is-active"),m.updateEnhandedSelectField(p(e.target).parents(".everest-forms-field-option-row-choices").data().fieldId,"multiple"===p(this).data("selection"))),"multiple"===p(this).data("selection")&&"checkbox"===p(this).data("type")&&p(this).hasClass("is-active")?(t=p(this).parent().parent().data("field-id"),p("#everest-forms-field-option-row-"+t+"-select_all").show()):(t=p(this).parent().parent().data("field-id"),p("#everest-forms-field-option-row-"+t+"-select_all").hide())}),p(document.body).on("click",'.everest-forms-field, .everest-forms-field-select[data-field-type="select"]',function(){a.find(".everest-forms-field-option-row-choices .everest-forms-btn-group span").each(function(){var e=p(this).parent().parent().data("field-id");"multiple"===p(this).data("selection")&&"checkbox"===p(this).data("type")&&p(this).hasClass("is-active")?p("#everest-forms-field-option-"+e+"-select_all").parent().show():p("#everest-forms-field-option-"+e+"-select_all").parent().hide()})}),a.on("keyup",".everest-forms-search-fields",function(){var t=p(this).val().toLowerCase();p(".evf-registered-item").each(function(){var e=p(this);field_type=e.data("field-type"),field_label=e.text().toLowerCase(),-1<field_type.search(t)||-1<field_label.search(t)?(e.addClass("evf-searched-item"),e.show()):(e.removeClass("evf-searched-item"),e.hide())}),p(".everest-forms-add-fields-group").each(function(){p(this).find(".evf-registered-item.evf-searched-item").length<=0?p(this).hide():p(this).show()}),p(".evf-registered-item.evf-searched-item").length?p(".everest-forms-fields-not-found").addClass("hidden"):p(".everest-forms-fields-not-found").removeClass("hidden")}),p(document).trigger("everest_forms_ready")},updateTextFieldsLimitControls:function(e,t){t?p("#everest-forms-field-option-row-"+e+"-limit_controls").removeClass("everest-forms-hidden"):p("#everest-forms-field-option-row-"+e+"-limit_controls").addClass("everest-forms-hidden")},updateTextFieldsMinLengthControls:function(e,t){t?p("#everest-forms-field-option-row-"+e+"-min_length_controls").removeClass("everest-forms-hidden"):p("#everest-forms-field-option-row-"+e+"-min_length_controls").addClass("everest-forms-hidden")},enhancedSelectFieldStyle:function(e,t){var i=p("#everest-forms-field-"+e+" .primary-input"),e=p("#everest-forms-field-option-"+e+"-enhanced_select").is(":checked");t&&e&&i.prop("multiple")?(i.addClass("evf-enhanced-select"),p(document.body).trigger("evf-enhanced-select-init")):(i.removeClass("evf-enhanced-select enhanced"),i.filter(".select2-hidden-accessible").selectWoo("destroy"))},updateEnhandedSelectField:function(e,t){var i=p("#everest-forms-field-"+e+" .primary-input"),o=i.find(".placeholder"),s=p("#everest-forms-field-option-"+e+"-multiple_choices"),n=p("#everest-forms-field-option-row-"+e+"-choices input.default"),r=n.filter(":checked");s.val(t?1:0),i.prop("multiple",t),n.prop("type",t?"checkbox":"radio"),!t&&r.length&&(n.prop("checked",!1),p(r.get(0)).prop("checked",!0)),o.length&&t&&o.prop("selected",!t),m.enhancedSelectFieldStyle(e,t)},bindUIActions:function(){m.bindDefaultTabs(),m.checkEmptyGrid(),m.bindFields(),m.bindFormPreview(),m.bindFormPreviewWithKeyEvent(),m.bindFormEntriesWithKeyEvent(),m.bindGridSwitcher(),m.bindFieldSettings(),m.bindFieldDelete(),m.bindFieldDeleteWithKeyEvent(),m.bindCloneField(),m.bindSaveOption(),m.bindSaveOptionWithKeyEvent(),m.bindOpenShortcutKeysModalWithKeyEvent(),m.bindAddNewRow(),m.bindRemoveRow(),m.bindFormSettings(),m.bindFormEmail(),m.bindFormSmsNotifications(),m.bindFormConversational(),m.bindFormIntegrations(),m.bindFormPayment(),m.choicesInit(),m.bindToggleHandleActions(),m.bindLabelEditInputActions(),m.bindSyncedInputActions(),m.init_datepickers(),m.bindBulkOptionActions(),m.bindUIActionsFields(),"field-options"===c.tab&&p(".evf-panel-field-options-button").trigger("click"),p(document.body).on("everest-forms-field-drop",".evf-registered-buttons .evf-registered-item",function(){m.fieldDrop(p(this).clone())})},bindBulkOptionActions:function(){p(document.body).on("click",".evf-toggle-bulk-options",function(e){p(this).closest(".everest-forms-field-option").find(".everest-forms-field-option-row-add_bulk_options").slideToggle()}),p(document.body).on("click",".evf-toggle-presets-list",function(e){p(this).closest(".everest-forms-field-option").find(".everest-forms-field-option-row .evf-options-presets").slideToggle()}),p(document.body).on("click",".evf-add-bulk-options",function(e){var t,i=p(this).closest(".everest-forms-field-option-row"),o=i.data("field-id");i.length&&(t=i.closest(".everest-forms-field-option").find(".everest-forms-field-option-row-choices .evf-choices-list"),i=(o=i.find("textarea#everest-forms-field-option-"+o+"-add_bulk_options")).val().split("\n"),m.addBulkOptions(i,t),o.val(""))}),p(document.body).on("click",".evf-options-preset-label",function(e){var t,i=p(this).closest(".everest-forms-field-option-row"),o=i.data("field-id");i.length&&(t=p(this).closest(".evf-options-preset").find(".evf-options-preset-value").val(),i.find("textarea#everest-forms-field-option-"+o+"-add_bulk_options").val(t),p(this).closest(".evf-options-presets").slideUp())}),p(document.body).on("click",".everest-forms-field-option-row-password_strength",function(){p(this).find('[type="checkbox"]:first').prop("checked")&&p(this).next().find('[type="checkbox"]:first').prop("checked",!1)}),p(document.body).on("click",".everest-forms-field-option-row-password_validation",function(){p(this).find('[type="checkbox"]:first').prop("checked")&&(p(this).prev().find('[type="checkbox"]:first').prop("checked",!1),p(this).prev().find(".everest-forms-inner-options").addClass("everest-forms-hidden"))})},addBulkOptions:function(e,i){e.forEach(function(e){var t;""!==e&&(t=i.find("li").last().find("a.add"),m.choiceAdd(null,t,e.trim()))})},init_datepickers:function(){var e=p(".everest-forms-disable-dates").data("date-format");p(".everest-forms-disable-dates").each(function(){p(this).get(0)._flatpickr||p(this).flatpickr({dateFormat:e,mode:"multiple"})}),p(document.body).on("change",".evf-date-format",function(e){var t=p(".everest-forms-field-option:visible .everest-forms-disable-dates"),i=t.get(0)._flatpickr,o=i.selectedDates,s=p(this).val(),n=[];o.forEach(function(e){n.push(flatpickr.formatDate(e,s))}),i.set("dateFormat",s),t.val(n.join(", "))}),p(document.body).on("click",".evf-clear-disabled-dates",function(){p(".everest-forms-field-option:visible .everest-forms-disable-dates").get(0)._flatpickr.clear()}),p(".everest-forms-field-date-time").each(function(){var e=p(this).attr("data-field-id");m.dateSettingToggler(e,p("#everest-forms-field-option-"+e+"-datetime_style").val())})},bindEditActions:function(){p("#edit-form-name").on("click",function(e){e.stopPropagation(),""!==p("#evf-edit-form-name").val().trim()&&m.toggleEditTitle(e)}),p("#evf-edit-form-name").on("change keypress",function(e){var t=p(this);e.stopPropagation(),13===e.which&&""!==p(this).val().trim()&&m.toggleEditTitle(e),""!==t.val().trim()&&p("#everest-forms-panel-field-settings-form_title").val(t.val().trim())}).on("click",function(e){e.stopPropagation()}),p(document).not(p(".everest-forms-title-desc")).on("click",function(e){var t=p("#evf-edit-form-name");e.stopPropagation(),!t.prop("disabled")&&t.val()&&""!==t.val().trim()&&m.toggleEditTitle(e)})},toggleEditTitle:function(e){var t=p("#edit-form-name").siblings("#evf-edit-form-name");e.preventDefault(),t.prop("disabled",function(e,t){return!t}),t.hasClass("everst-forms-name-editing")||t.focus(),t.toggleClass("everst-forms-name-editing")},formObject:function(e){for(var t=jQuery(e).find("[name]"),i={},o={},s=0;s<t.length;s++){var n=jQuery(t[s]),r=n.prop("name").replace(/\]/gi,"").split("["),a=n.val(),d={};if(!n.is(":radio")&&!n.is(":checkbox")||n.is(":checked")){for(var l=r.length-1;0<=l;l--){var f=r[l];if(0===(f=void 0===f?"":f).length&&(d=[],"undefined"==typeof o[r[l-1]]?o[r[l-1]]=0:o[r[l-1]]+=1,f=o[r[l-1]]),l===r.length-1){if(a)if("true"===a)a=!0;else if("false"===a)a=!1;else if(isNaN(parseFloat(a))||parseFloat(a).toString()!==a)if("string"!=typeof a||"{"!==a.substr(0,1)&&"["!==a.substr(0,1)){if("object"==typeof a&&a.length&&n.is("select")){for(var c={},l=0;l<a.length;l++)c["n"+l]=a[l];a=c}}else try{a=JSON.parse(a)}catch(v){}else a=parseFloat(a);d[f]=a}else{var m=d;(d={})[f]=m}}p.extend(!0,i,d)}}return i},bindUIActionsFields:function(){a.on("click",".everest-forms-field-option-row-choices .add",function(e){m.choiceAdd(e,p(this))}),a.on("click",".everest-forms-field-option-row-choices .remove",function(e){m.choiceDelete(e,p(this))}),a.on("mousedown",".everest-forms-field-option-row-choices input[type=radio]",function(){var e=p(this);e.is(":checked")?e.attr("data-checked","1"):e.attr("data-checked","0")}),a.on("click",".everest-forms-field-option-row-choices input[type=radio]",function(){var e=p(this),t=e.parent().parent();e.parent().parent().find("input[type=radio]").not(this).prop("checked",!1),"1"===e.attr("data-checked")&&(e.prop("checked",!1),e.attr("data-checked","0")),m.choiceUpdate(t.data("field-type"),t.data("field-id"))}),a.on("change",".everest-forms-field-option-row-choices input[type=checkbox]",function(e){var t=p(this).parent().parent();m.choiceUpdate(t.data("field-type"),t.data("field-id"))}),a.on("keyup paste focusout",".everest-forms-field-option-row-choices input.label, .everest-forms-field-option-row-choices input.value",function(e){var t=p(this).parent().parent().parent();m.choiceUpdate(t.data("field-type"),t.data("field-id"))}),a.on("change",".everest-forms-field-option-row-show_values input",function(e){p(this).closest(".everest-forms-field-option").find(".everest-forms-field-option-row-choices ul").toggleClass("show-values")}),a.on("change",".everest-forms-field-option-row-choices_images input",function(){var e=p(this),t=e.parent().data("field-id"),i=p("#everest-forms-field-option-"+t),o=p("#everest-forms-field-option-"+t+"-input_columns"),s=p("#everest-forms-field-option-"+t).find(".everest-forms-field-option-hidden-type").val();e.parent().find(".notice").toggleClass("hidden"),i.find(".everest-forms-field-option-row-choices ul").toggleClass("show-images"),(e.is(":checked")?o.val("inline"):o.val("")).trigger("change"),m.choiceUpdate(s,t)}),a.on("click",".everest-forms-attachment-media-view .upload-button",function(e){var t,i,o=p(this);e.preventDefault(),i||(i=wp.media.frames.everestforms_media_frame=wp.media({title:c.i18n_upload_image_title,className:"media-frame everest-forms-media-frame",frame:"select",multiple:!1,library:{type:"image"},button:{text:c.i18n_upload_image_button}})).on("select",function(){var e=i.state().get("selection").first().toJSON();(t=o.hasClass("button-add-media")?(o.hide(),o.parent()):o.parent().parent().parent()).find(".source").val(e.url),t.find(".attachment-thumb").remove(),t.find(".thumbnail-image").prepend('<img class="attachment-thumb" src="'+e.url+'">'),t.find(".actions").show(),a.trigger("everestFormsImageUploadAdd",[o,t])}),i.open()}),a.on("click",".everest-forms-attachment-media-view .remove-button",function(e){e.preventDefault();e=p(this).parent().parent();e.find(".attachment-thumb").remove(),e.parent().find(".source").val(""),e.parent().find(".button-add-media").show(),a.trigger("everestFormsImageUploadRemove",[p(this),e])}),a.on("everestFormsImageUploadAdd everestFormsImageUploadRemove",function(e,t,i){var i=i.closest(".evf-choices-list"),o=i.data("field-type"),i=i.data("field-id");m.choiceUpdate(o,i)}),a.on("change",".everest-forms-field-option-row-input_columns select",function(){var e=p(this),t=e.val(),e=e.parent().data("field-id"),i="";"inline"===t?i="everest-forms-list-inline":""!==t&&(i="everest-forms-list-"+t+"-columns"),p("#everest-forms-field-"+e).removeClass("everest-forms-list-inline everest-forms-list-2-columns everest-forms-list-3-columns").addClass(i)}),a.on("click",".everest-forms-fields-tab a",function(e){e.preventDefault(),m.fieldTabChoice(p(this).attr("id"))}),p(document).on("mouseenter",'.everest-forms-tabs li[class*="part_"]',function(){!1===p(this).hasClass("active")&&(p(document).find(".everest-forms-field").hasClass("ui-sortable-helper")||p(document).find(".evf-registered-buttons button.evf-registered-item").hasClass("field-dragged"))&&p(this).find("a").trigger("click")}),a.on("change",".everest-forms-field-option-address input.hide",function(){var e=p(this),t=e.parent().parent().data("field-id"),e=e.parent().parent().data("subfield");p("#everest-forms-field-"+t).find(".everest-forms-"+e).toggleClass("hidden")}),a.on("input",".everest-forms-field-option-row-label input",function(){var e=p(this),t=e.val(),e=e.parent().data("field-id");($label=p("#everest-forms-field-"+e).find(".label-title .text")).hasClass("nl2br")?$label.html(t.replace(/\n/g,"<br>")):$label.html(t)}),a.on("change",".everest-forms-field-option-row-enable_prepopulate input",function(e){var t=p(this).parent().data("field-id");p("#everest-forms-field-"+t).toggleClass("parameter_name"),p(e.target).is(":checked")?p("#everest-forms-field-option-row-"+t+"-parameter_name").show():p("#everest-forms-field-option-row-"+t+"-parameter_name").hide()}),a.on("input",".everest-forms-field-option-row-description textarea",function(){var e=p(this),t=e.val(),e=e.parent().data("field-id"),e=p("#everest-forms-field-"+e).find(".description");e.hasClass("nl2br")?e.html(t.replace(/\n/g,"<br>")):e.html(t)}),a.on("change",".everest-forms-field-option-row-required input",function(e){var t=p(this).parent().data("field-id");p("#everest-forms-field-"+t).toggleClass("required"),p(e.target).is(":checked")?(p("#everest-forms-field-option-row-"+t+"-required_field_message_setting").show(),p("#everest-forms-field-option-"+t+"-required_field_message_setting-individual").is(":checked")&&p("#everest-forms-field-option-row-"+t+"-required-field-message").show()):(p("#everest-forms-field-option-row-"+t+"-required_field_message_setting").hide(),p("#everest-forms-field-option-row-"+t+"-required-field-message").hide())}),a.on("change",".everest-forms-field-option-row-required_field_message_setting input",function(e){var t=p(this).parent().parent().parent().parent().data("field-id");p("#everest-forms-field-"+t).toggleClass("required_field_message_setting"),"individual"===p(this).val()?p("#everest-forms-field-option-row-"+t+"-required-field-message").show():p("#everest-forms-field-option-row-"+t+"-required-field-message").hide()}),a.on("change",".everest-forms-field-option-row-confirmation input",function(e){var t=p(this).parent().data("field-id");p(e.target).is(":checked")?(p("#everest-forms-field-"+t).find(".everest-forms-confirm").removeClass("everest-forms-confirm-disabled").addClass("everest-forms-confirm-enabled"),p("#everest-forms-field-option-"+t).removeClass("everest-forms-confirm-disabled").addClass("everest-forms-confirm-enabled")):(p("#everest-forms-field-"+t).find(".everest-forms-confirm").removeClass("everest-forms-confirm-enabled").addClass("everest-forms-confirm-disabled"),p("#everest-forms-field-option-"+t).removeClass("everest-forms-confirm-enabled").addClass("everest-forms-confirm-disabled"))}),a.on("input",".everest-forms-field-option-row-placeholder input",function(e){var t=p(this),i=t.val(),t=t.parent().data("field-id"),t=p("#everest-forms-field-"+t).find(".widefat:not(.secondary-input)");t.is("select")?i.length?(t.find(".placeholder").length?t.find(".placeholder").text(i):t.prepend('<option class="placeholder" selected>'+i+"</option>"),t.data("placeholder",i),t.hasClass("enhanced")&&t.parent().find(".select2-search__field").prop("placeholder",i)):t.find(".placeholder").remove():t.attr("placeholder",i)}),a.on("input",".everest-forms-field-option-address input.placeholder",function(e){var t=p(this),i=t.val(),o=t.parent().parent().data("field-id"),t=t.parent().parent().data("subfield");p("#everest-forms-field-"+o).find(".everest-forms-"+t+" input").attr("placeholder",i)}),a.on("input",".everest-forms-field-option-row-confirmation_placeholder input",function(){var e=p(this),t=e.val(),e=e.parent().data("field-id");p("#everest-forms-field-"+e).find(".secondary-input").attr("placeholder",t)}),a.on("change",".everest-forms-field-option-row-label_hide input",function(){var e=p(this).parent().data("field-id");p("#everest-forms-field-"+e).toggleClass("label_hide")}),a.on("change",".everest-forms-field-option-row-sublabel_hide input",function(){var e=p(this).parent().data("field-id");p("#everest-forms-field-"+e).toggleClass("sublabel_hide")}),a.on("change",".everest-forms-field-option-row-datetime_format select, .everest-forms-field-option-row-phone_format select, .everest-forms-field-option-row-item_price select, .everest-forms-field-option-row-format select",function(e){var t=p(this),i=t.val(),t=t.parent().data("field-id");p("#everest-forms-field-"+t).find(".format-selected").removeClass().addClass("format-selected format-selected-"+i),p("#everest-forms-field-option-"+t).find(".format-selected").removeClass().addClass("format-selected format-selected-"+i)}),a.on("change",".everest-forms-field-option-row-datetime_style select",function(){m.dateSettingToggler(p(this).parent().attr("data-field-id"),p(this).val())}),p(".everest-forms-field-option-row-time_interval_format [id*=enable_min_max_time]").each(function(){p(this).prop("checked")?(p(this).parent().parent().find(".input-group-col-2").has(" [id*=min_time_hour]").show(),p(this).parent().parent().find(".input-group-col-2").has(" [id*=max_time_hour]").show(),p(this).parent().parent().find(".input-group-col-2").has(" [for*=select_min_time]").show(),p(this).parent().parent().find(".input-group-col-2").has("[for*=select_max_time]").show()):(p(this).parent().parent().find(".input-group-col-2").has("[id*=min_time_hour]").hide(),p(this).parent().parent().find(".input-group-col-2").has("[id*=max_time_hour]").hide(),p(this).parent().parent().find("[for*=select_min_time]").hide(),p(this).parent().parent().find("[for*=select_max_time]").hide())}),a.on("click",".everest-forms-field-option-row-time_interval_format [id*=enable_min_max_time]",function(){p(this).prop("checked")?(p(this).parent().parent().find(".input-group-col-2").has(" [id*=min_time_hour]").show(),p(this).parent().parent().find(".input-group-col-2").has(" [id*=max_time_hour]").show(),p(this).parent().parent().find("[for*=select_min_time]").show(),p(this).parent().parent().find("[for*=select_max_time]").show()):(p(this).parent().parent().find(".input-group-col-2").has("[id*=min_time_hour]").hide(),p(this).parent().parent().find(".input-group-col-2").has("[id*=max_time_hour]").hide(),p(this).parent().parent().find("[for*=select_min_time]").hide(),p(this).parent().parent().find("[for*=select_max_time]").hide())}),a.on("change",".everest-forms-field-option-row-time_interval_format select[id*=time_format]",function(){min_hour=p(this).parent().siblings(".input-group-col-2").find("[id*=min_time_hour]"),max_hour=p(this).parent().siblings(".input-group-col-2").find("[id*=max_time_hour]");var e,t,o=min_hour.find("option:selected").val(),s=max_hour.find("option:selected").val(),n="";for(i=0;i<=23;i++)"H:i"===p(this).val()?n+='<option value = "'+i+'">'+(i<10?"0"+i:i)+"</option>":(e=" PM",0==(t=i<12?(e=" AM",i):i-12)&&(t=12),n+='<option value = "'+i+'">'+t+e+"</option>");min_hour.html(n),max_hour.html(n),min_hour.find("option[value="+o+"]").prop("selected",!0),max_hour.find("option[value="+s+"]").prop("selected",!0)})},dateSettingToggler:function(e,t){"picker"==t?(p("#everest-forms-field-option-row-"+e+"-placeholder").show(),p("#everest-forms-field-option-"+e+"-disable_dates").show(),p("label[for=everest-forms-field-option-"+e+"-disable_dates]").show(),p("#everest-forms-field-option-"+e+"-date_mode-range").parents().find("everest-forms-checklist").show(),p(".everest-forms-field-option-row-date_format .time_interval").show(),p("#everest-forms-field-option-"+e+"-date_localization").show(),p("label[for=everest-forms-field-option-"+e+"-date_localization]").show(),p("#everest-forms-field-option-"+e+"-date_default").parent().show(),p("#everest-forms-field-option-"+e+"-past_date_disable").parent().show(),p("#everest-forms-field-option-"+e+"-enable_min_max").parent().show(),p("#everest-forms-field-option-"+e+"-enable_min_max").prop("checked")&&p("#everest-forms-field-option-row-"+e+"-date_format .everest-forms-min-max-date-option").removeClass("everest-forms-hidden"),p("#everest-forms-field-option-"+e+"-time_interval").show(),p("#everest-forms-field-option-"+e+"-enable_min_max_time").hide(),p("label[for=everest-forms-field-option-"+e+"-enable_min_max_time]").hide(),p("label[for=everest-forms-field-option-"+e+"-select_min_time]").hide(),p("label[for=everest-forms-field-option-"+e+"-select_max_time]").hide(),p("#everest-forms-field-option-"+e+"-min_time_hour").parent().hide(),p("#everest-forms-field-option-"+e+"-max_time_hour").parent().hide()):(p("#everest-forms-field-option-"+e+"-date_mode-range").parents().find("everest-forms-checklist").hide(),p("#everest-forms-field-option-"+e+"-date_default").parent().hide(),p("#everest-forms-field-option-"+e+"-past_date_disable").parent().hide(),p("#everest-forms-field-option-row-"+e+"-placeholder").hide(),p("#everest-forms-field-option-"+e+"-enable_min_max").parent().hide(),p("#everest-forms-field-option-row-"+e+"-date_format .everest-forms-min-max-date-option").addClass("everest-forms-hidden"),p("#everest-forms-field-option-"+e+"-disable_dates").hide(),p("label[for=everest-forms-field-option-"+e+"-disable_dates]").hide(),p(".everest-forms-field-option-row-date_format .everest-forms-checklist").hide(),p(".everest-forms-field-option-row-date_format .time_interval").hide(),p("#everest-forms-field-option-"+e+"-date_localization").hide(),p("label[for=everest-forms-field-option-"+e+"-date_localization]").hide(),p("#everest-forms-field-option-"+e+"-time_interval").hide(),p("#everest-forms-field-option-"+e+"-enable_min_max_time").show(),p("label[for=everest-forms-field-option-"+e+"-enable_min_max_time]").show(),p("#everest-forms-field-option-"+e+"-enable_min_max_time").prop("checked")&&(p("label[for=everest-forms-field-option-"+e+"-select_min_time]").show(),p("label[for=everest-forms-field-option-"+e+"-select_max_time]").show(),p("#everest-forms-field-option-"+e+"-min_time_hour").parent().show(),p("#everest-forms-field-option-"+e+"-max_time_hour").parent().show()))},choicesInit:function(e){p(e=e||".everest-forms-field-option-row-choices ul").sortable({items:"li",axis:"y",handle:".sort",scrollSensitivity:40,stop:function(e){var e=p(e.target).attr("data-field-id"),t=p("#everest-forms-field-option-"+e).find(".everest-forms-field-option-hidden-type").val();m.choiceUpdate(t,e)}})},choiceAdd:function(e,t,i){e&&e.preventDefault&&e.preventDefault();var e=p(t),t=e.parent(),o=t.find("input.default").is(":checked"),e=e.closest(".everest-forms-field-option-row-choices").data("field-id"),s=t.parent().attr("data-next-id"),n=t.parent().data("field-type"),r=t.clone().insertAfter(t);r.attr("data-key",s),r.find("input.label").val(i).attr("name","form_fields["+e+"][choices]["+s+"][label]"),r.find("input.value").val(i).attr("name","form_fields["+e+"][choices]["+s+"][value]"),r.find("input.source").val("").attr("name","form_fields["+e+"][choices]["+s+"][image]"),r.find("input.default").attr("name","form_fields["+e+"][choices]["+s+"][default]").prop("checked",!1),r.find(".attachment-thumb").remove(),r.find(".button-add-media").show(),!0===o&&t.find("input.default").prop("checked",!0),s++,t.parent().attr("data-next-id",s),a.trigger("everestFormsChoiceAdd"),m.choiceUpdate(n,e)},choiceDelete:function(e,t){e.preventDefault();e=p(t),t=e.parent().parent();t.find("li").length<2?p.alert({title:!1,content:c.i18n_field_error_choice,icon:"dashicons dashicons-info",type:"blue",buttons:{ok:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"]}}}):(e.parent().remove(),m.choiceUpdate(t.data("field-type"),t.data("field-id")),a.trigger("everestFormsChoiceDelete"))},choiceUpdate:function(s,n){var e,t,r,i=p("#everest-forms-field-option-"+n);if($primary=p("#everest-forms-field-"+n+" .primary-input"),"radio"===s||"checkbox"===s||"payment-multiple"===s||"payment-checkbox"===s)return e=[],i=m.formObject(i).form_fields[n],p("#everest-forms-field-option-"+n).find(".evf-choices-list li").each(function(){e.push(p(this).data("key"))}),t=wp.template("everest-forms-field-preview-choices"),data={type:s="checkbox"===s||"payment-checkbox"===s?"checkbox":"radio",order:e,settings:i,amountFilter:m.amountFilter},void p("#everest-forms-field-"+n).find("ul.primary-input").replaceWith(t(data));"select"===s&&(r="<option>{label}</option>",$primary.find("option").not(".placeholder").remove()),p("#everest-forms-field-option-row-"+n+"-choices .evf-choices-list li").each(function(e){var t=p(this),i=t.find("input.label").val(),t=t.find("input.default").is(":checked"),o=p(r.replace("{label}",i));if(p("#everest-forms-field-"+n+" .primary-input").append(o),i&&!0===t)switch(s){case"select":o.prop("selected",!0);break;case"radio":case"checkbox":o.find("input").prop("checked",!0)}})},amountFilter:function(e,t){return"right"===e.currency_symbol_pos?t+" "+e.currency_symbol:e.currency_symbol+" "+t},bindFormSettings:function(){p("body").on("click",".evf-setting-panel",function(e){var t=p(this).attr("data-section");p(".evf-setting-panel").removeClass("active"),p(".everest-forms-active-email").removeClass("active"),p(".everest-forms-active-sms-notifications").removeClass("active"),p(".everest-forms-active-conversational-forms").removeClass("active"),p(".evf-content-section").removeClass("active"),p(this).addClass("active"),p(".evf-content-"+t+"-settings").addClass("active"),e.preventDefault()}),p(".evf-setting-panel").eq(0).trigger("click")},bindFormEmail:function(){p("body").on("click",".everest-forms-panel-sidebar-section-email",function(e){p(this).siblings(".everest-forms-active-email").removeClass("active"),p(this).next(".everest-forms-active-email").addClass("active");var t=p(this).siblings(".everest-forms-active-email.active").find(".everest-forms-active-email-connections-list li");t.length&&t.children(".user-nickname").first().trigger("click"),e.preventDefault()})},bindFormSmsNotifications:function(){p("body").on("click",".everest-forms-panel-sidebar-section-sms-notifications",function(e){p(this).siblings(".everest-forms-active-sms-notifications").removeClass("active"),p(this).next(".everest-forms-active-sms-notifications").addClass("active");var t=p(this).siblings(".everest-forms-active-sms-notifications.active").find(".everest-forms-active-sms-notifications-connections-list li");t.length&&t.children(".user-nickname").first().trigger("click"),e.preventDefault()})},bindFormConversational:function(){p("body").on("click",".everest-forms-panel-sidebar-section-conversational-forms ",function(e){p(this);p(this).siblings(".everest-forms-active-conversational-forms").removeClass("active"),p(this).next(".everest-forms-active-conversational-forms").addClass("active");var t=p(this).siblings(".everest-forms-active-conversational-forms.active");t.length&&t.children(".evf-content-tab ").trigger("click"),e.preventDefault()})},bindFormIntegrations:function(){p("body").on("click",".evf-integrations-panel",function(e){var t=p(this).attr("data-section"),i=(p(".evf-integrations-panel").removeClass("active"),p("#everest-forms-panel-integrations").find(".evf-panel-content-section").removeClass("active"),p(this).addClass("active"),p(this).parent().find(".everest-forms-active-connections").removeClass("active"),p(this).next(".everest-forms-active-connections").addClass("active"),p(this).siblings(".everest-forms-active-connections.active").find(".everest-forms-active-connections-list li"));i.length&&i.children(".user-nickname").first().trigger("click"),p(".evf-panel-content-section-"+t).addClass("active"),e.preventDefault()}),p(".evf-setting-panel").eq(0).trigger("click")},bindFormPayment:function(){p("body").on("click",".evf-payments-panel",function(e){var t=p(this).attr("data-section");p(".evf-payments-panel").removeClass("active"),p(this).siblings().removeClass("icon active"),p(this).addClass("active"),p(this).parents("#everest-forms-panel-payments").find(".evf-payment-setting-content").removeClass("active").hide(),p(".evf-content-"+t+"-settings").addClass("active").show(),e.preventDefault()}),p(".evf-setting-panel").eq(0).trigger("click")},removeRow:function(e){p.each(e.find(".everest-forms-field"),function(){var e=p(this).attr("data-field-id"),e=p("#everest-forms-field-option-"+e);p(this).remove(),e.remove()}),e.remove()},bindRemoveRow:function(){p("body").on("click",".evf-delete-row",function(){var e=p(this),t=p(".evf-admin-row").length,i=e.closest(".evf-admin-row"),o=i.attr("data-row-id"),e=e.parents(".evf-admin-field-container").attr("data-current-part"),s=p("#everest-forms-builder").hasClass("multi-part-activated");(t=e&&s?p("#part_"+e).find(".evf-admin-row").length:t)<2?p.alert({title:c.i18n_row_locked,content:c.i18n_row_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"]}}}):p.confirm({title:!1,content:c.i18n_delete_row_confirm,type:"red",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){m.removeRow(i),p(".everest-forms-fields-tab").find("a").removeClass("active"),p(".everest-forms-fields-tab").find("a").first().addClass("active"),p(".everest-forms-add-fields").show(),p("#everest-forms-row-option-row_"+o).remove()}},cancel:{text:c.i18n_cancel}}})})},bindAddNewRow:function(){p("body").on("click",".evf-add-row span",function(){p("#add-fields").trigger("click");var t,e=p(this),i=p(".evf-admin-field-wrapper"),o=p(".evf-admin-row").map(function(){return p(this).data("row-id")}).get(),o=Math.max.apply(Math,o),s=p(".evf-admin-row").eq(0).clone(),n=e.parent().attr("data-total-rows"),r=e.parents(".evf-admin-field-container").attr("data-current-part");o++,n++,r&&(i=p(".evf-admin-field-wrapper").find("#part_"+r)),s.find(".evf-admin-grid").html(""),s.attr("data-row-id",o),e.parent().attr("data-total-rows",n),e.parent().attr("data-next-row-id",o),0<p(".everest-forms-row-options").length&&!1===e.closest(".evf-add-row").hasClass("repeater-row")?(s.find("div").hide(),s.css({padding:"40px"}).append('<i class="spinner is-active" style="margin:0px auto;"></i>'),i.append(s),m.bindFields(),m.checkEmptyGrid(),t=s.attr("data-row-id"),r=window.evf_data,p.ajax({url:r.ajax_url,type:"POST",data:{action:"everest_forms_new_row",security:r.evf_add_row_nonce,form_id:r.form_id,row_id:t},success:function(e){!0===e.success&&"undefined"!=typeof e.data.html&&(p(document).find(".everest-forms-row-option-group").append(e.data.html),m.conditionalLogicAppendRow(t),p("#everest-forms-panel-field-form_rows-connection_row_"+t+"-conditional_logic_status").prop("checked",!1))}}).always(function(){s.css({padding:0}),s.find("div").show(),s.find(".evf-toggle-row-content").css("display","none"),s.find("i").remove(),e.trigger("everest-forms-after-add-row",s)})):(i.append(s),m.bindFields(),m.checkEmptyGrid(),e.trigger("everest-forms-after-add-row",s))})},bindCloneField:function(){p("body").on("click",".everest-forms-preview .everest-forms-field .everest-forms-field-duplicate",function(){var e=p(this).closest(".everest-forms-field");e.hasClass("no-duplicate")?p.alert({title:c.i18n_field_locked,content:c.i18n_field_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"]}}}):p.confirm({title:!1,content:c.i18n_duplicate_field_confirm,type:"orange",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){m.cloneFieldAction(e)}},cancel:{text:c.i18n_cancel}}})}),p("body").on("click",".evf-admin-row .evf-duplicate-row",function(){var e=p(this).closest(".evf-admin-row");e.find(".everest-forms-field").hasClass("no-duplicate")?p.alert({title:c.i18n_field_locked,content:c.i18n_row_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"]}}}):p.confirm({title:!1,content:c.i18n_duplicate_row_confirm,type:"orange",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){m.cloneRowAction(e)}},cancel:{text:c.i18n_cancel}}})})},cloneRowAction:function(t){row_ids=p(".evf-admin-row").map(function(){return p(this).data("row-id")}).get(),max_row_id=Math.max.apply(Math,row_ids),row_clone=t.clone(),total_rows=p(".evf-add-row").attr("data-total-rows"),max_row_id++,total_rows++,row_clone.attr("data-row-id",max_row_id),p(".evf-add-row").attr("data-total-rows",total_rows),p(".evf-add-row").attr("data-next-row-id",max_row_id);var e={action:"everest_forms_get_next_id",security:c.evf_get_next_id,form_id:c.form_id,fields:row_clone.find(".everest-forms-field").length};p.ajax({url:c.ajax_url,data:e,type:"POST",beforeSend:function(){p(document.body).trigger("init_field_options_toggle")},success:function(e){"boolean"==typeof e.success&&!0===e.success&&(t.after(row_clone),p.each(e.data,function(e,t){var i=t.field_id,t=t.field_key,i=(p("#everest-forms-field-id").val(i),(field=row_clone.find(".everest-forms-field").eq(e)).attr("data-field-id"));m.render_node(field,i,t),field.remove(),p(document.body).trigger("init_field_options_toggle")}),m.bindFields())}})},cloneFieldAction:function(i){var o=i.attr("data-field-id"),e=c.form_id,e={action:"everest_forms_get_next_id",security:c.evf_get_next_id,form_id:e};p.ajax({url:c.ajax_url,data:e,type:"POST",beforeSend:function(){p(document.body).trigger("init_field_options_toggle")},success:function(e){var t;"boolean"==typeof e.success&&!0===e.success&&(t=e.data.field_id,e=e.data.field_key,p("#everest-forms-field-id").val(t),m.render_node(i,o,e),p(document.body).trigger("init_field_options_toggle"))}})},render_node:function(e,o,s){var t=p(".everest-forms-field-options #everest-forms-field-option-"+o),i=p("#everest-forms-field-option-"+o+"-label").val(),n=p("#everest-forms-field-option-"+o+"-meta-key").length?p("#everest-forms-field-option-"+o+"-meta-key").val():"",r=e.attr("data-field-type"),a=t.html(),i=i+" "+c.i18n_copy,n="html"!==r?n.replace(/\(|\)/g,"").toLowerCase().substring(0,n.lastIndexOf("_"))+"_"+Math.floor(1e3+9e3*Math.random()):"",d=e.clone(),l=new RegExp(o,"g"),a=a.replace(l,s),f=p('<div class="everest-forms-field-option everest-forms-field-option-'+r+'" id="everest-forms-field-option-'+s+'" data-field-id="'+s+'" />');f.append(a),p.each(t.find(":input"),function(){var e,t=p(this).attr("type"),i=(p(this).attr("name")?p(this).attr("name"):"").replace(l,s);"text"===t||"hidden"===t?(e=p(this).val(),f.find('input[name="'+i+'"]').val(e),f.find('input[value="'+o+'"]').val(s)):"checkbox"===t||"radio"===t?p(this).is(":checked")?f.find('input[name="'+i+'"]').prop("checked",!0).attr("checked","checked"):f.find('[name="'+i+'"]').prop("checked",!1).attr("checked",!1):p(this).is("select")?p(this).find("option:selected").length&&(e=p(this).find("option:selected").val(),f.find('[name="'+i+'"]').find('[value="'+e+'"]').prop("selected",!0)):""!==p(this).val()&&f.find('[name="'+i+'"]').val(p(this).val())}),p(".everest-forms-field-options").append(f),p("#everest-forms-field-option-"+s+"-label").val(i),p("#everest-forms-field-option-"+s+"-meta-key").val(n),d.attr("class",e.attr("class")),d.attr("id","everest-forms-field-"+s),d.attr("data-field-id",s),d.attr("data-field-type",r),d.find(".label-title .text").text(i),e.closest(".evf-admin-grid").find('[data-field-id="'+o+'"]').after(d),p(document).trigger("everest-form-cloned",[s,r]),m.switchToFieldOptionPanel(s),p(document.body).trigger("evf_render_node_complete",[r,s,d,f])},bindFieldDelete:function(){p("body").on("click",".everest-forms-preview .everest-forms-field .everest-forms-field-delete",function(){var t=p(this).closest(".everest-forms-field"),e=t.attr("data-field-id"),i=p("#everest-forms-field-option-"+e);p(this).closest(".evf-admin-grid");t.hasClass("no-delete")?p.alert({title:c.i18n_field_locked,content:c.i18n_field_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"]}}}):p.confirm({title:!1,content:c.i18n_delete_field_confirm,type:"red",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){p(".evf-panel-fields-button").trigger("click"),t.fadeOut("slow",function(){var e=t.attr("data-field-id");p(document.body).trigger("evf_before_field_deleted",[e]),t.remove(),i.remove(),m.checkEmptyGrid(),p(".everest-forms-fields-tab").find("a").removeClass("active"),p(".everest-forms-fields-tab").find("a").first().addClass("active"),p(".everest-forms-add-fields").show(),m.conditionalLogicRemoveField(e),m.conditionalLogicRemoveFieldIntegration(e),m.paymentFieldRemoveFromQuantity(e)})}},cancel:{text:c.i18n_cancel}}})})},bindFieldDeleteWithKeyEvent:function(){p("body").on("keyup",function(e){var t,i=p(".everest-forms-preview .everest-forms-field.active");46===e.which&&!0===i.hasClass("active")&&!1===i.hasClass("evf-delete-event-active")&&0!=p(".evf-admin-row").hasClass("evf-hover")&&(i.addClass("evf-delete-event-active"),e=i.attr("data-field-id"),t=p("#everest-forms-field-option-"+e),i.hasClass("no-delete")?p.alert({title:c.i18n_field_locked,content:c.i18n_field_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"],action:function(){i.removeClass("evf-delete-event-active")}}}}):p.confirm({title:!1,content:c.i18n_delete_field_confirm,type:"red",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){p(".evf-panel-fields-button").trigger("click"),i.fadeOut("slow",function(){var e=i.attr("data-field-id");p(document.body).trigger("evf_before_field_deleted",[e]),i.remove(),t.remove(),m.checkEmptyGrid(),p(".everest-forms-fields-tab").find("a").removeClass("active"),p(".everest-forms-fields-tab").find("a").first().addClass("active"),p(".everest-forms-add-fields").show(),m.conditionalLogicRemoveField(e),m.conditionalLogicRemoveFieldIntegration(e),m.paymentFieldRemoveFromQuantity(e)}),i.removeClass("evf-delete-event-active")}},cancel:{text:c.i18n_cancel,action:function(){i.removeClass("evf-delete-event-active")}}}}))})},bindSaveOption:function(){p("body").on("click",".everest-forms-save-button",function(){var t=p(this),e=p("form#everest-forms-builder-form"),i=m.getStructure(),o=e.serializeArray(),s=p("#evf-edit-form-name").val().trim();if(p(document).trigger("everest_forms_save_args",[o]),""===s)p.alert({title:c.i18n_field_title_empty,content:c.i18n_field_title_payload,icon:"dashicons dashicons-warning",type:"red",buttons:{ok:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"]}}});else{e.triggerHandler("everest_forms_process_ajax_data",[t,o])&&(o=e.triggerHandler("everest_forms_process_ajax_data",[t,o])),p(".everest-forms-panel-content-wrap").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});for(var n,r=[],a=(p(".everest-forms-field[data-field-id]").each(function(){r.push(p(this).attr("data-field-id"))}),o.length);a--;)o[a].name.startsWith("form_fields")&&(n=!1,r.forEach(function(e){o[a].name.startsWith("form_fields["+e+"]")&&(n=!0)}),-1<a&&!1===n&&o.splice(a,1));s=o.concat(i),e={action:"everest_forms_save_form",security:c.evf_save_form,form_data:JSON.stringify(s)};p.ajax({url:c.ajax_url,data:e,type:"POST",beforeSend:function(){t.addClass("processing"),t.find(".loading-dot").remove(),t.append('<span class="loading-dot"></span>')},success:function(e){t.removeClass("processing"),t.find(".loading-dot").remove(),p(document).trigger("everest_forms_save_data",e.data),e.success||p.alert({title:e.data.errorTitle,content:e.data.errorMessage,icon:"dashicons dashicons-warning",type:"red",buttons:{ok:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"]}}}),p(".everest-forms-panel-content-wrap").unblock()}})}})},bindSaveOptionWithKeyEvent:function(){p("body").on("keydown",function(e){!e.ctrlKey&&!e.metaKey||"s"!==String.fromCharCode(e.which).toLowerCase()&&83!==e.which||(e.preventDefault(),p(".everest-forms-save-button").trigger("click"))})},bindOpenShortcutKeysModalWithKeyEvent:function(){p("body").on("keydown",function(e){var i;!e.ctrlKey&&!e.metaKey||"h"!==String.fromCharCode(e.which).toLowerCase()&&72!==e.which||(e.preventDefault(),i="",p.each(c.i18n_shortcut_keys,function(e,t){i+=`
								<ul class="evf-shortcut-keyword">
									<li>
										<div class="evf-shortcut-title">${t}</div>
									<div class="evf-key">
										<span>${e.split("+")[0]}</span>
										<span>${e.split("+")[1]}</span>
									</div>
									</li>
								</ul>
							`}),p.alert({title:c.i18n_shortcut_key_title,content:i,icon:"dashicons dashicons-info",type:"blue",boxWidth:"550px",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"]}},onContentReady:function(){p("body").on("keydown",function(e){(e.ctrlKey||e.metaKey&&"h"===String.fromCharCode(e.which).toLowerCase()||72===e.which)&&p(".btn-confirm").trigger("click")})}}))})},getStructure:function(){var e=p(".evf-admin-field-wrapper"),n=[];return p.each(e.find(".evf-admin-row"),function(){var e=p(this),s=e.attr("data-row-id");p.each(e.find(".evf-admin-grid"),function(){var e=p(this),i=e.attr("data-grid-id"),o=0;p.each(e.find(".everest-forms-field"),function(){var e={name:"",value:""},t=p(this).attr("data-field-id");e.name="structure[row_"+s+"][grid_"+i+"]["+o+"]",o++,e.value=t,n.push(e)}),e.find(".everest-forms-field").length<1&&n.push({name:"structure[row_"+s+"][grid_"+i+"]",value:""})})}),n},getFieldArray:function(e){var t=[];return p.each(e.find(".everest-forms-field"),function(){var e=p(this).attr("data-field-id");t.push(e)}),t},checkEmptyGrid:function(e){p.each(p(".evf-admin-grid"),function(){p(this).find(".everest-forms-field, .evf-registered-item:not(.ui-draggable-dragging)").not(".ui-sortable-helper").length<1?p(this).addClass("evf-empty-grid"):p(this).removeClass("evf-empty-grid")}),m.choicesInit()},bindDefaultTabs:function(){p(document).on("click",".evf-nav-tab-wrapper a",function(e){e.preventDefault(),m.switchTab(p(this).data("panel"))})},switchTab:function(e){var t=p("#everest-forms-panel-"+e),i=p(".evf-panel-"+e+"-button");p(".evf-nav-tab-wrapper").find("a").removeClass("nav-tab-active"),i.addClass("nav-tab-active"),t.closest(".evf-tab-content").find(".everest-forms-panel").removeClass("active"),t.addClass("active"),"integrations"!==e&&"payments"!==e||(t.find(".everest-forms-panel-sidebar a").hasClass("active")||t.find(".everest-forms-panel-sidebar a").first().addClass("active"),p(".everest-forms-panel-content").find(".evf-panel-content-section").hasClass("active")||p(".everest-forms-panel-content").find(".evf-panel-content-section").first().addClass("active")),history.replaceState({},null,m.updateQueryString("tab",e)),m.switchPanel(e)},updateQueryString:function(e,t,i){i=i||window.location.href;var o,s=new RegExp("([?&])"+e+"=.*?(&|#|$)(.*)","gi");return s.test(i)?null!=t?i.replace(s,"$1"+e+"="+t+"$2$3"):(i=(o=i.split("#"))[0].replace(s,"$1$3").replace(/(&|\?)$/,""),"undefined"!=typeof o[1]&&null!==o[1]&&(i+="#"+o[1]),i):(null!=t&&(s=-1!==i.indexOf("?")?"&":"?",i=(o=i.split("#"))[0]+s+e+"="+t,"undefined"!=typeof o[1]&&null!==o[1]&&(i+="#"+o[1])),i)},switchPanel:function(e){"field-options"===e&&m.switchToFieldOptionPanel()},switchToFieldOptionPanel:function(e){p(".everest-forms-field-options").find(".no-fields").hide(),p(".evf-admin-field-wrapper .everest-forms-field").removeClass("active"),p("#everest-forms-panel-fields").addClass("active"),p(".everest-forms-fields-tab").find("a").removeClass("active"),p(".everest-forms-fields-tab").find("a").last().addClass("active"),p(".everest-forms-add-fields").hide(),p(".everest-forms-field-options").show(),p(".everest-forms-field-options").find(".everest-forms-field-option").hide(),p(".evf-tab-lists").find("li a").removeClass("active"),p(".evf-tab-lists").find("li.evf-panel-field-options-button a").addClass("active"),p(document.body).trigger("evf-init-switch-field-options"),void 0!==e?(p("#everest-forms-field-option-"+e).show(),p("#everest-forms-field-"+e).addClass("active")):0<p(".evf-admin-field-wrapper .everest-forms-field").length?(p(".evf-admin-field-wrapper .everest-forms-field").eq(0).addClass("active"),p("#everest-forms-field-option-"+p(".evf-admin-field-wrapper .everest-forms-field").eq(0).attr("data-field-id")).show()):p(".everest-forms-field-options").find(".no-fields").show()},bindFields:function(){p(".evf-admin-field-wrapper").sortable({items:".evf-admin-row",axis:"y",cursor:"move",opacity:.65,scrollSensitivity:40,forcePlaceholderSize:!0,placeholder:"evf-sortable-placeholder",containment:".everest-forms-panel-content",start:function(e,t){t.item.css({backgroundColor:"#f7fafc",border:"1px dashed #5d96ee"})},stop:function(e,t){t.item.removeAttr("style")}}).disableSelection(),p(".evf-admin-grid").sortable({items:'> .everest-forms-field[data-field-type!="repeater-fields"]',delay:100,opacity:.65,cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,connectWith:".evf-admin-grid",appendTo:document.body,containment:".everest-forms-field-wrap",out:function(e){p(".evf-admin-grid").removeClass("evf-hover"),p(e.target).removeClass("evf-item-hover"),p(e.target).closest(".evf-admin-row").removeClass("evf-hover"),m.checkEmptyGrid()},over:function(e,t){p(".evf-admin-grid").addClass("evf-hover"),p(e.target).addClass("evf-item-hover"),p(e.target).closest(".evf-admin-row").addClass("evf-hover"),m.checkEmptyGrid()},receive:function(e,t){t.sender.is("button")&&m.fieldDrop(t.helper)},update:function(e,t){p(document).trigger("evf_sort_update_complete",{event:e,ui:t})},stop:function(e,t){t.item.removeAttr("style"),m.checkEmptyGrid()}}).disableSelection(),p(".evf-registered-buttons button.evf-registered-item").draggable({delay:200,cancel:!1,scroll:!1,revert:"invalid",scrollSensitivity:40,forcePlaceholderSize:!0,start:function(){p(this).addClass("field-dragged")},helper:function(){return p(this).clone().insertAfter(p(this).closest(".everest-forms-tab-content").siblings(".everest-forms-fields-tab"))},stop:function(){p(this).removeClass("field-dragged")},opacity:.75,containment:"#everest-forms-builder",connectToSortable:".evf-admin-grid"}).disableSelection(),p(".evf-registered-item.evf-repeater-field").draggable("option","connectToSortable",".evf-repeatable-grid"),p(".evf-admin-row").on("mouseenter mouseleave",function(e){e.buttons<1&&("mouseenter"===e.type?p(this).addClass("evf-hover"):p(".evf-admin-row").removeClass("evf-hover"))}),p(".everest-forms-panel-content").on("scroll",function(){p(".evf-admin-grid").sortable("refreshPositions"),p(".evf-admin-field-wrapper").sortable("refreshPositions")})},fieldTabChoice:function(e){p(".everest-forms-tab-content").scrollTop(0),p(".everest-forms-fields-tab a").removeClass("active"),p(".everest-forms-field, .everest-forms-title-desc").removeClass("active"),p("#"+e).addClass("active"),"add-fields"===e?(p(".everest-forms-add-fields").show(),p(".everest-forms-field-options").hide()):("field-options"===e?(e=p(".everest-forms-field").first().data("field-id"),p(".everest-forms-field-options").show(),p(".everest-forms-field").first().addClass("active")):p("#everest-forms-field-"+e).addClass("active"),p(".everest-forms-field-option").hide(),p("#everest-forms-field-option-"+e).show(),p(".everest-forms-add-fields").hide())},bindFormPreview:function(){},bindFormPreviewWithKeyEvent:function(){p("body").on("keydown",function(e){!e.ctrlKey&&!e.metaKey||"p"!==String.fromCharCode(e.which).toLowerCase()&&80!==e.which||(e.preventDefault(),window.open(c.preview_url))})},bindFormEntriesWithKeyEvent:function(){p("body").on("keydown",function(e){!e.ctrlKey&&!e.metaKey||"e"!==String.fromCharCode(e.which).toLowerCase()&&69!==e.which||(e.preventDefault(),window.open(c.entries_url))})},bindGridSwitcher:function(){p("body").on("click",".evf-show-grid",function(e){e.stopPropagation(),m.checkEmptyGrid(),p(this).closest(".evf-toggle-row").find(".evf-toggle-row-content").stop(!0).slideToggle(200)}),p(document).on("click",function(){m.checkEmptyGrid(),p(".evf-show-grid").closest(".evf-toggle-row").find(".evf-toggle-row-content").stop(!0).slideUp(200)});p("body").on("click",".evf-grid-selector",function(){var e=p(this).closest(".evf-admin-row");if(!p(this).hasClass("active")){var t=parseInt(p(this).attr("data-evf-grid"),10);if(!(4<t)){var i=p('<div class="evf-admin-grid evf-grid-'+t+' ui-sortable evf-empty-grid" />'),o=p("<div/>");p.each(e.find(".evf-admin-grid"),function(){p(this).children("*").each(function(){o.append(p(this).clone())})}),e.find(".evf-admin-grid").remove(),e.find(".evf-clear ").remove(),e.append('<div class="clear evf-clear"></div>');for(var s=1;s<=t;s++)i.attr("data-grid-id",s),e.append(i.clone());e.append('<div class="clear evf-clear"></div>'),e.find(".evf-admin-grid").eq(0).append(o.html()),e.find(".evf-grid-selector").removeClass("active"),p(this).addClass("active"),m.bindFields()}}})},fieldDrop:function(r){var e=r.attr("data-field-type");if(["payment-total"].includes(e)&&r.closest(".evf-admin-row").hasClass("evf-repeater-fields"))return p.confirm({title:!1,content:"This field cannot be added to Repeater Fields",type:"red",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{cancel:{text:c.i18n_close,btnClass:"btn-default"}}}),r.remove(),!1;r.css({left:"0",width:"100%"}).append('<i class="spinner is-active"></i>'),p.ajax({url:c.ajax_url,type:"POST",data:{action:"everest_forms_new_field_"+e,security:c.evf_field_drop_nonce,field_type:e,form_id:c.form_id},beforeSend:function(){p(document.body).trigger("init_field_options_toggle")},success:function(e){var t=e.data.preview,i=e.data.options,o=e.data.form_field_id,e=e.data.field.type,s=p(t).attr("id"),n=p(t).attr("data-field-id");p("#everest-forms-field-id").val(o),p(".everest-forms-field-options").find(".no-fields").hide(),p(".everest-forms-field-options").append(i),p(".everest-forms-field-option-row-icon_color input.colorpicker").wpColorPicker({change:function(e){var t=p(this),i=t.val(),t=t.closest(".everest-forms-field-option-row").data("field-id");p("#everest-forms-field-"+t+" .rating-icon svg").css("fill",i)}}),r.after(t),null!==p("#everest-forms-panel-field-settings-enable_survey")&&p("#everest-forms-panel-field-settings-enable_survey").prop("checked")&&p("#everest-forms-field-option-"+n+"-survey_status").prop("checked",!0),null!==p("#everest-forms-panel-field-settings-enable_quiz")&&p("#everest-forms-panel-field-settings-enable_quiz").prop("checked")&&(p("#everest-forms-field-option-"+n+"-quiz_status").prop("checked",!0),p("#everest-forms-field-option-"+n+"-quiz_status").closest(".everest-forms-field-option-row-quiz_status").siblings(".everst-forms-field-quiz-settings").removeClass("everest-forms-hidden").addClass("everest-forms-show")),r.remove(),p(document.body).trigger("init_tooltips"),p(document.body).trigger("init_field_options_toggle"),p(document.body).trigger("evf_after_field_append",[s]),m.conditionalLogicAppendField(s),m.conditionalLogicAppendFieldIntegration(s),m.paymentFieldAppendToQuantity(s),m.paymentFieldAppendToDropdown(n,e),m.init_datepickers(),p("#everest-forms-field-option-"+n+"-enable_min_max_time").hide(),p("label[for=everest-forms-field-option-"+n+"-enable_min_max_time]").hide(),p("label[for=everest-forms-field-option-"+n+"-select_min_time]").hide(),p("label[for=everest-forms-field-option-"+n+"-select_max_time]").hide(),p("#everest-forms-field-option-"+n+"-min_time_hour").parent().hide(),p("#everest-forms-field-option-"+n+"-max_time_hour").parent().hide(),p(document.body).trigger("evf_field_drop_complete",[e,n,t,i]),m.checkEmptyGrid()}})},conditionalLogicAppendField:function(s){var e=p("#"+s),n=e.index(),r=p(".evf-field-conditional-field-select"),a=e.attr("data-field-type"),d=e.attr("data-field-id"),l=e.find(".label-title .text ").text(),f=(p.fn.insertAt=function(e,t,i){var o=p.makeArray(this.children().clone(!0));o.splice(t,0,e),p.each(o,function(e,t){i===p(t)[0].value&&(p(t)[0].selected=!0,o[e]=t)}),this.empty().append(o)},d);r.each(function(o,e){var t=p(e).val(),i=s.replace("everest-forms-field-",""),e=p(e).attr("name");i===e.substring(e.indexOf("[")+1,e.indexOf("]"))?p(".evf-admin-row .evf-admin-grid .everest-forms-field").each(function(){var e=p(this).data("field-type"),t=p(this).data("field-id"),i=p(this).find(".label-title span").first().text();field_to_be_restricted=["html","title","address","image-upload","file-upload","date-time","hidden","scale-rating","likert","yes-no"],-1===p.inArray(e,field_to_be_restricted)&&f!==t&&0===r.eq(o).find('option[data-field_id="'+t+'"]').length&&r.eq(o).append('<option class="evf-conditional-fields" data-field_type="'+e+'" data-field_id="'+t+'" value="'+t+'">'+i+"</option>")}):(i='<option class="evf-conditional-fields" data-field_type="'+a+'" data-field_id="'+d+'" value="'+d+'">'+l+"</option>","html"!==a&&"title"!==a&&"address"!==a&&"image-upload"!==a&&"file-upload"!==a&&"date-time"!==a&&"hidden"!==a&&"likert"!==a&&"scale-rating"!==a&&"yes-no"!==a&&"divider"!==a&&r.eq(o).insertAt(i,n,t)),1<r.eq(o).find("option:not(.evf-conditional-fields)").length&&r.eq(o).find("option:not(.evf-conditional-fields):gt(0)").remove()})},conditionalLogicAppendRow:function(o){var s=p("#everest-forms-row-option-row_"+o);p(".everest-forms-field").each(function(){var e=p(this),t=e.attr("data-field-id"),i=e.attr("data-field-type"),e=(e.find(".required").remove(),'<option class="evf-conditional-fields" data-field_type="'+i+'" data-field_id="'+t+'" value="'+t+'">'+e.find(".label-title").html()+"</option>");0===p(document).find('.evf-admin-row[data-row-id="'+o+'"] #everest-forms-field-'+t).length&&0===s.find('.evf-field-conditional-field-select option[data-field_id="'+t+'"]').length&&"html"!==i&&"title"!==i&&"address"!==i&&"image-upload"!==i&&"file-upload"!==i&&"date-time"!==i&&"hidden"!==i&&"likert"!==i&&"scale-rating"!==i&&"divider"!==i&&s.find(".evf-field-conditional-field-select").append(e),1<s.find(".evf-field-conditional-field-select option:not(.evf-conditional-fields)").length&&s.find(".evf-field-conditional-field-select option:not(.evf-conditional-fields):gt(0)").remove()})},paymentFieldAppendToQuantity:function(e){var e=p("#"+e),t=p(".everest-forms-field-option-row-map_field select"),i=e.attr("data-field-type"),o=e.attr("data-field-id"),e=e.find(".label-title .text ").text();"payment-single"!==i&&"payment-multiple"!==i&&"payment-checkbox"!==i||t.append('<option value="'+o+'">'+e+"</option>")},paymentFieldAppendToDropdown:function(e,t){var i;"payment-quantity"!==t&&"payment-coupon"!==t||(i=p("#everest-forms-field-option-"+e+"-map_field"),["payment-checkbox","payment-multiple","payment-single","range-slider"].forEach(function(e){p(".everest-forms-field-"+e).each(function(){if("range-slider"===p(this).attr("data-field-type")){if("true"!==p(this).find(".evf-range-slider-preview").attr("data-enable-payment-slider"))return;var e='<option value="'+p(this).attr("data-field-id")+'">'+p(this).find(".label-title .text").text()+"</option>"}e='<option value="'+p(this).attr("data-field-id")+'">'+p(this).find(".label-title .text").text()+"</option>";i.append(e)})}))},conditionalLogicAppendFieldIntegration:function(i){var s=p("#"+i),n=s.index(),r=p(".evf-provider-conditional").find(".evf-conditional-field-select"),a=s.attr("data-field-type"),d=s.attr("data-field-id"),l=s.find(".label-title .text ").text();p.fn.insertAt=function(e,t){var i=p.makeArray(this.children().clone(!0));i.splice(t,0,e),this.empty().append(i)},r.each(function(o,e){var t=i.replace("everest-forms-field-",""),e=p(e).attr("name");t===e.substring(e.indexOf("[")+1,e.indexOf("]"))?p(".evf-admin-row .evf-admin-grid .everest-forms-field").each(function(){var e=p(this).data("field-type"),t=p(this).data("field-id"),i=p(this).find(".label-title span").first().text();field_to_be_restricted=[],field_to_be_restricted=["html","title","address","image-upload","file-upload","signature","divider","date-time","hidden","scale-rating","likert","yes-no",s.attr("data-field-type")],-1===p.inArray(e,field_to_be_restricted)&&r.eq(o).append('<option class="evf-conditional-fields" data-field_type="'+e+'" data-field_id="'+t+'" value="'+t+'">'+i+"</option>")}):(t='<option class="evf-conditional-fields" data-field_type="'+a+'" data-field_id="'+d+'" value="'+d+'">'+l+"</option>","html"!==a&&"title"!==a&&"address"!==a&&"image-upload"!==a&&"file-upload"!==a&&"date-time"!==a&&"hidden"!==a&&"likert"!==a&&"scale-rating"!==a&&"yes-no"!==a&&r.eq(o).insertAt(t,n))})},conditionalLogicRemoveField:function(e){p(".evf-field-conditional-field-select option[value = "+e+" ]").remove()},conditionalLogicRemoveFieldIntegration:function(e){p(".evf-provider-conditional .evf-conditional-field-select option[value = "+e+" ]").remove()},paymentFieldRemoveFromQuantity:function(e){p(".everest-forms-field-option-row-map_field select option[value = "+e+" ]").remove()},bindFieldSettings:function(){p("body").on("click",".everest-forms-preview .everest-forms-field, .everest-forms-preview .everest-forms-field .everest-forms-field-setting",function(e){e.preventDefault();e=p(this).closest(".everest-forms-field").attr("data-field-id");p(".everest-forms-tab-content").scrollTop(0),m.switchToFieldOptionPanel(e)})},toggleLabelEdit:function(e,t){p(e).toggleClass("everest-forms-hidden"),p(t).toggleClass("everest-forms-hidden"),p(t).is(":visible")&&p(t).focus()},bindToggleHandleActions:function(){p("body").on("click",".toggle-handle",function(e){var t=p(this).data("label"),i=p(this).data("input");p(i).is(":visible")||m.toggleLabelEdit(t,i)})},bindLabelEditInputActions:function(){p("body").on("focusout",".label-edit-input",function(e){var t=p(this).data("label");m.toggleLabelEdit(t,this)})},bindSyncedInputActions:function(){p("body").on("input",".sync-input",function(e){var t=p(this).val(),i=p(this).data("sync-targets");t&&i&&p(i).text(t)})}};m.init()}(jQuery,window.evf_data),jQuery(function(){"checked"!=jQuery("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email").attr("checked")&&jQuery("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email-wrap").nextAll().hide(),jQuery("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email").on("change",function(){"checked"!=jQuery(this).attr("checked")?jQuery("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email-wrap").nextAll().hide():jQuery("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email-wrap").nextAll().show()}),jQuery("#everest-forms-panel-field-settings-enable_redirect_query_string-wrap input").on("change",function(){jQuery(this).is(":checked")?jQuery("#everest-forms-panel-field-settings-query_string-wrap").show():jQuery("#everest-forms-panel-field-settings-query_string-wrap").hide()});var e=jQuery("#everest-forms-panel-field-settings-redirect_to option:selected").val();"same"==e?(jQuery("#everest-forms-panel-field-settings-custom_page-wrap").hide(),jQuery("#everest-forms-panel-field-settings-enable_redirect_query_string-wrap").hide(),jQuery("#everest-forms-panel-field-settings-query_string-wrap").hide(),jQuery("#everest-forms-panel-field-settings-external_url-wrap").hide()):"custom_page"==e?(jQuery("#everest-forms-panel-field-settings-custom_page-wrap").show(),jQuery("#everest-forms-panel-field-settings-external_url-wrap").hide()):"external_url"==e&&(jQuery("#everest-forms-panel-field-settings-external_url-wrap").show(),jQuery("#everest-forms-panel-field-settings-custom_page-wrap").hide(),jQuery("#everest-forms-panel-field-settings-enable_redirect_query_string-wrap").hide(),jQuery("#everest-forms-panel-field-settings-query_string-wrap").hide()),jQuery("#everest-forms-panel-field-settings-redirect_to").on("change",function(){"same"==this.value?(jQuery("#everest-forms-panel-field-settings-custom_page-wrap").hide(),jQuery("#everest-forms-panel-field-settings-external_url-wrap").hide(),jQuery("#everest-forms-panel-field-settings-enable_redirect_query_string-wrap").hide(),jQuery("#everest-forms-panel-field-settings-query_string-wrap").hide()):"custom_page"==this.value?(jQuery("#everest-forms-panel-field-settings-custom_page-wrap").show(),jQuery("#everest-forms-panel-field-settings-enable_redirect_query_string-wrap").show(),jQuery("#everest-forms-panel-field-settings-external_url-wrap").hide(),jQuery("#everest-forms-panel-field-settings-enable_redirect_query_string").is(":checked")?jQuery("#everest-forms-panel-field-settings-query_string-wrap").show():jQuery("#everest-forms-panel-field-settings-query_string-wrap").hide()):"external_url"==this.value&&(jQuery("#everest-forms-panel-field-settings-custom_page-wrap").hide(),jQuery("#everest-forms-panel-field-settings-enable_redirect_query_string-wrap").hide(),jQuery("#everest-forms-panel-field-settings-query_string-wrap").hide(),jQuery("#everest-forms-panel-field-settings-external_url-wrap").show())}),jQuery(".evf-panel-field-options-button.evf-disabled-tab").hide(),jQuery(".everest-forms-conditional-field-settings-redirect_to").each(function(){var e=this.value;"custom_page"==e?(jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-custom_page").show(),jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-external_url").hide()):"external_url"==e?(jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-custom_page").hide(),jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-external_url").show()):(jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-custom_page").hide(),jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-external_url").hide())}),jQuery(document).on("change",".everest-forms-conditional-field-settings-redirect_to",function(){"custom_page"==this.value?(jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-custom_page").show(),jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-external_url").hide()):"external_url"==this.value?(jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-custom_page").hide(),jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-external_url").show()):(jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-custom_page").hide(),jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-external_url").hide())})}),jQuery(function(c){c(document.body).on("init_add_fields_toogle",function(){c(".everest-forms-add-fields").on("click",".everest-forms-add-fields-group > a",function(e){e.preventDefault(),c(this).parent(".everest-forms-add-fields-group").toggleClass("closed").toggleClass("open")}),c(".everest-forms-add-fields").on("click",".everest-forms-add-fields-group a",function(){c(this).next(".evf-registered-buttons").stop().slideToggle()}),c(".everest-forms-add-fields-group.closed").each(function(){c(this).find(".evf-registered-buttons").hide()})}).trigger("init_add_fields_toogle"),c(document.body).on("click",".everest-forms-field-option .everest-forms-field-option-group > a",function(e){e.preventDefault(),c(this).parent(".everest-forms-field-option-group").toggleClass("closed").toggleClass("open")}),c(document.body).on("click",".everest-forms-field-option .everest-forms-field-option-group a",function(e){c(e.target).filter(":input, option, .sort").length||c(this).next(".everest-forms-field-option-group-inner").stop().slideToggle()}),c(document.body).on("init_field_options_toggle",function(){c(".everest-forms-field-option-group.closed").each(function(){c(this).find(".everest-forms-field-option-group-inner").hide()})}).trigger("init_field_options_toggle"),c(document).on("click",function(){c(".evf-smart-tag-lists").hide()}),c(".evf-smart-tag-lists").hide(),c(document.body).on("click",".evf-toggle-smart-tag-display",function(e){e.stopPropagation(),c(".evf-smart-tag-lists").hide(),c(".evf-smart-tag-lists ul").empty(),c(this).parent().find(".evf-smart-tag-lists").toggle("show");var t,e=c(this).data("type"),i=c(this).data("fields"),o=c(this),s=[],n=[],r=[],a=[];if(c(".evf-admin-row .evf-admin-grid .everest-forms-field").each(function(){var e,t=c(this).data("field-type"),i=c(this).data("field-id");"email"===t?(e=c(this).find(".label-title span").first().text(),r[i]=e):"phone"===t?(e=c(this).find(".label-title span").first().text(),a[i]=e):(t=c(this).find(".label-title span").first().text(),s[i]=t),n[i]=c(this).find(".label-title span").first().text()}),"other"===e||"all"===e){var d=evf_data.smart_tags_other;for(l in d)c(o).parent().find(".evf-smart-tag-lists .evf-others").append('<li class = "smart-tag-field" data-type="other" data-field_id="'+l+'">'+d[l]+"</li>")}if("fields"===e||"all"===e)if("email"===i)for(var l in Object.keys(r).length<1?c(o).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').addClass("everest-forms-hidden"):c(o).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').removeClass("everest-forms-hidden"),c(o).parent().find(".evf-smart-tag-lists .other-tag-title").remove(),c(o).parent().find(".evf-smart-tag-lists .evf-others").remove(),c(o).parent().find(".evf-smart-tag-lists").append('<div class="smart-tag-title other-tag-title">Others</div><ul class="evf-others"></ul>'),c(o).parent().find(".evf-smart-tag-lists .evf-others").append('<li class="smart-tag-field" data-type="other" data-field_id="admin_email">Site Admin Email</li><li class="smart-tag-field" data-type="other" data-field_id="user_email">User Email</li>'),r)c(o).parent().find(".evf-smart-tag-lists .evf-fields").append('<li class = "smart-tag-field" data-type="field" data-field_id="'+l+'">'+r[l]+"</li>");else if("phone"===i)for(var l in Object.keys(a).length<1?c(o).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').addClass("everest-forms-hidden"):c(o).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').removeClass("everest-forms-hidden"),c(o).parent().find(".evf-smart-tag-lists .other-tag-title").remove(),c(o).parent().find(".evf-smart-tag-lists .evf-others").remove(),a)c(o).parent().find(".evf-smart-tag-lists .evf-fields").append('<li class = "smart-tag-field" data-type="field" data-field_id="'+l+'">'+a[l]+"</li>");else for(var f in Object.keys(n).length<1?c(o).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').addClass("everest-forms-hidden"):c(o).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').removeClass("everest-forms-hidden"),n)c(o).parent().find(".evf-smart-tag-lists .evf-fields").append('<li class = "smart-tag-field" data-type="field" data-field_id="'+f+'">'+n[f]+"</li>");"calculations"===e&&(t=["number","payment-single","range-slider","payment-checkbox","payment-multiple"],c(document).find(".everest-forms-field").each(function(){t.includes(c(this).attr("data-field-type"))&&c(o).parents(".everest-forms-field-option-row-calculation_field").attr("data-field-id")!==c(this).attr("data-field-id")&&c(o).parent().find(".evf-smart-tag-lists .calculations").append('<li class = "smart-tag-field" data-type="field" data-field_id="'+c(this).attr("data-field-id")+'">'+c(this).find(".label-title .text").text()+"</li>")}))}),c(document.body).on("click",".smart-tag-field",function(e){var t=c(this).data("field_id"),i=c(this).text(),o=c(this).data("type"),s=c(this).parent().parent().parent(),n=s.find("input[type=text]"),s=s.find("textarea");if("fullname"!==t&&"email"!==t&&"subject"!==t&&"message"!==t&&"other"!==o){for(var i=i.split(/[\s-_]/),r=0;r<i.length;r++)i[r]=0===r?i[r].charAt(0).toLowerCase()+i[r].substr(1):i[r].charAt(0).toUpperCase()+i[r].substr(1);t=(i=i.join(""))+"_"+t}"field"===o?(n.val(n.val()+'{field_id="'+t+'"}'),s.val(s.val()+'{field_id="'+t+'"}'),s.trigger("change")):"other"===o&&(n.val(n.val()+"{"+t+"}"),s.val(s.val()+"{"+t+"}"))}),c(document).on("change",".wp-list-table .everest-forms-toggle-form input",function(e){e.stopPropagation(),c.post(evf_data.ajax_url,{action:"everest_forms_enabled_form",security:evf_data.evf_enabled_form,form_id:c(this).data("form_id"),enabled:c(this).prop("checked")?1:0})}),c(document).on("change",".evf-content-email-settings .evf-toggle-switch input",function(e){var t=c(this),i=t.prop("checked");!1===i?(t.val(""),t.closest(".evf-content-email-settings").find(".email-disable-message").remove(),t.closest(".evf-content-section-title").siblings(".evf-content-email-settings-inner").addClass("everest-forms-hidden"),c('<p class="email-disable-message everest-forms-notice everest-forms-notice-info">'+evf_data.i18n_email_disable_message+"</p>").insertAfter(t.closest(".evf-content-section-title"))):!0===i&&(t.val("1"),t.closest(".evf-content-section-title").siblings(".evf-content-email-settings-inner").removeClass("everest-forms-hidden"),t.closest(".evf-content-email-settings").find(".email-disable-message").remove())}),c(document).on("click",".everest-forms-min-max-date-format input",function(){var e=c(this).closest(".everest-forms-date").find(".everest-forms-min-date").val(),t=c(this).closest(".everest-forms-date").find(".everest-forms-min-date").val();c(this).is(":checked")?(c(".everest-forms-min-max-date-option").removeClass("everest-forms-hidden"),""===e&&c(".everest-forms-min-date").addClass("flatpickr-field").flatpickr({disableMobile:!0,onChange:function(e,t,i){c(".everest-forms-min-date").val(t)},onOpen:function(e,t,i){i.set("maxDate",c(".everest-forms-max-date").val())}}),""===t&&c(".everest-forms-max-date").addClass("flatpickr-field").flatpickr({disableMobile:!0,onChange:function(e,t,i){c(".everest-forms-max-date").val(t)},onOpen:function(e,t,i){i.set("minDate",c(".everest-forms-min-date").val())}})):c(".everest-forms-min-max-date-option").addClass("everest-forms-hidden")})});