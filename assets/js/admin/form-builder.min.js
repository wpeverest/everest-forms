!function(v,c){var a,m={init:function(){v(document).ready(function(i){i("evf-panel-integrations-button a").hasClass("active")||(i("#everest-forms-panel-integrations").find(".everest-forms-panel-sidebar a").first().addClass("active"),i("#everest-forms-panel-integrations").find(".everest-forms-panel-sidebar a").hasClass("active")&&i("#everest-forms-panel-integrations").find(".everest-forms-panel-sidebar a").next(".everest-forms-active-connections").first().addClass("active"),i(".everest-forms-panel-content").find(".evf-panel-content-section").first().addClass("active")),i(document).on("input",'.everest-forms-field-option-row-choices input[name$="[label]"]',function(e){var t=i(this).val();i(this).val(t.replace(/<\s*script/gi,"").replace(/\s+on\w+\s*=/gi," "))})}),v(document).ready(function(s){"1"===s(".everest-forms-min-max-date-format input").val()&&(s(".everest-forms-min-date").addClass("flatpickr-field").flatpickr({disableMobile:!0,onChange:function(e,t,i){s(".everest-forms-min-date").val(t)},onOpen:function(e,t,i){i.set("maxDate",s(".everest-forms-max-date").val())}}),s(".everest-forms-max-date").addClass("flatpickr-field").flatpickr({disableMobile:!0,onChange:function(e,t,i){s(".everest-forms-max-date").val(t)},onOpen:function(e,t,i){i.set("minDate",s(".everest-forms-min-date").val())}})),s(".everest-forms-min-max-date-format").each(function(){s(this).find('input[type="checkbox"]').is(":checked")?(s(this).next(".everest-forms-min-max-date-range-format").removeClass("everest-forms-hidden"),s(this).next().next(".everest-forms-min-max-date-option").removeClass("everest-forms-hidden"),s(this).next(".everest-forms-min-max-date-range-format").find('input[type="checkbox"]').is(":checked")&&(s(this).next().next().next(".everest-forms-min-max-date-range-option").removeClass("everest-forms-hidden"),s(this).next().next(".everest-forms-min-max-date-option").addClass("everest-forms-hidden"))):(s(this).next().next().next(".everest-forms-min-max-date-range-option").addClass("everest-forms-hidden"),s(this).next(".everest-forms-min-max-date-range-format").addClass("everest-forms-hidden"),s(this).next().next(".everest-forms-min-max-date-option").addClass("everest-forms-hidden"))}),s(".everest-forms-row-option select.evf-field-show-hide").each(function(){s(this).find('[selected="selected"]').prop("selected",!0)})}),v("evf-panel-payments-button a").hasClass("active")||(v("#everest-forms-panel-payments").find(".everest-forms-panel-sidebar a").first().addClass("active"),v(".everest-forms-panel-content").find(".evf-payment-setting-content").first().addClass("active")),v(document.body).find("#copy-shortcode").on("click",this.copyShortcode).on("aftercopy",this.copySuccess).on("aftercopyfailure",this.copyFail),v(document.body).find(".evf-copy-shortcode").each(function(){v(this).on("click",m.copyShortcode).on("aftercopy",m.copySuccess).on("aftercopyfailure",m.copyFail)}),v(document).ready(m.ready),v(window).on("load",m.load),v(document.body).on("evf-init-builder-fields",function(){m.bindFields()}).trigger("evf-init-builder-fields"),v(document.body).on("adjust_builder_width",function(){var e=v("#adminmenuwrap").width();v("#everest-forms-builder-form").css({width:"calc(100% - "+e+"px)"})}).trigger("adjust_builder_width"),v(document.body).on("click","#collapse-button",function(){v("#everest-forms-builder-form").width(""),v(document.body).trigger("adjust_builder_width")}),v(window).on("resize orientationchange",function(){clearTimeout(void 0),setTimeout(function(){v("#everest-forms-builder").width(""),v(document.body).trigger("adjust_builder_width")},250)}).trigger("resize")},copyShortcode:function(e){evfClearClipboard(),evfSetClipboard(v(this).closest(".evf-shortcode-field").find("input").val(),v(this)),e.preventDefault()},copySuccess:function(){v(this).tooltipster("content",v(this).attr("data-copied")).trigger("mouseenter").on("mouseleave",function(){var e=v(this);setTimeout(function(){e.tooltipster("content",e.attr("data-tip"))},1e3)})},copyFail:function(){v(this).closest(".evf-shortcode-field").find("input").focus().select()},load:function(){v(".everest-forms-overlay").fadeOut()},ready:function(){var e,t;a=v("#everest-forms-builder"),m.bindUIActions(),m.bindEditActions(),jconfirm.defaults={closeIcon:!0,backgroundDismiss:!0,escapeKey:!0,animationBounce:1,useBootstrap:!1,theme:"modern",boxWidth:"400px",columnClass:"evf-responsive-class"},"undefined"!=typeof PerfectScrollbar&&(e=v(".everest-forms-tab-content"),t=v(".everest-forms-panel"),1<=e.length&&(window.evf_tab_scroller=new PerfectScrollbar(".everest-forms-tab-content",{suppressScrollX:!0})),t.each(function(){var e=v(this),t=e.attr("id");1<=e.find(".everest-forms-panel-sidebar").length&&(window.evf_setting_scroller=new PerfectScrollbar("#"+t+" .everest-forms-panel-sidebar"))})),a.on("change",".everest-forms-field-option-row-limit_enabled input",function(e){m.updateTextFieldsLimitControls(v(e.target).parents(".everest-forms-field-option-row-limit_enabled").data().fieldId,e.target.checked)}),a.on("change",".everest-forms-field-option-row-min_length_enabled input",function(e){m.updateTextFieldsMinLengthControls(v(e.target).parents(".everest-forms-field-option-row-min_length_enabled").data().fieldId,e.target.checked)}),a.on("change",".everest-forms-field-option-select .everest-forms-field-option-row-enhanced_select input",function(e){m.enhancedSelectFieldStyle(v(e.target).parents(".everest-forms-field-option-row-enhanced_select").data().fieldId,e.target.checked)}),a.on("click",".everest-forms-field-option-row-choices .everest-forms-btn-group span",function(e){var t;v(this).hasClass("upgrade-modal")&&"checkbox"===v(this).data("type")?(v(this).parent().find("span").addClass("is-active"),v(this).removeClass("is-active"),m.updateEnhandedSelectField(v(e.target).parents(".everest-forms-field-option-row-choices").data().fieldId,!1)):(v(this).parent().find("span").removeClass("is-active"),v(this).addClass("is-active"),m.updateEnhandedSelectField(v(e.target).parents(".everest-forms-field-option-row-choices").data().fieldId,"multiple"===v(this).data("selection"))),"multiple"===v(this).data("selection")&&"checkbox"===v(this).data("type")&&v(this).hasClass("is-active")?(t=v(this).parent().parent().data("field-id"),v("#everest-forms-field-option-row-"+t+"-select_all").show()):(t=v(this).parent().parent().data("field-id"),v("#everest-forms-field-option-row-"+t+"-select_all").hide())}),v(document.body).on("click",'.everest-forms-field, .everest-forms-field-select[data-field-type="select"]',function(){a.find(".everest-forms-field-option-row-choices .everest-forms-btn-group span").each(function(){var e=v(this).parent().parent().data("field-id");"multiple"===v(this).data("selection")&&"checkbox"===v(this).data("type")&&v(this).hasClass("is-active")?v("#everest-forms-field-option-"+e+"-select_all").parent().parent().parent().show():v("#everest-forms-field-option-"+e+"-select_all").parent().parent().parent().hide()})}),a.on("keyup",".everest-forms-search-fields",function(){var t=v(this).val().toLowerCase();v(".evf-registered-item").each(function(){var e=v(this);field_type=e.data("field-type"),field_label=e.text().toLowerCase(),-1<field_type.search(t)||-1<field_label.search(t)?(e.addClass("evf-searched-item"),e.show()):(e.removeClass("evf-searched-item"),e.hide())}),v(".everest-forms-add-fields-group").each(function(){v(this).find(".evf-registered-item.evf-searched-item").length<=0?v(this).hide():v(this).show()}),v(".evf-registered-item.evf-searched-item").length?v(".everest-forms-fields-not-found").addClass("hidden"):v(".everest-forms-fields-not-found").removeClass("hidden")}),a.on("click","#evf-collapse",function(e){e.preventDefault();e=v(this);e.hasClass("open")?(e.removeClass("open").addClass("close"),e.closest(".everest-forms-panel-sidebar-content").removeClass("collapsed")):(e.removeClass("close").addClass("open"),e.closest(".everest-forms-panel-sidebar-content").addClass("collapsed"))}),v(document).trigger("everest_forms_ready")},updateTextFieldsLimitControls:function(e,t){t?v("#everest-forms-field-option-row-"+e+"-limit_controls").removeClass("everest-forms-hidden"):v("#everest-forms-field-option-row-"+e+"-limit_controls").addClass("everest-forms-hidden")},updateTextFieldsMinLengthControls:function(e,t){t?v("#everest-forms-field-option-row-"+e+"-min_length_controls").removeClass("everest-forms-hidden"):v("#everest-forms-field-option-row-"+e+"-min_length_controls").addClass("everest-forms-hidden")},enhancedSelectFieldStyle:function(e,t){var i=v("#everest-forms-field-"+e+" .primary-input"),e=v("#everest-forms-field-option-"+e+"-enhanced_select").is(":checked");t&&e&&i.prop("multiple")?(i.addClass("evf-enhanced-select"),v(document.body).trigger("evf-enhanced-select-init")):(i.removeClass("evf-enhanced-select enhanced"),i.filter(".select2-hidden-accessible").selectWoo("destroy"))},updateEnhandedSelectField:function(e,t){var i=v("#everest-forms-field-"+e+" .primary-input"),s=i.find(".placeholder"),n=v("#everest-forms-field-option-"+e+"-multiple_choices"),o=v("#everest-forms-field-option-row-"+e+"-choices input.default"),r=o.filter(":checked");n.val(t?1:0),i.prop("multiple",t),o.prop("type",t?"checkbox":"radio"),!t&&r.length&&(o.prop("checked",!1),v(r.get(0)).prop("checked",!0)),s.length&&t&&s.prop("selected",!t),m.enhancedSelectFieldStyle(e,t)},bindUIActions:function(){m.bindDefaultTabs(),m.checkEmptyGrid(),m.bindFields(),m.bindFormPreview(),m.bindFormPreviewWithKeyEvent(),m.bindFormEntriesWithKeyEvent(),m.bindGridSwitcher(),m.bindFieldSettings(),m.bindFieldDelete(),m.bindFieldDeleteWithKeyEvent(),m.bindCloneField(),m.bindSaveOption(),m.bindSaveOptionWithKeyEvent(),m.bindOpenShortcutKeysModalWithKeyEvent(),m.bindAddNewRow(),m.bindRemoveRow(),m.bindFormSettings(),m.bindFormEmail(),m.bindFormSmsNotifications(),m.bindFormConversational(),m.bindFormIntegrations(),m.bindFormPayment(),m.choicesInit(),m.bindToggleHandleActions(),m.bindLabelEditInputActions(),m.bindSyncedInputActions(),m.init_datepickers(),m.bindBulkOptionActions(),m.bindUIActionsFields(),"field-options"===c.tab&&v(".evf-panel-field-options-button").trigger("click"),v(document.body).on("everest-forms-field-drop",".evf-registered-buttons .evf-registered-item",function(){m.fieldDrop(v(this).clone())})},bindBulkOptionActions:function(){v(document.body).on("click",".evf-toggle-bulk-options",function(e){v(this).closest(".everest-forms-field-option").find(".everest-forms-field-option-row-add_bulk_options").slideToggle()}),v(document.body).on("click",".evf-toggle-presets-list",function(e){v(this).closest(".everest-forms-field-option").find(".everest-forms-field-option-row .evf-options-presets").slideToggle()}),v(document.body).on("click",".evf-add-bulk-options",function(e){var t,i=v(this).closest(".everest-forms-field-option-row"),s=i.data("field-id");i.length&&(t=i.closest(".everest-forms-field-option").find(".everest-forms-field-option-row-choices .evf-choices-list"),i=(s=i.find("textarea#everest-forms-field-option-"+s+"-add_bulk_options")).val().replace(/<\s*script/gi,"").replace(/\s+on\w+\s*=/gi," ").split("\n"),m.addBulkOptions(i,t),s.val(""))}),v(document.body).on("click",".evf-options-preset-label",function(e){var t,i=v(this).closest(".everest-forms-field-option-row"),s=i.data("field-id");i.length&&(t=v(this).closest(".evf-options-preset").find(".evf-options-preset-value").val(),i.find("textarea#everest-forms-field-option-"+s+"-add_bulk_options").val(t),v(this).closest(".evf-options-presets").slideUp())}),v(document.body).on("click",".everest-forms-field-option-row-password_strength",function(){v(this).find('[type="checkbox"]:first').prop("checked")&&v(this).next().find('[type="checkbox"]:first').prop("checked",!1)}),v(document.body).on("click",".everest-forms-field-option-row-password_validation",function(){v(this).find('[type="checkbox"]:first').prop("checked")&&(v(this).prev().find('[type="checkbox"]:first').prop("checked",!1),v(this).prev().find(".everest-forms-inner-options").addClass("everest-forms-hidden"))})},addBulkOptions:function(e,i){e.forEach(function(e){var t;""!==e&&(t=i.find("li").last().find("a.add"),m.choiceAdd(null,t,e.trim()))})},init_datepickers:function(){var e=v(".everest-forms-disable-dates").data("date-format");v(".everest-forms-disable-dates").each(function(){v(this).get(0)._flatpickr||v(this).flatpickr({dateFormat:e,mode:"multiple"})}),v(document.body).on("change",".evf-date-format",function(e){var t=v(".everest-forms-field-option:visible .everest-forms-disable-dates"),i=t.get(0)._flatpickr,s=i.selectedDates,n=v(this).val(),o=[];s.forEach(function(e){o.push(flatpickr.formatDate(e,n))}),i.set("dateFormat",n),t.val(o.join(", "))}),v(document.body).on("click",".evf-clear-disabled-dates",function(){v(".everest-forms-field-option:visible .everest-forms-disable-dates").get(0)._flatpickr.clear()}),v(".everest-forms-field-date-time").each(function(){var e=v(this).attr("data-field-id");m.dateSettingToggler(e,v("#everest-forms-field-option-"+e+"-datetime_style").val())}),v(".everest-forms-slot-booking input").is(":checked")&&(disable_past_date=v(document).find(".everest-forms-past-date-disable-format input"),required=v(document).find(".everest-forms-field-option-row-required input"),disable_past_date.attr("checked",!0),required.prop("checked",!0),disable_past_date.parent().parent().parent().hide())},bindEditActions:function(){v("#edit-form-name").on("click",function(e){e.stopPropagation(),""!==v("#evf-edit-form-name").val().trim()&&m.toggleEditTitle(e)}),v("#evf-edit-form-name").on("change keypress",function(e){var t=v(this);e.stopPropagation(),13===e.which&&""!==v(this).val().trim()&&m.toggleEditTitle(e),""!==t.val().trim()&&v("#everest-forms-panel-field-settings-form_title").val(t.val().trim())}).on("click",function(e){e.stopPropagation()}),v(document).not(v(".everest-forms-title-desc")).on("click",function(e){var t=v("#evf-edit-form-name");e.stopPropagation(),!t.prop("disabled")&&t.val()&&""!==t.val().trim()&&m.toggleEditTitle(e)})},toggleEditTitle:function(e){var t=v("#edit-form-name").siblings("#evf-edit-form-name");e.preventDefault(),t.prop("disabled",function(e,t){return!t}),t.hasClass("everst-forms-name-editing")||t.focus(),t.toggleClass("everst-forms-name-editing")},formObject:function(e){for(var t=jQuery(e).find("[name]"),i={},s={},n=0;n<t.length;n++){var o=jQuery(t[n]),r=o.prop("name").replace(/\]/gi,"").split("["),a=o.val(),d={};if(!o.is(":radio")&&!o.is(":checkbox")||o.is(":checked")){for(var l=r.length-1;0<=l;l--){var f=r[l];if(0===(f=void 0===f?"":f).length&&(d=[],"undefined"==typeof s[r[l-1]]?s[r[l-1]]=0:s[r[l-1]]+=1,f=s[r[l-1]]),l===r.length-1){if(a)if("true"===a)a=!0;else if("false"===a)a=!1;else if(isNaN(parseFloat(a))||parseFloat(a).toString()!==a)if("string"!=typeof a||"{"!==a.substr(0,1)&&"["!==a.substr(0,1)){if("object"==typeof a&&a.length&&o.is("select")){for(var c={},l=0;l<a.length;l++)c["n"+l]=a[l];a=c}}else try{a=JSON.parse(a)}catch(p){}else a=parseFloat(a);d[f]=a}else{var m=d;(d={})[f]=m}}v.extend(!0,i,d)}}return i},bindUIActionsFields:function(){a.on("click",".everest-forms-field-option-row-choices .add",function(e){m.choiceAdd(e,v(this))}),a.on("click",".everest-forms-field-option-row-choices .remove",function(e){m.choiceDelete(e,v(this))}),a.on("mousedown",".everest-forms-field-option-row-choices input[type=radio]",function(){var e=v(this);e.is(":checked")?e.attr("data-checked","1"):e.attr("data-checked","0")}),a.on("click",".everest-forms-field-option-row-choices input[type=radio]",function(){var e=v(this),t=e.parent().parent();e.parent().parent().find("input[type=radio]").not(this).prop("checked",!1),"1"===e.attr("data-checked")&&(e.prop("checked",!1),e.attr("data-checked","0")),m.choiceUpdate(t.data("field-type"),t.data("field-id"))}),a.on("change",".everest-forms-field-option-row-choices input[type=checkbox]",function(e){var t=v(this).parent().parent();m.choiceUpdate(t.data("field-type"),t.data("field-id"))}),a.on("keyup paste focusout",".everest-forms-field-option-row-choices input.label, .everest-forms-field-option-row-choices input.value",function(e){var t=v(this).parent().parent().parent();m.choiceUpdate(t.data("field-type"),t.data("field-id"))}),a.on("change",".everest-forms-field-option-row-show_values input",function(e){v(this).closest(".everest-forms-field-option").find(".everest-forms-field-option-row-choices ul").toggleClass("show-values")}),a.on("change",".everest-forms-field-option-row-choices_images input",function(){var e=v(this),t=e.parent().parent().parent().data("field-id"),i=v("#everest-forms-field-option-"+t),s=v("#everest-forms-field-option-"+t+"-input_columns"),n=v("#everest-forms-field-option-"+t).find(".everest-forms-field-option-hidden-type").val();e.parent().find(".notice").toggleClass("hidden"),i.find(".everest-forms-field-option-row-choices ul").toggleClass("show-images"),(e.is(":checked")?s.val("inline"):s.val("")).trigger("change"),m.choiceUpdate(n,t)}),a.on("click",".everest-forms-attachment-media-view .upload-button",function(e){var t,i,s=v(this);e.preventDefault(),(i=wp.media.frames.everestforms_media_frame=wp.media({title:c.i18n_upload_image_title,className:"media-frame everest-forms-media-frame",frame:"select",multiple:!1,library:{type:"image"},button:{text:c.i18n_upload_image_button}})).on("select",function(){var e=i.state().get("selection").first().toJSON();(t=(s.hasClass("button-add-media")?(s.hide(),s):s.parent().parent()).parent()).find(".source").val(e.url),t.find(".attachment-thumb").remove(),t.find(".thumbnail-image").prepend('<img class="attachment-thumb" src="'+e.url+'">'),t.find(".actions").show(),a.trigger("everestFormsImageUploadAdd",[s,t])}),i.open()}),a.on("click",".everest-forms-attachment-media-view .remove-button",function(e){e.preventDefault();e=v(this).parent().parent();e.find(".attachment-thumb").remove(),e.parent().find(".source").val(""),e.parent().find(".button-add-media").show(),a.trigger("everestFormsImageUploadRemove",[v(this),e])}),a.on("everestFormsImageUploadAdd everestFormsImageUploadRemove",function(e,t,i){var i=i.closest(".evf-choices-list"),s=i.data("field-type"),i=i.data("field-id");m.choiceUpdate(s,i)}),a.on("change",".everest-forms-field-option-row-input_columns select",function(){var e=v(this),t=e.val(),e=e.parent().data("field-id"),i="";"inline"===t?i="everest-forms-list-inline":""!==t&&(i="everest-forms-list-"+t+"-columns"),v("#everest-forms-field-"+e).removeClass("everest-forms-list-inline everest-forms-list-2-columns everest-forms-list-3-columns").addClass(i)}),a.on("click",".everest-forms-fields-tab a",function(e){e.preventDefault(),m.fieldTabChoice(v(this).attr("id"))}),v(document).on("mouseenter",'.everest-forms-tabs li[class*="part_"]',function(){!1===v(this).hasClass("active")&&(v(document).find(".everest-forms-field").hasClass("ui-sortable-helper")||v(document).find(".evf-registered-buttons button.evf-registered-item").hasClass("field-dragged"))&&v(this).find("a").trigger("click")}),a.on("change",".everest-forms-field-option-address input.hide",function(){var e=v(this),t=e.parent().parent().data("field-id"),e=e.parent().parent().data("subfield");v("#everest-forms-field-"+t).find(".everest-forms-"+e).toggleClass("hidden")}),a.on("input",".everest-forms-field-option-row-label input",function(){var e=v(this),t=e.val().replace(/<\s*script/gi,"").replace(/\s+on\w+\s*=/gi," "),e=e.parent().data("field-id"),e=v("#everest-forms-field-"+e).find(".label-title .text");e.hasClass("nl2br")?e.html(t.replace(/\n/g,"<br>")):e.html(t)}),a.on("change",".everest-forms-field-option-row-enable_prepopulate input",function(e){var t=v(this).parent().parent().parent().data("field-id");v("#everest-forms-field-"+t).toggleClass("parameter_name"),v(e.target).is(":checked")?v("#everest-forms-field-option-row-"+t+"-parameter_name").show():v("#everest-forms-field-option-row-"+t+"-parameter_name").hide()}),a.on("change",".everest-forms-field-option-row-enable_regex_validation input",function(e){var t=v(this).parent().parent().parent().data("field-id");v("#everest-forms-field-"+t).toggleClass("regex_value"),v(e.target).is(":checked")?(v("#everest-forms-field-option-row-"+t+"-regex_value").show(),v("#everest-forms-field-option-row-"+t+"-regex_message").show()):(v("#everest-forms-field-option-row-"+t+"-regex_value").hide(),v("#everest-forms-field-option-row-"+t+"-regex_message").hide())}),a.on("input",".everest-forms-field-option-row-description textarea",function(){var e=v(this),t=e.parent().data("field-id"),t=v("#everest-forms-field-"+t).find(".description"),e=(e=e.val()).replace(/<\s*script/gi,"").replace(/\s+on\w+\s*=/gi," ");t.hasClass("nl2br")?t.html(e.replace(/\n/g,"<br>")):t.html(e)}),a.on("change",".everest-forms-field-option-row-required input",function(e){var t=v(this).parent().parent().parent().data("field-id");v("#everest-forms-field-"+t).toggleClass("required"),v(e.target).is(":checked")?(v("#everest-forms-field-option-row-"+t+"-required_field_message_setting").show(),v("#everest-forms-field-option-"+t+"-required_field_message_setting-individual").is(":checked")&&v("#everest-forms-field-option-row-"+t+"-required-field-message").show()):(v("#everest-forms-field-option-row-"+t+"-required_field_message_setting").hide(),v("#everest-forms-field-option-row-"+t+"-required-field-message").hide(),(slot_booking=v(document).find(".everest-forms-slot-booking input")).prop("checked",!1),v(document).find(".everest-forms-past-date-disable-format input").parent().parent().parent().show())}),a.on("change",".everest-forms-field-option-row-required_field_message_setting input",function(e){var t=v(this).parent().parent().parent().parent().data("field-id");v("#everest-forms-field-"+t).toggleClass("required_field_message_setting"),"individual"===v(this).val()?v("#everest-forms-field-option-row-"+t+"-required-field-message").show():v("#everest-forms-field-option-row-"+t+"-required-field-message").hide()}),a.on("change",".everest-forms-field-option-row-confirmation input",function(e){var t=v(this).parent().parent().parent().data("field-id");v(e.target).is(":checked")?(v("#everest-forms-field-"+t).find(".everest-forms-confirm").removeClass("everest-forms-confirm-disabled").addClass("everest-forms-confirm-enabled"),v("#everest-forms-field-option-"+t).removeClass("everest-forms-confirm-disabled").addClass("everest-forms-confirm-enabled")):(v("#everest-forms-field-"+t).find(".everest-forms-confirm").removeClass("everest-forms-confirm-enabled").addClass("everest-forms-confirm-disabled"),v("#everest-forms-field-option-"+t).removeClass("everest-forms-confirm-enabled").addClass("everest-forms-confirm-disabled"))}),a.on("change",".everest-forms-slot-booking input",function(e){v(this).is(":checked")?(disable_past_date=v(document).find(".everest-forms-past-date-disable-format input"),(required=v(document).find(".everest-forms-field-option-row-required input")).is(":not(:checked)")&&required.prop("checked",!0),disable_past_date.is(":not(:checked)")&&disable_past_date.prop("checked",!0),disable_past_date.parent().parent().parent().hide()):disable_past_date.parent().parent().parent().show()}),a.on("input",".everest-forms-field-option-row-placeholder input",function(e){var t=v(this),i=t.val(),t=t.parent().data("field-id"),t=v("#everest-forms-field-"+t).find(".widefat:not(.secondary-input)");t.is("select")?i.length?(t.find(".placeholder").length?t.find(".placeholder").text(i):t.prepend('<option class="placeholder" selected>'+i+"</option>"),t.data("placeholder",i),t.hasClass("enhanced")&&t.parent().find(".select2-search__field").prop("placeholder",i)):t.find(".placeholder").remove():t.attr("placeholder",i)}),a.on("input",".everest-forms-field-option-address input.placeholder",function(e){var t=v(this),i=t.val(),s=t.parent().parent().data("field-id"),t=t.parent().parent().data("subfield");v("#everest-forms-field-"+s).find(".everest-forms-"+t+" input").attr("placeholder",i)}),a.on("input",".everest-forms-field-option-row-confirmation_placeholder input",function(){var e=v(this),t=e.val(),e=e.parent().data("field-id");v("#everest-forms-field-"+e).find(".secondary-input").attr("placeholder",t)}),a.on("input",".everest-forms-field-option-row-card_number_placeholder input",function(){var e=v(this),t=e.val(),e=e.parent().data("field-id");v("#everest-forms-field-"+e).find(".everest-forms-authorize-net-card-number input").attr("placeholder",t)}),a.on("input",".everest-forms-field-option-row-cvc_placeholder  input",function(){var e=v(this),t=e.val(),e=e.parent().data("field-id");v("#everest-forms-field-"+e).find(".everest-forms-authorize-net-cvc input").attr("placeholder",t)}),a.on("change",".everest-forms-field-option-row-label_hide input",function(){var e=v(this).parent().parent().parent().data("field-id");v("#everest-forms-field-"+e).toggleClass("label_hide")}),a.on("change",".everest-forms-field-option-row-sublabel_hide input",function(){var e=v(this).parent().parent().parent().data("field-id");v("#everest-forms-field-"+e).toggleClass("sublabel_hide")}),a.on("change",".everest-forms-field-option-row-datetime_format select, .everest-forms-field-option-row-phone_format select, .everest-forms-field-option-row-item_price select, .everest-forms-field-option-row-format select",function(e){var t=v(this),i=t.val(),t=t.parent().data("field-id");v("#everest-forms-field-"+t).find(".format-selected").removeClass().addClass("format-selected format-selected-"+i),v("#everest-forms-field-option-"+t).find(".format-selected").removeClass().addClass("format-selected format-selected-"+i)}),a.on("change",".everest-forms-field-option-row-datetime_style select",function(){m.dateSettingToggler(v(this).parent().attr("data-field-id"),v(this).val())}),v(".everest-forms-field-option-row-time_interval_format [id*=enable_min_max_time]").each(function(){v(this).prop("checked")?(v(this).parent().parent().find(".input-group-col-2").has(" [id*=min_time_hour]").show(),v(this).parent().parent().find(".input-group-col-2").has(" [id*=max_time_hour]").show(),v(this).parent().parent().find(".input-group-col-2").has(" [for*=select_min_time]").show(),v(this).parent().parent().find(".input-group-col-2").has("[for*=select_max_time]").show()):(v(this).parent().parent().find(".input-group-col-2").has("[id*=min_time_hour]").hide(),v(this).parent().parent().find(".input-group-col-2").has("[id*=max_time_hour]").hide(),v(this).parent().parent().find("[for*=select_min_time]").hide(),v(this).parent().parent().find("[for*=select_max_time]").hide())}),a.on("click",".everest-forms-field-option-row-time_interval_format [id*=enable_min_max_time]",function(){v(this).prop("checked")?(v(this).parent().parent().find(".input-group-col-2").has(" [id*=min_time_hour]").show(),v(this).parent().parent().find(".input-group-col-2").has(" [id*=max_time_hour]").show(),v(this).parent().parent().find("[for*=select_min_time]").show(),v(this).parent().parent().find("[for*=select_max_time]").show()):(v(this).parent().parent().find(".input-group-col-2").has("[id*=min_time_hour]").hide(),v(this).parent().parent().find(".input-group-col-2").has("[id*=max_time_hour]").hide(),v(this).parent().parent().find("[for*=select_min_time]").hide(),v(this).parent().parent().find("[for*=select_max_time]").hide())}),a.on("change",".everest-forms-field-option-row-time_interval_format select[id*=time_format]",function(){min_hour=v(this).parent().siblings(".input-group-col-2").find("[id*=min_time_hour]"),max_hour=v(this).parent().siblings(".input-group-col-2").find("[id*=max_time_hour]");var e,t,s=min_hour.find("option:selected").val(),n=max_hour.find("option:selected").val(),o="";for(i=0;i<=23;i++)"H:i"===v(this).val()?o+='<option value = "'+i+'">'+(i<10?"0"+i:i)+"</option>":(e=" PM",0==(t=i<12?(e=" AM",i):i-12)&&(t=12),o+='<option value = "'+i+'">'+t+e+"</option>");min_hour.html(o),max_hour.html(o),min_hour.find("option[value="+s+"]").prop("selected",!0),max_hour.find("option[value="+n+"]").prop("selected",!0)})},dateSettingToggler:function(e,t){"picker"==t?(v("#everest-forms-field-option-row-"+e+"-placeholder").show(),v("#everest-forms-field-option-"+e+"-disable_dates").show(),v("label[for=everest-forms-field-option-"+e+"-disable_dates]").show(),v("#everest-forms-field-option-"+e+"-date_mode-range").parents().find("everest-forms-checklist").show(),v(".everest-forms-field-option-row-date_format .time_interval").show(),v("#everest-forms-field-option-"+e+"-date_localization").show(),v("label[for=everest-forms-field-option-"+e+"-date_localization]").show(),v("#everest-forms-field-option-"+e+"-date_default").parent().parent().parent().show(),v("#everest-forms-field-option-"+e+"-past_date_disable").parent().parent().parent().show(),v("#everest-forms-field-option-"+e+"-enable_min_max").parent().parent().parent().show(),v("#everest-forms-field-option-"+e+"-enable_min_max").prop("checked")&&(v("#everest-forms-field-option-"+e+"-set_date_range").parent().show(),(v("#everest-forms-field-option-"+e+"-set_date_range").prop("checked")?v("#everest-forms-field-option-row-"+e+"-date_format .everest-forms-min-max-date-range-option"):v("#everest-forms-field-option-row-"+e+"-date_format .everest-forms-min-max-date-option")).removeClass("everest-forms-hidden")),v("#everest-forms-field-option-"+e+"-time_interval").show(),v("#everest-forms-field-option-"+e+"-enable_min_max_time").parent().parent().parent().hide(),v("label[for=everest-forms-field-option-"+e+"-enable_min_max_time]").hide(),v("label[for=everest-forms-field-option-"+e+"-select_min_time]").hide(),v("label[for=everest-forms-field-option-"+e+"-select_max_time]").hide(),v("#everest-forms-field-option-"+e+"-min_time_hour").parent().hide(),v("#everest-forms-field-option-"+e+"-max_time_hour").parent().hide()):(v("#everest-forms-field-option-"+e+"-date_mode-range").parents().find("everest-forms-checklist").hide(),v("#everest-forms-field-option-"+e+"-date_default").parent().parent().parent().hide(),v("#everest-forms-field-option-"+e+"-past_date_disable").parent().parent().parent().hide(),v("#everest-forms-field-option-row-"+e+"-placeholder").hide(),v("#everest-forms-field-option-"+e+"-enable_min_max").parent().parent().parent().hide(),v("#everest-forms-field-option-row-"+e+"-date_format .everest-forms-min-max-date-option").addClass("everest-forms-hidden"),v("#everest-forms-field-option-"+e+"-set_date_range").parent().parent().parent().hide(),v("#everest-forms-field-option-row-"+e+"-date_format .everest-forms-min-max-date-range-option").addClass("everest-forms-hidden"),v("#everest-forms-field-option-"+e+"-disable_dates").hide(),v("label[for=everest-forms-field-option-"+e+"-disable_dates]").hide(),v(".everest-forms-field-option-row-date_format .everest-forms-checklist").hide(),v(".everest-forms-field-option-row-date_format .time_interval").hide(),v("#everest-forms-field-option-"+e+"-date_localization").hide(),v("label[for=everest-forms-field-option-"+e+"-date_localization]").hide(),v("#everest-forms-field-option-"+e+"-time_interval").hide(),v("#everest-forms-field-option-"+e+"-enable_min_max_time").parent().parent().parent().show(),v("label[for=everest-forms-field-option-"+e+"-enable_min_max_time]").show(),v("#everest-forms-field-option-"+e+"-enable_min_max_time").prop("checked")&&(v("label[for=everest-forms-field-option-"+e+"-select_min_time]").show(),v("label[for=everest-forms-field-option-"+e+"-select_max_time]").show(),v("#everest-forms-field-option-"+e+"-min_time_hour").parent().show(),v("#everest-forms-field-option-"+e+"-max_time_hour").parent().show()))},choicesInit:function(e){v(e=e||".everest-forms-field-option-row-choices ul").sortable({items:"li",axis:"y",handle:".sort",scrollSensitivity:40,stop:function(e){var e=v(e.target).attr("data-field-id"),t=v("#everest-forms-field-option-"+e).find(".everest-forms-field-option-hidden-type").val();m.choiceUpdate(t,e)}})},choiceAdd:function(e,t,i){e&&e.preventDefault&&e.preventDefault();var e=v(t),t=e.parent(),s=t.find("input.default").is(":checked"),e=e.closest(".everest-forms-field-option-row-choices").data("field-id"),n=t.parent().attr("data-next-id"),o=t.parent().data("field-type"),r=t.clone().insertAfter(t);r.attr("data-key",n),r.find("input.label").val(i).attr("name","form_fields["+e+"][choices]["+n+"][label]"),r.find("input.value").val(i).attr("name","form_fields["+e+"][choices]["+n+"][value]"),r.find("input.source").val("").attr("name","form_fields["+e+"][choices]["+n+"][image]"),r.find("input.default").attr("name","form_fields["+e+"][choices]["+n+"][default]").prop("checked",!1),r.find(".attachment-thumb").remove(),r.find(".button-add-media").show(),!0===s&&t.find("input.default").prop("checked",!0),n++,t.parent().attr("data-next-id",n),a.trigger("everestFormsChoiceAdd"),m.choiceUpdate(o,e)},choiceDelete:function(e,t){e.preventDefault();e=v(t),t=e.parent().parent();t.find("li").length<2?v.alert({title:!1,content:c.i18n_field_error_choice,icon:"dashicons dashicons-info",type:"blue",buttons:{ok:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"]}}}):(e.parent().remove(),m.choiceUpdate(t.data("field-type"),t.data("field-id")),a.trigger("everestFormsChoiceDelete"))},choiceUpdate:function(n,o){var e,t,r,i=v("#everest-forms-field-option-"+o);$primary=v("#everest-forms-field-"+o+" .primary-input"),"radio"===n||"checkbox"===n||"payment-multiple"===n||"payment-checkbox"===n?(e=[],i=m.formObject(i).form_fields[o],v("#everest-forms-field-option-"+o).find(".evf-choices-list li").each(function(){e.push(v(this).data("key"))}),t=wp.template("everest-forms-field-preview-choices"),data={type:n="checkbox"===n||"payment-checkbox"===n?"checkbox":"radio",order:e,settings:i,amountFilter:m.amountFilter},v("#everest-forms-field-"+o).find("ul.primary-input").replaceWith(t(data))):("select"===n&&(r="<option>{label}</option>",$primary.find("option").not(".placeholder").remove()),v("#everest-forms-field-option-row-"+o+"-choices .evf-choices-list li").each(function(e){var t=v(this),i=t.find("input.label").val().replace(/<\s*script/gi,"").replace(/\s+on\w+\s*=/gi," "),t=t.find("input.default").is(":checked"),s=v(r.replace("{label}",i));if(v("#everest-forms-field-"+o+" .primary-input").append(s),i&&!0===t)switch(n){case"select":s.prop("selected",!0);break;case"radio":case"checkbox":s.find("input").prop("checked",!0)}}))},amountFilter:function(e,t){return"right"===e.currency_symbol_pos?t+" "+e.currency_symbol:e.currency_symbol+" "+t},bindFormSettings:function(){v("body").on("click",".evf-setting-panel",function(e){var t=v(this).attr("data-section");v(".evf-setting-panel").removeClass("active"),v(".everest-forms-active-email").removeClass("active"),v(".everest-forms-active-sms-notifications").removeClass("active"),v(".everest-forms-active-conversational-forms").removeClass("active"),v(".evf-content-section").removeClass("active"),v(this).addClass("active"),v(".evf-content-"+t+"-settings").addClass("active"),e.preventDefault()}),v(".evf-setting-panel").eq(0).trigger("click")},bindFormEmail:function(){v("body").on("click",".everest-forms-panel-sidebar-section-email",function(e){v(this).siblings(".everest-forms-active-email").removeClass("active"),v(this).next(".everest-forms-active-email").addClass("active");var t=v(this).siblings(".everest-forms-active-email.active").find(".everest-forms-active-email-connections-list li");t.length&&t.children(".user-nickname").first().trigger("click"),e.preventDefault()})},bindFormSmsNotifications:function(){v("body").on("click",".everest-forms-panel-sidebar-section-sms-notifications",function(e){v(this).siblings(".everest-forms-active-sms-notifications").removeClass("active"),v(this).next(".everest-forms-active-sms-notifications").addClass("active");var t=v(this).siblings(".everest-forms-active-sms-notifications.active").find(".everest-forms-active-sms-notifications-connections-list li");t.length&&t.children(".user-nickname").first().trigger("click"),e.preventDefault()})},bindFormConversational:function(){v("body").on("click",".everest-forms-panel-sidebar-section-conversational-forms ",function(e){v(this);v(this).siblings(".everest-forms-active-conversational-forms").removeClass("active"),v(this).next(".everest-forms-active-conversational-forms").addClass("active");var t=v(this).siblings(".everest-forms-active-conversational-forms.active");t.length&&t.children(".evf-content-tab ").trigger("click"),e.preventDefault()})},bindFormIntegrations:function(){v("body").on("click",".evf-integrations-panel",function(e){var t=v(this).attr("data-section"),i=(v(".evf-integrations-panel").removeClass("active"),v("#everest-forms-panel-integrations").find(".evf-panel-content-section").removeClass("active"),v(this).addClass("active"),v(this).parent().find(".everest-forms-active-connections").removeClass("active"),v(this).next(".everest-forms-active-connections").addClass("active"),v(this).siblings(".everest-forms-active-connections.active").find(".everest-forms-active-connections-list li"));i.length&&i.children(".user-nickname").first().trigger("click"),v(".evf-panel-content-section-"+t).addClass("active"),e.preventDefault()}),v(".evf-setting-panel").eq(0).trigger("click")},bindFormPayment:function(){v("body").on("click",".evf-payments-panel",function(e){var t=v(this).attr("data-section");v(".evf-payments-panel").removeClass("active"),v(this).siblings().removeClass("icon active"),v(this).addClass("active"),v(this).parents("#everest-forms-panel-payments").find(".evf-payment-setting-content").removeClass("active").hide(),v(".evf-content-"+t+"-settings").addClass("active").show(),e.preventDefault()}),v(".evf-setting-panel").eq(0).trigger("click")},removeRow:function(e){v.each(e.find(".everest-forms-field"),function(){var e=v(this).attr("data-field-id"),e=v("#everest-forms-field-option-"+e);v(this).remove(),e.remove()}),e.remove()},bindRemoveRow:function(){v("body").on("click",".evf-delete-row",function(){var e=v(this),t=v(".evf-admin-row").length,i=e.closest(".evf-admin-row"),s=i.attr("data-row-id"),e=e.parents(".evf-admin-field-container").attr("data-current-part"),n=v("#everest-forms-builder").hasClass("multi-part-activated");(t=e&&n?v("#part_"+e).find(".evf-admin-row").length:t)<2?v.alert({title:c.i18n_row_locked,content:c.i18n_row_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"]}}}):v.confirm({title:!1,content:c.i18n_delete_row_confirm,type:"red",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){m.removeRow(i),v(".everest-forms-fields-tab").find("a").removeClass("active"),v(".everest-forms-fields-tab").find("a").first().addClass("active"),v(".everest-forms-add-fields").show(),v("#everest-forms-row-option-row_"+s).remove()}},cancel:{text:c.i18n_cancel}}})})},bindAddNewRow:function(){v("body").on("click",".evf-add-row span",function(){v("#add-fields").trigger("click");var t,e=v(this),i=v(".evf-admin-field-wrapper"),s=v(".evf-admin-row").map(function(){return v(this).data("row-id")}).get(),s=Math.max.apply(Math,s),n=v(".evf-admin-row").eq(0).clone(),o=e.parent().attr("data-total-rows"),r=e.parents(".evf-admin-field-container").attr("data-current-part");s++,o++,r&&(i=v(".evf-admin-field-wrapper").find("#part_"+r)),n.find(".evf-admin-grid").html(""),n.attr("data-row-id",s),e.parent().attr("data-total-rows",o),e.parent().attr("data-next-row-id",s),0<v(".everest-forms-row-options").length&&!1===e.closest(".evf-add-row").hasClass("repeater-row")?(n.find("div").hide(),n.css({padding:"40px"}).append('<i class="spinner is-active" style="margin:0px auto;"></i>'),i.append(n),m.bindFields(),m.checkEmptyGrid(),t=n.attr("data-row-id"),r=window.evf_data,v.ajax({url:r.ajax_url,type:"POST",data:{action:"everest_forms_new_row",security:r.evf_add_row_nonce,form_id:r.form_id,row_id:t},success:function(e){!0===e.success&&"undefined"!=typeof e.data.html&&(v(document).find(".everest-forms-row-option-group").append(e.data.html),m.conditionalLogicAppendRow(t),v("#everest-forms-panel-field-form_rows-connection_row_"+t+"-conditional_logic_status").prop("checked",!1))}}).always(function(){n.css({padding:0}),n.find("div").show(),n.find(".evf-toggle-row-content").css("display","none"),n.find("i").remove(),e.trigger("everest-forms-after-add-row",n)})):(i.append(n),m.bindFields(),m.checkEmptyGrid(),e.trigger("everest-forms-after-add-row",n))})},bindCloneField:function(){v("body").on("click",".everest-forms-preview .everest-forms-field .everest-forms-field-duplicate",function(){var e=v(this).closest(".everest-forms-field");e.hasClass("no-duplicate")?v.alert({title:c.i18n_field_locked,content:c.i18n_field_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"]}}}):v.confirm({title:!1,content:c.i18n_duplicate_field_confirm,type:"orange",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){m.cloneFieldAction(e)}},cancel:{text:c.i18n_cancel}}})}),v("body").on("click",".evf-admin-row .evf-duplicate-row",function(){var e=v(this).closest(".evf-admin-row");e.find(".everest-forms-field").hasClass("no-duplicate")?v.alert({title:c.i18n_field_locked,content:c.i18n_row_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"]}}}):v.confirm({title:!1,content:c.i18n_duplicate_row_confirm,type:"orange",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){m.cloneRowAction(e)}},cancel:{text:c.i18n_cancel}}})})},cloneRowAction:function(t){row_ids=v(".evf-admin-row").map(function(){return v(this).data("row-id")}).get(),max_row_id=Math.max.apply(Math,row_ids),row_clone=t.clone(),total_rows=v(".evf-add-row").attr("data-total-rows"),max_row_id++,total_rows++,row_clone.attr("data-row-id",max_row_id),v(".evf-add-row").attr("data-total-rows",total_rows),v(".evf-add-row").attr("data-next-row-id",max_row_id);var e={action:"everest_forms_get_next_id",security:c.evf_get_next_id,form_id:c.form_id,fields:row_clone.find(".everest-forms-field").length};v.ajax({url:c.ajax_url,data:e,type:"POST",beforeSend:function(){v(document.body).trigger("init_field_options_toggle")},success:function(e){"boolean"==typeof e.success&&!0===e.success&&(t.after(row_clone),v.each(e.data,function(e,t){var i=t.field_id,t=t.field_key,i=(v("#everest-forms-field-id").val(i),(field=row_clone.find(".everest-forms-field").eq(e)).attr("data-field-id"));m.render_node(field,i,t),field.remove(),v(document.body).trigger("init_field_options_toggle")}),m.bindFields())}})},cloneFieldAction:function(i){var s=i.attr("data-field-id"),e=c.form_id,e={action:"everest_forms_get_next_id",security:c.evf_get_next_id,form_id:e};v.ajax({url:c.ajax_url,data:e,type:"POST",beforeSend:function(){v(document.body).trigger("init_field_options_toggle")},success:function(e){var t;"boolean"==typeof e.success&&!0===e.success&&(t=e.data.field_id,e=e.data.field_key,v("#everest-forms-field-id").val(t),m.render_node(i,s,e),v(document.body).trigger("init_field_options_toggle"))}})},render_node:function(e,s,n){var t=v(".everest-forms-field-options #everest-forms-field-option-"+s),i=v("#everest-forms-field-option-"+s+"-label").val(),o=v("#everest-forms-field-option-"+s+"-meta-key").length?v("#everest-forms-field-option-"+s+"-meta-key").val():"",r=e.attr("data-field-type"),a=t.html(),i=i+" "+c.i18n_copy,o="html"!==r?o.replace(/\(|\)/g,"").toLowerCase().substring(0,o.lastIndexOf("_"))+"_"+Math.floor(1e3+9e3*Math.random()):"",d=e.clone(),l=new RegExp(s,"g"),a=a.replace(l,n),f=v('<div class="everest-forms-field-option everest-forms-field-option-'+r+'" id="everest-forms-field-option-'+n+'" data-field-id="'+n+'" />');f.append(a),v.each(t.find(":input"),function(){var e,t=v(this).attr("type"),i=(v(this).attr("name")?v(this).attr("name"):"").replace(l,n);"text"===t||"hidden"===t?(e=v(this).val(),f.find('input[name="'+i+'"]').val(e),f.find('input[value="'+s+'"]').val(n)):"checkbox"===t||"radio"===t?v(this).is(":checked")?f.find('input[name="'+i+'"]').prop("checked",!0).attr("checked","checked"):f.find('[name="'+i+'"]').prop("checked",!1).attr("checked",!1):v(this).is("select")?v(this).find("option:selected").length&&(e=v(this).find("option:selected").val(),f.find('[name="'+i+'"]').find('[value="'+e+'"]').prop("selected",!0)):""!==v(this).val()&&f.find('[name="'+i+'"]').val(v(this).val())}),v(".everest-forms-field-options").append(f),v("#everest-forms-field-option-"+n+"-label").val(i),v("#everest-forms-field-option-"+n+"-meta-key").val(o),d.attr("class",e.attr("class")),d.attr("id","everest-forms-field-"+n),d.attr("data-field-id",n),d.attr("data-field-type",r),d.find(".label-title .text").text(i),e.closest(".evf-admin-grid").find('[data-field-id="'+s+'"]').after(d),v(document).trigger("everest-form-cloned",[n,r]),m.switchToFieldOptionPanel(n),v(document.body).trigger("evf_render_node_complete",[r,n,d,f])},bindFieldDelete:function(){v("body").on("click",".everest-forms-preview .everest-forms-field .everest-forms-field-delete",function(){var t=v(this).closest(".everest-forms-field"),e=t.attr("data-field-id"),i=v("#everest-forms-field-option-"+e);v(this).closest(".evf-admin-grid");t.hasClass("no-delete")?v.alert({title:c.i18n_field_locked,content:c.i18n_field_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"]}}}):v.confirm({title:!1,content:c.i18n_delete_field_confirm,type:"red",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){v(".evf-panel-fields-button").trigger("click"),t.fadeOut("slow",function(){var e=t.attr("data-field-id");v(document.body).trigger("evf_before_field_deleted",[e]),t.remove(),i.remove(),m.checkEmptyGrid(),v(".everest-forms-fields-tab").find("a").removeClass("active"),v(".everest-forms-fields-tab").find("a").first().addClass("active"),v(".everest-forms-add-fields").show(),m.conditionalLogicRemoveField(e),m.conditionalLogicRemoveFieldIntegration(e),m.paymentFieldRemoveFromQuantity(e)})}},cancel:{text:c.i18n_cancel}}})})},bindFieldDeleteWithKeyEvent:function(){v("body").on("keyup",function(e){var t,i=v(".everest-forms-preview .everest-forms-field.active");46===e.which&&!0===i.hasClass("active")&&!1===i.hasClass("evf-delete-event-active")&&0!=v(".evf-admin-row").hasClass("evf-hover")&&(i.addClass("evf-delete-event-active"),e=i.attr("data-field-id"),t=v("#everest-forms-field-option-"+e),i.hasClass("no-delete")?v.alert({title:c.i18n_field_locked,content:c.i18n_field_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"],action:function(){i.removeClass("evf-delete-event-active")}}}}):v.confirm({title:!1,content:c.i18n_delete_field_confirm,type:"red",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{confirm:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"],action:function(){v(".evf-panel-fields-button").trigger("click"),i.fadeOut("slow",function(){var e=i.attr("data-field-id");v(document.body).trigger("evf_before_field_deleted",[e]),i.remove(),t.remove(),m.checkEmptyGrid(),v(".everest-forms-fields-tab").find("a").removeClass("active"),v(".everest-forms-fields-tab").find("a").first().addClass("active"),v(".everest-forms-add-fields").show(),m.conditionalLogicRemoveField(e),m.conditionalLogicRemoveFieldIntegration(e),m.paymentFieldRemoveFromQuantity(e)}),i.removeClass("evf-delete-event-active")}},cancel:{text:c.i18n_cancel,action:function(){i.removeClass("evf-delete-event-active")}}}}))})},bindSaveOption:function(){v("body").on("click",".everest-forms-save-button",function(){var t=v(this),e=v("form#everest-forms-builder-form"),i=m.getStructure(),s=e.serializeArray(),n=v("#evf-edit-form-name").val().trim();if(v(document).trigger("everest_forms_save_args",[s]),""===n)v.alert({title:c.i18n_field_title_empty,content:c.i18n_field_title_payload,icon:"dashicons dashicons-warning",type:"red",buttons:{ok:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"]}}});else{e.triggerHandler("everest_forms_process_ajax_data",[t,s])&&(s=e.triggerHandler("everest_forms_process_ajax_data",[t,s])),v(".everest-forms-panel-content-wrap").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});for(var o,r=[],a=(v(".everest-forms-field[data-field-id]").each(function(){r.push(v(this).attr("data-field-id"))}),s.length);a--;)s[a].name.startsWith("form_fields")&&(o=!1,r.forEach(function(e){s[a].name.startsWith("form_fields["+e+"]")&&(o=!0)}),-1<a)&&!1===o&&s.splice(a,1);n=s.concat(i),e={action:"everest_forms_save_form",security:c.evf_save_form,form_data:JSON.stringify(n)};v.ajax({url:c.ajax_url,data:e,type:"POST",beforeSend:function(){t.addClass("processing"),t.find(".loading-dot").remove(),t.append('<span class="loading-dot"></span>')},success:function(e){t.removeClass("processing"),t.find(".loading-dot").remove(),v(document).trigger("everest_forms_save_data",e.data),e.success||v.alert({title:e.data.errorTitle,content:e.data.errorMessage,icon:"dashicons dashicons-warning",type:"red",buttons:{ok:{text:c.i18n_ok,btnClass:"btn-confirm",keys:["enter"]}}}),v(".everest-forms-panel-content-wrap").unblock()}})}})},bindSaveOptionWithKeyEvent:function(){v("body").on("keydown",function(e){!e.ctrlKey&&!e.metaKey||"s"!==String.fromCharCode(e.which).toLowerCase()&&83!==e.which||(e.preventDefault(),v(".everest-forms-save-button").trigger("click"))})},bindOpenShortcutKeysModalWithKeyEvent:function(){v("body").on("keydown",function(e){var i;!e.ctrlKey&&!e.metaKey||"h"!==String.fromCharCode(e.which).toLowerCase()&&72!==e.which||(e.preventDefault(),i="",v.each(c.i18n_shortcut_keys,function(e,t){i+=`
								<ul class="evf-shortcut-keyword">
									<li>
										<div class="evf-shortcut-title">${t}</div>
									<div class="evf-key">
										<span>${e.split("+")[0]}</span>
										<span>${e.split("+")[1]}</span>
									</div>
									</li>
								</ul>
							`}),v.alert({title:c.i18n_shortcut_key_title,content:i,icon:"dashicons dashicons-info",type:"blue",boxWidth:"550px",buttons:{confirm:{text:c.i18n_close,btnClass:"btn-confirm",keys:["enter"]}},onContentReady:function(){v("body").on("keydown",function(e){(e.ctrlKey||e.metaKey&&"h"===String.fromCharCode(e.which).toLowerCase()||72===e.which)&&v(".btn-confirm").trigger("click")})}}))})},getStructure:function(){var e=v(".evf-admin-field-wrapper"),o=[];return v.each(e.find(".evf-admin-row"),function(){var e=v(this),n=e.attr("data-row-id");v.each(e.find(".evf-admin-grid"),function(){var e=v(this),i=e.attr("data-grid-id"),s=0;v.each(e.find(".everest-forms-field"),function(){var e={name:"",value:""},t=v(this).attr("data-field-id");e.name="structure[row_"+n+"][grid_"+i+"]["+s+"]",s++,e.value=t,o.push(e)}),e.find(".everest-forms-field").length<1&&o.push({name:"structure[row_"+n+"][grid_"+i+"]",value:""})})}),o},getFieldArray:function(e){var t=[];return v.each(e.find(".everest-forms-field"),function(){var e=v(this).attr("data-field-id");t.push(e)}),t},checkEmptyGrid:function(e){v.each(v(".evf-admin-grid"),function(){v(this).find(".everest-forms-field, .evf-registered-item:not(.ui-draggable-dragging)").not(".ui-sortable-helper").length<1?v(this).addClass("evf-empty-grid"):v(this).removeClass("evf-empty-grid")}),m.choicesInit()},bindDefaultTabs:function(){v(document).on("click",".evf-nav-tab-wrapper a",function(e){e.preventDefault(),m.switchTab(v(this).data("panel"))})},switchTab:function(e){var t=v("#everest-forms-panel-"+e),i=v(".evf-panel-"+e+"-button");v(".evf-nav-tab-wrapper").find("a").removeClass("nav-tab-active"),i.addClass("nav-tab-active"),t.closest(".evf-tab-content").find(".everest-forms-panel").removeClass("active"),t.addClass("active"),"integrations"!==e&&"payments"!==e||(t.find(".everest-forms-panel-sidebar a").hasClass("active")||t.find(".everest-forms-panel-sidebar a").first().addClass("active"),v(".everest-forms-panel-content").find(".evf-panel-content-section").hasClass("active"))||v(".everest-forms-panel-content").find(".evf-panel-content-section").first().addClass("active"),history.replaceState({},null,m.updateQueryString("tab",e)),m.switchPanel(e)},updateQueryString:function(e,t,i){i=i||window.location.href;var s,n=new RegExp("([?&])"+e+"=.*?(&|#|$)(.*)","gi");return n.test(i)?null!=t?i.replace(n,"$1"+e+"="+t+"$2$3"):(i=(s=i.split("#"))[0].replace(n,"$1$3").replace(/(&|\?)$/,""),"undefined"!=typeof s[1]&&null!==s[1]&&(i+="#"+s[1]),i):(null!=t&&(n=-1!==i.indexOf("?")?"&":"?",i=(s=i.split("#"))[0]+n+e+"="+t,"undefined"!=typeof s[1])&&null!==s[1]&&(i+="#"+s[1]),i)},switchPanel:function(e){"field-options"===e&&m.switchToFieldOptionPanel()},switchToFieldOptionPanel:function(e){v(".everest-forms-field-options").find(".no-fields").hide(),v(".evf-admin-field-wrapper .everest-forms-field").removeClass("active"),v("#everest-forms-panel-fields").addClass("active"),v(".everest-forms-fields-tab").find("a").removeClass("active"),v(".everest-forms-fields-tab").find("a").last().addClass("active"),v(".everest-forms-add-fields").hide(),v(".everest-forms-field-options").show(),v(".everest-forms-field-options").find(".everest-forms-field-option").hide(),v(".evf-tab-lists").find("li a").removeClass("active"),v(".evf-tab-lists").find("li.evf-panel-field-options-button a").addClass("active"),v(document.body).trigger("evf-init-switch-field-options"),void 0!==e?(v("#everest-forms-field-option-"+e).show(),v("#everest-forms-field-"+e).addClass("active")):(0<v(".evf-admin-field-wrapper .everest-forms-field").length?(v(".evf-admin-field-wrapper .everest-forms-field").eq(0).addClass("active"),v("#everest-forms-field-option-"+v(".evf-admin-field-wrapper .everest-forms-field").eq(0).attr("data-field-id"))):v(".everest-forms-field-options").find(".no-fields")).show()},bindFields:function(){v(".evf-admin-field-wrapper").sortable({items:".evf-admin-row",axis:"y",cursor:"move",opacity:.65,scrollSensitivity:40,forcePlaceholderSize:!0,placeholder:"evf-sortable-placeholder",containment:".everest-forms-panel-content",start:function(e,t){t.item.css({backgroundColor:"#f7fafc",border:"1px dashed #5d96ee"})},stop:function(e,t){t.item.removeAttr("style")}}).disableSelection(),v(".evf-admin-grid").sortable({items:'> .everest-forms-field[data-field-type!="repeater-fields"]',delay:100,opacity:.65,cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,connectWith:".evf-admin-grid",appendTo:document.body,containment:".everest-forms-field-wrap",out:function(e){v(".evf-admin-grid").removeClass("evf-hover"),v(e.target).removeClass("evf-item-hover"),v(e.target).closest(".evf-admin-row").removeClass("evf-hover"),m.checkEmptyGrid()},over:function(e,t){v(".evf-admin-grid").addClass("evf-hover"),v(e.target).addClass("evf-item-hover"),v(e.target).closest(".evf-admin-row").addClass("evf-hover"),m.checkEmptyGrid()},receive:function(e,t){t.sender.is("button")&&m.fieldDrop(t.helper)},update:function(e,t){v(document).trigger("evf_sort_update_complete",{event:e,ui:t})},stop:function(e,t){t.item.removeAttr("style"),m.checkEmptyGrid()}}).disableSelection(),v(".evf-registered-buttons button.evf-registered-item").draggable({delay:200,cancel:!1,scroll:!1,revert:"invalid",scrollSensitivity:40,forcePlaceholderSize:!0,start:function(){v(this).addClass("field-dragged")},helper:function(){return v(this).clone().insertAfter(v(this).closest(".everest-forms-tab-content").siblings(".everest-forms-fields-tab"))},stop:function(){v(this).removeClass("field-dragged")},opacity:.75,containment:"#everest-forms-builder",connectToSortable:".evf-admin-grid"}).disableSelection(),v(".evf-registered-item.evf-repeater-field").draggable("option","connectToSortable",".evf-repeatable-grid"),v(".evf-admin-row").on("mouseenter mouseleave",function(e){e.buttons<1&&("mouseenter"===e.type?v(this).addClass("evf-hover"):v(".evf-admin-row").removeClass("evf-hover"))}),v(".everest-forms-panel-content").on("scroll",function(){v(".evf-admin-grid").sortable("refreshPositions"),v(".evf-admin-field-wrapper").sortable("refreshPositions")})},fieldTabChoice:function(e){v(".everest-forms-tab-content").scrollTop(0),v(".everest-forms-fields-tab a").removeClass("active"),v(".everest-forms-field, .everest-forms-title-desc").removeClass("active"),v("#"+e).addClass("active"),("add-fields"===e?(v(".everest-forms-add-fields").show(),v(".everest-forms-field-options")):(("field-options"===e?(e=v(".everest-forms-field").first().data("field-id"),v(".everest-forms-field-options").show(),v(".everest-forms-field").first()):v("#everest-forms-field-"+e)).addClass("active"),v(".everest-forms-field-option").hide(),v("#everest-forms-field-option-"+e).show(),v(".everest-forms-add-fields"))).hide()},bindFormPreview:function(){},bindFormPreviewWithKeyEvent:function(){v("body").on("keydown",function(e){!e.ctrlKey&&!e.metaKey||"p"!==String.fromCharCode(e.which).toLowerCase()&&80!==e.which||(e.preventDefault(),window.open(c.preview_url))})},bindFormEntriesWithKeyEvent:function(){v("body").on("keydown",function(e){!e.ctrlKey&&!e.metaKey||"e"!==String.fromCharCode(e.which).toLowerCase()&&69!==e.which||(e.preventDefault(),window.open(c.entries_url))})},bindGridSwitcher:function(){v("body").on("click",".evf-show-grid",function(e){e.stopPropagation(),m.checkEmptyGrid(),v(this).closest(".evf-toggle-row").find(".evf-toggle-row-content").stop(!0).slideToggle(200)}),v(document).on("click",function(){m.checkEmptyGrid(),v(".evf-show-grid").closest(".evf-toggle-row").find(".evf-toggle-row-content").stop(!0).slideUp(200)});v("body").on("click",".evf-grid-selector",function(){var e=v(this).closest(".evf-admin-row");if(!v(this).hasClass("active")){var t=parseInt(v(this).attr("data-evf-grid"),10);if(!(4<t)){var i=v('<div class="evf-admin-grid evf-grid-'+t+' ui-sortable evf-empty-grid" />'),s=v("<div/>");v.each(e.find(".evf-admin-grid"),function(){v(this).children("*").each(function(){s.append(v(this).clone())})}),e.find(".evf-admin-grid").remove(),e.find(".evf-clear ").remove(),e.append('<div class="clear evf-clear"></div>');for(var n=1;n<=t;n++)i.attr("data-grid-id",n),e.append(i.clone());e.append('<div class="clear evf-clear"></div>'),e.find(".evf-admin-grid").eq(0).append(s.html()),e.find(".evf-grid-selector").removeClass("active"),v(this).addClass("active"),m.bindFields()}}})},fieldDrop:function(r){var e=r.attr("data-field-type");if(["payment-total"].includes(e)&&r.closest(".evf-admin-row").hasClass("evf-repeater-fields"))return v.confirm({title:!1,content:"This field cannot be added to Repeater Fields",type:"red",closeIcon:!1,backgroundDismiss:!1,icon:"dashicons dashicons-warning",buttons:{cancel:{text:c.i18n_close,btnClass:"btn-default"}}}),r.remove(),!1;r.css({left:"0",width:"100%"}).append('<i class="spinner is-active"></i>'),v.ajax({url:c.ajax_url,type:"POST",data:{action:"everest_forms_new_field_"+e,security:c.evf_field_drop_nonce,field_type:e,form_id:c.form_id},beforeSend:function(){v(document.body).trigger("init_field_options_toggle")},success:function(e){var t=e.data.preview,i=e.data.options,s=e.data.form_field_id,e=e.data.field.type,n=v(t).attr("id"),o=v(t).attr("data-field-id");v("#everest-forms-field-id").val(s),v(".everest-forms-field-options").find(".no-fields").hide(),v(".everest-forms-field-options").append(i),v(".everest-forms-field-option-row-icon_color input.colorpicker").wpColorPicker({change:function(e){var t=v(this),i=t.val(),t=t.closest(".everest-forms-field-option-row").data("field-id");v("#everest-forms-field-"+t+" .rating-icon svg").css("fill",i)}}),r.after(t),null!==v("#everest-forms-panel-field-settings-enable_survey")&&v("#everest-forms-panel-field-settings-enable_survey").prop("checked")&&v("#everest-forms-field-option-"+o+"-survey_status").prop("checked",!0),null!==v("#everest-forms-panel-field-settings-enable_quiz")&&v("#everest-forms-panel-field-settings-enable_quiz").prop("checked")&&(v("#everest-forms-field-option-"+o+"-quiz_status").prop("checked",!0),v("#everest-forms-field-option-"+o+"-quiz_status").closest(".everest-forms-field-option-row-quiz_status").siblings(".everst-forms-field-quiz-settings").removeClass("everest-forms-hidden").addClass("everest-forms-show")),r.remove(),v(document.body).trigger("init_tooltips"),v(document.body).trigger("init_field_options_toggle"),v(document.body).trigger("evf_after_field_append",[n]),m.conditionalLogicAppendField(n),m.conditionalLogicAppendFieldIntegration(n),m.paymentFieldAppendToQuantity(n),m.paymentFieldAppendToDropdown(o,e),m.init_datepickers(),v("#everest-forms-field-option-"+o+"-enable_min_max_time").hide(),v("label[for=everest-forms-field-option-"+o+"-enable_min_max_time]").hide(),v("label[for=everest-forms-field-option-"+o+"-select_min_time]").hide(),v("label[for=everest-forms-field-option-"+o+"-select_max_time]").hide(),v("#everest-forms-field-option-"+o+"-min_time_hour").parent().hide(),v("#everest-forms-field-option-"+o+"-max_time_hour").parent().hide(),v(document.body).trigger("evf_field_drop_complete",[e,o,t,i]),m.checkEmptyGrid()}})},conditionalLogicAppendField:function(n){var e=v("#"+n),o=e.index(),r=v(".evf-field-conditional-field-select"),a=e.attr("data-field-type"),d=e.attr("data-field-id"),l=e.find(".label-title .text ").text(),f=(v.fn.insertAt=function(e,t,i){var s=v.makeArray(this.children().clone(!0));s.splice(t,0,e),v.each(s,function(e,t){i===v(t)[0].value&&(v(t)[0].selected=!0,s[e]=t)}),this.empty().append(s)},d);r.each(function(s,e){var t=v(e).val(),i=n.replace("everest-forms-field-",""),e=v(e).attr("name");i===e.substring(e.indexOf("[")+1,e.indexOf("]"))?v(".evf-admin-row .evf-admin-grid .everest-forms-field").each(function(){var e=v(this).data("field-type"),t=v(this).data("field-id"),i=v(this).find(".label-title span").first().text();field_to_be_restricted=["html","title","address","image-upload","file-upload","date-time","hidden","scale-rating","likert","yes-no"],-1===v.inArray(e,field_to_be_restricted)&&f!==t&&0===r.eq(s).find('option[data-field_id="'+t+'"]').length&&r.eq(s).append('<option class="evf-conditional-fields" data-field_type="'+e+'" data-field_id="'+t+'" value="'+t+'">'+i+"</option>")}):(i='<option class="evf-conditional-fields" data-field_type="'+a+'" data-field_id="'+d+'" value="'+d+'">'+l+"</option>","html"!==a&&"title"!==a&&"address"!==a&&"image-upload"!==a&&"file-upload"!==a&&"date-time"!==a&&"hidden"!==a&&"likert"!==a&&"scale-rating"!==a&&"yes-no"!==a&&"divider"!==a&&r.eq(s).insertAt(i,o,t)),1<r.eq(s).find("option:not(.evf-conditional-fields)").length&&r.eq(s).find("option:not(.evf-conditional-fields):gt(0)").remove()})},conditionalLogicAppendRow:function(s){var n=v("#everest-forms-row-option-row_"+s);v(".everest-forms-field").each(function(){var e=v(this),t=e.attr("data-field-id"),i=e.attr("data-field-type"),e=(e.find(".required").remove(),'<option class="evf-conditional-fields" data-field_type="'+i+'" data-field_id="'+t+'" value="'+t+'">'+e.find(".label-title").html()+"</option>");0===v(document).find('.evf-admin-row[data-row-id="'+s+'"] #everest-forms-field-'+t).length&&0===n.find('.evf-field-conditional-field-select option[data-field_id="'+t+'"]').length&&"html"!==i&&"title"!==i&&"address"!==i&&"image-upload"!==i&&"file-upload"!==i&&"date-time"!==i&&"hidden"!==i&&"likert"!==i&&"scale-rating"!==i&&"divider"!==i&&n.find(".evf-field-conditional-field-select").append(e),1<n.find(".evf-field-conditional-field-select option:not(.evf-conditional-fields)").length&&n.find(".evf-field-conditional-field-select option:not(.evf-conditional-fields):gt(0)").remove()})},paymentFieldAppendToQuantity:function(e){var e=v("#"+e),t=v(".everest-forms-field-option-row-map_field select"),i=e.attr("data-field-type"),s=e.attr("data-field-id"),e=e.find(".label-title .text ").text();"payment-single"!==i&&"payment-multiple"!==i&&"payment-checkbox"!==i||t.append('<option value="'+s+'">'+e+"</option>")},paymentFieldAppendToDropdown:function(e,t){var i;"payment-quantity"!==t&&"payment-coupon"!==t&&"payment-subtotal"!==t||(i=v("#everest-forms-field-option-"+e+"-map_field"),["payment-checkbox","payment-multiple","payment-single","range-slider"].forEach(function(e){v(".everest-forms-field-"+e).each(function(){if("range-slider"===v(this).attr("data-field-type")){if("true"!==v(this).find(".evf-range-slider-preview").attr("data-enable-payment-slider"))return;var e='<option value="'+v(this).attr("data-field-id")+'">'+v(this).find(".label-title .text").text()+"</option>"}e='<option value="'+v(this).attr("data-field-id")+'">'+v(this).find(".label-title .text").text()+"</option>";i.append(e)})}))},conditionalLogicAppendFieldIntegration:function(i){var n=v("#"+i),o=n.index(),r=v(".evf-provider-conditional").find(".evf-conditional-field-select"),a=n.attr("data-field-type"),d=n.attr("data-field-id"),l=n.find(".label-title .text ").text();v.fn.insertAt=function(e,t){var i=v.makeArray(this.children().clone(!0));i.splice(t,0,e),this.empty().append(i)},r.each(function(s,e){var t=i.replace("everest-forms-field-",""),e=v(e).attr("name");t===e.substring(e.indexOf("[")+1,e.indexOf("]"))?v(".evf-admin-row .evf-admin-grid .everest-forms-field").each(function(){var e=v(this).data("field-type"),t=v(this).data("field-id"),i=v(this).find(".label-title span").first().text();field_to_be_restricted=[],field_to_be_restricted=["html","title","address","image-upload","file-upload","signature","divider","date-time","hidden","scale-rating","likert","yes-no",n.attr("data-field-type")],-1===v.inArray(e,field_to_be_restricted)&&r.eq(s).append('<option class="evf-conditional-fields" data-field_type="'+e+'" data-field_id="'+t+'" value="'+t+'">'+i+"</option>")}):(t='<option class="evf-conditional-fields" data-field_type="'+a+'" data-field_id="'+d+'" value="'+d+'">'+l+"</option>","html"!==a&&"title"!==a&&"address"!==a&&"image-upload"!==a&&"file-upload"!==a&&"date-time"!==a&&"hidden"!==a&&"likert"!==a&&"scale-rating"!==a&&"yes-no"!==a&&r.eq(s).insertAt(t,o))})},conditionalLogicRemoveField:function(e){v(".evf-field-conditional-field-select option[value = "+e+" ]").remove()},conditionalLogicRemoveFieldIntegration:function(e){v(".evf-provider-conditional .evf-conditional-field-select option[value = "+e+" ]").remove()},paymentFieldRemoveFromQuantity:function(e){v(".everest-forms-field-option-row-map_field select option[value = "+e+" ]").remove()},bindFieldSettings:function(){v("body").on("click",".everest-forms-preview .everest-forms-field, .everest-forms-preview .everest-forms-field .everest-forms-field-setting",function(e){e.preventDefault();e=v(this).closest(".everest-forms-field").attr("data-field-id");v(".everest-forms-tab-content").scrollTop(0),m.switchToFieldOptionPanel(e)})},toggleLabelEdit:function(e,t){v(e).toggleClass("everest-forms-hidden"),v(t).toggleClass("everest-forms-hidden"),v(t).is(":visible")&&v(t).focus()},bindToggleHandleActions:function(){v("body").on("click",".toggle-handle",function(e){var t=v(this).data("label"),i=v(this).data("input");v(i).is(":visible")||m.toggleLabelEdit(t,i)})},bindLabelEditInputActions:function(){v("body").on("focusout",".label-edit-input",function(e){var t=v(this).data("label");m.toggleLabelEdit(t,this)})},bindSyncedInputActions:function(){v("body").on("input",".sync-input",function(e){var t=v(this).val(),i=v(this).data("sync-targets");t&&i&&v(i).text(t)})}};m.init()}(jQuery,window.evf_data),jQuery(function(){"checked"!=jQuery("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email").attr("checked")&&jQuery("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email-wrap").nextAll().hide(),jQuery("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email").on("change",function(){"checked"!=jQuery(this).attr("checked")?jQuery("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email-wrap").nextAll().hide():jQuery("#everest-forms-panel-field-settingsemail-evf_send_confirmation_email-wrap").nextAll().show()}),jQuery("#everest-forms-panel-field-settings-enable_redirect_query_string-wrap input").on("change",function(){jQuery(this).is(":checked")?jQuery("#everest-forms-panel-field-settings-query_string-wrap").show():jQuery("#everest-forms-panel-field-settings-query_string-wrap").hide()});var e=jQuery("#everest-forms-panel-field-settings-redirect_to option:selected").val();"same"==e?(jQuery("#everest-forms-panel-field-settings-custom_page-wrap").hide(),jQuery("#everest-forms-panel-field-settings-enable_redirect_query_string-wrap").hide(),jQuery("#everest-forms-panel-field-settings-query_string-wrap").hide(),jQuery("#everest-forms-panel-field-settings-external_url-wrap").hide()):"custom_page"==e?(jQuery("#everest-forms-panel-field-settings-custom_page-wrap").show(),jQuery("#everest-forms-panel-field-settings-external_url-wrap").hide()):"external_url"==e&&(jQuery("#everest-forms-panel-field-settings-external_url-wrap").show(),jQuery("#everest-forms-panel-field-settings-custom_page-wrap").hide(),jQuery("#everest-forms-panel-field-settings-enable_redirect_query_string-wrap").hide(),jQuery("#everest-forms-panel-field-settings-query_string-wrap").hide()),jQuery("#everest-forms-panel-field-settings-redirect_to").on("change",function(){"same"==this.value?(jQuery("#everest-forms-panel-field-settings-custom_page-wrap").hide(),jQuery("#everest-forms-panel-field-settings-external_url-wrap").hide(),jQuery("#everest-forms-panel-field-settings-enable_redirect_query_string-wrap").hide(),jQuery("#everest-forms-panel-field-settings-query_string-wrap").hide()):"custom_page"==this.value?(jQuery("#everest-forms-panel-field-settings-custom_page-wrap").show(),jQuery("#everest-forms-panel-field-settings-enable_redirect_query_string-wrap").show(),jQuery("#everest-forms-panel-field-settings-external_url-wrap").hide(),jQuery("#everest-forms-panel-field-settings-enable_redirect_query_string").is(":checked")?jQuery("#everest-forms-panel-field-settings-query_string-wrap").show():jQuery("#everest-forms-panel-field-settings-query_string-wrap").hide()):"external_url"==this.value&&(jQuery("#everest-forms-panel-field-settings-custom_page-wrap").hide(),jQuery("#everest-forms-panel-field-settings-enable_redirect_query_string-wrap").hide(),jQuery("#everest-forms-panel-field-settings-query_string-wrap").hide(),jQuery("#everest-forms-panel-field-settings-external_url-wrap").show())}),jQuery(".evf-panel-field-options-button.evf-disabled-tab").hide(),jQuery(".everest-forms-conditional-field-settings-redirect_to").each(function(){var e=this.value;"custom_page"==e?(jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-custom_page").show(),jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-external_url").hide()):"external_url"==e?(jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-custom_page").hide(),jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-external_url").show()):(jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-custom_page").hide(),jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-external_url").hide())}),jQuery(document).on("change",".everest-forms-conditional-field-settings-redirect_to",function(){"custom_page"==this.value?(jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-custom_page").show(),jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-external_url").hide()):"external_url"==this.value?(jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-custom_page").hide(),jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-external_url").show()):(jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-custom_page").hide(),jQuery(this).parents(".evf-field-conditional-container").find(".everest-forms-conditional-field-settings-external_url").hide())})}),jQuery(function(c){c(document.body).on("init_add_fields_toogle",function(){c(".everest-forms-add-fields").on("click",".everest-forms-add-fields-group > a",function(e){e.preventDefault(),c(this).parent(".everest-forms-add-fields-group").toggleClass("closed").toggleClass("open")}),c(".everest-forms-add-fields").on("click",".everest-forms-add-fields-group a",function(){c(this).next(".evf-registered-buttons").stop().slideToggle()}),c(".everest-forms-add-fields-group.closed").each(function(){c(this).find(".evf-registered-buttons").hide()})}).trigger("init_add_fields_toogle"),c(document.body).on("click",".everest-forms-field-option .everest-forms-field-option-group > a",function(e){e.preventDefault(),c(this).parent(".everest-forms-field-option-group").toggleClass("closed").toggleClass("open")}),c(document.body).on("click",".everest-forms-field-option .everest-forms-field-option-group a",function(e){c(e.target).filter(":input, option, .sort").length||c(this).next(".everest-forms-field-option-group-inner").stop().slideToggle()}),c(document.body).on("init_field_options_toggle",function(){c(".everest-forms-field-option-group.closed").each(function(){c(this).find(".everest-forms-field-option-group-inner").hide()})}).trigger("init_field_options_toggle"),c(document).on("click",function(){c(".evf-smart-tag-lists").hide()}),c(".evf-smart-tag-lists").hide(),c(document.body).on("click",".evf-toggle-smart-tag-display",function(e){e.stopPropagation(),c(".evf-smart-tag-lists").hide(),c(".evf-smart-tag-lists ul").empty(),c(this).parent().find(".evf-smart-tag-lists").toggle("show");var t,i,e=c(this).data("type"),s=c(this).data("fields"),n=c(this),o=[],r=[],a=[];if(c(".evf-admin-row .evf-admin-grid .everest-forms-field").each(function(){var e,t=c(this).data("field-type"),i=c(this).data("field-id");"email"===t?(e=c(this).find(".label-title span").first().text(),r[i]=e):"phone"===t?(e=c(this).find(".label-title span").first().text(),a[i]=e):(t=c(this).find(".label-title span").first().text(),i,0),o[i]=c(this).find(".label-title span").first().text()}),"other"===e||"all"===e){var d=evf_data.smart_tags_other;for(l in d)c(n).parent().find(".evf-smart-tag-lists .evf-others").append('<li class = "smart-tag-field" data-type="other" data-field_id="'+l+'">'+d[l]+"</li>")}if("regex"==e&&evf_data.regex_expression_lists.forEach(function(e,t){c(n).parent().find(".evf-smart-tag-lists .evf-regex").append('<li class = "smart-tag-field" data-type="regex" data-field_id="'+e.value+'">'+e.text+"</li>")}),"fields"===e||"all"===e)if("email"===s)for(var l in Object.keys(r).length<1?c(n).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').addClass("everest-forms-hidden"):c(n).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').removeClass("everest-forms-hidden"),c(n).parent().find(".evf-smart-tag-lists .other-tag-title").remove(),c(n).parent().find(".evf-smart-tag-lists .evf-others").remove(),c(n).parent().find(".evf-smart-tag-lists").append('<div class="smart-tag-title other-tag-title">Others</div><ul class="evf-others"></ul>'),c(n).parent().find(".evf-smart-tag-lists .evf-others").append('<li class="smart-tag-field" data-type="other" data-field_id="admin_email">Site Admin Email</li><li class="smart-tag-field" data-type="other" data-field_id="user_email">User Email</li>'),r)c(n).parent().find(".evf-smart-tag-lists .evf-fields").append('<li class = "smart-tag-field" data-type="field" data-field_id="'+l+'">'+r[l]+"</li>");else if("phone"===s)for(var l in Object.keys(a).length<1?c(n).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').addClass("everest-forms-hidden"):c(n).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').removeClass("everest-forms-hidden"),c(n).parent().find(".evf-smart-tag-lists .other-tag-title").remove(),c(n).parent().find(".evf-smart-tag-lists .evf-others").remove(),a)c(n).parent().find(".evf-smart-tag-lists .evf-fields").append('<li class = "smart-tag-field" data-type="field" data-field_id="'+l+'">'+a[l]+"</li>");else for(var f in Object.keys(o).length<1?c(n).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').addClass("everest-forms-hidden"):c(n).parent().find('.evf-smart-tag-lists .smart-tag-title:not(".other-tag-title")').removeClass("everest-forms-hidden"),o)c(n).parent().find(".evf-smart-tag-lists .evf-fields").append('<li class = "smart-tag-field" data-type="field" data-field_id="'+f+'">'+o[f]+"</li>");"calculations"===e&&(t=["number","payment-single","range-slider","payment-checkbox","payment-multiple"],c(document).find(".everest-forms-field").each(function(){t.includes(c(this).attr("data-field-type"))&&c(n).parents(".everest-forms-field-option-row-calculation_field").attr("data-field-id")!==c(this).attr("data-field-id")&&c(n).parent().find(".evf-smart-tag-lists .calculations").append('<li class = "smart-tag-field" data-type="field" data-field_id="'+c(this).attr("data-field-id")+'">'+c(this).find(".label-title .text").text()+"</li>")})),"ai-fields"===e&&(i=["text"],c(document).find(".everest-forms-field").each(function(){i.includes(c(this).attr("data-field-type"))&&c(n).parents(".everest-forms-field-option-row-ai_chatbot_input").attr("data-field-id")!==c(this).attr("data-field-id")&&c(n).parent().find(".evf-smart-tag-lists .evf-fields-ai").append('<li class = "smart-tag-field" data-type="field" data-field_id="'+c(this).attr("data-field-id")+'">'+c(this).find(".label-title .text").text()+"</li>")}))}),c(document.body).on("click",".smart-tag-field",function(e){var t=c(this).data("field_id"),i=c(this).text(),s=c(this).data("type"),n=c(this).parent().parent().parent(),o=n.find("input[type=text]"),n=n.find("textarea");if("fullname"!==t&&"email"!==t&&"subject"!==t&&"message"!==t&&"other"!==s){for(var i=i.split(/[\s-_]/),r=0;r<i.length;r++)i[r]=0===r?i[r].charAt(0).toLowerCase()+i[r].substr(1):i[r].charAt(0).toUpperCase()+i[r].substr(1);t=(i=i.join(""))+"_"+t}"field"===s?(o.val(o.val()+'{field_id="'+t+'"}'),n.val(n.val()+'{field_id="'+t+'"}'),n.trigger("change")):"other"===s?(o.val(o.val()+"{"+t+"}"),n.val(n.val()+"{"+t+"}")):"regex"===s&&(o.val(o.val()+t.replace(i+"_","")),n.val(n.val()+t.replace(i+"_","")))}),c(document).on("change",".wp-list-table .everest-forms-toggle-form input",function(e){e.stopPropagation(),c.post(evf_data.ajax_url,{action:"everest_forms_enabled_form",security:evf_data.evf_enabled_form,form_id:c(this).data("form_id"),enabled:c(this).prop("checked")?1:0})}),c(document).on("change",".evf-content-email-settings .evf-toggle-switch input",function(e){var t=c(this),i=t.prop("checked"),s=t.data("connection-id");!1===i?(t.val(""),t.closest(".evf-content-email-settings").find(".email-disable-message").remove(),t.closest(".evf-content-section-title").find(".evf-enable-email-toggle").removeClass("everest-forms-hidden"),t.closest(".evf-content-section-title").siblings(".evf-content-email-settings-inner").addClass("everest-forms-hidden"),c('<p class="email-disable-message everest-forms-notice everest-forms-notice-info">'+evf_data.i18n_email_disable_message+"</p>").insertAfter(t.closest(".evf-content-section-title")),c('input[data-connection-id="'+s+'"]').prop("checked",!1)):!0===i&&(t.val("1"),t.closest(".evf-content-section-title").siblings(".evf-content-email-settings-inner").removeClass("everest-forms-hidden"),t.closest(".evf-content-email-settings").find(".email-disable-message").remove(),t.closest(".evf-content-section-title").find(".evf-enable-email-toggle").addClass("everest-forms-hidden"),c('input[data-connection-id="'+s+'"]').prop("checked",!0))}),c(document).on("change",".evf-email-toggle",function(e){var t=c(this),i=t.data("connection-id");(t.prop("checked")?(t.val("1"),c(".evf-content-email-settings").find('input[type="checkbox"][data-connection-id="'+i+'"]').prop("checked",!0)):(t.val(""),c(".evf-content-email-settings").find('input[type="checkbox"][data-connection-id="'+i+'"]').prop("checked",!1))).trigger("change")}),c(document).on("click",".everest-forms-min-max-date-format input",function(){var e,t=c(this).closest(".everest-forms-date").find(".everest-forms-min-date").val(),i=c(this).closest(".everest-forms-date").find(".everest-forms-min-date").val();c(this).is(":checked")?((e=c(this).parent().parent().parent().next(".everest-forms-min-max-date-range-format")).find('input[type="checkbox"]').is(":checked")?(e.next(".everest-forms-min-max-date-option").addClass("everest-forms-hidden"),e.next().next(".everest-forms-min-max-date-range-option").removeClass("everest-forms-hidden")):(e.next(".everest-forms-min-max-date-option").removeClass("everest-forms-hidden"),e.next().next(".everest-forms-min-max-date-range-option").addClass("everest-forms-hidden")),c(this).parent().parent().parent().next(".everest-forms-min-max-date-range-format").removeClass("everest-forms-hidden"),""===t&&c(".everest-forms-min-date").addClass("flatpickr-field").flatpickr({disableMobile:!0,onChange:function(e,t,i){c(".everest-forms-min-date").val(t)},onOpen:function(e,t,i){i.set("maxDate",c(".everest-forms-max-date").val())}}),""===i&&c(".everest-forms-max-date").addClass("flatpickr-field").flatpickr({disableMobile:!0,onChange:function(e,t,i){c(".everest-forms-max-date").val(t)},onOpen:function(e,t,i){i.set("minDate",c(".everest-forms-min-date").val())}})):(c(this).parent().parent().parent().next().next(".everest-forms-min-max-date-option").addClass("everest-forms-hidden"),c(this).parent().parent().parent().next().next().next(".everest-forms-min-max-date-range-option").addClass("everest-forms-hidden"),c(this).parent().parent().parent().next(".everest-forms-min-max-date-range-format").addClass("everest-forms-hidden"))}),c(document).on("click",'.everest-forms-min-max-date-range-format input[type="checkbox"]',function(){c(this).is(":checked")?(c(this).parent().parent().parent().next(".everest-forms-min-max-date-option").addClass("everest-forms-hidden"),c(this).parent().parent().parent().next().next(".everest-forms-min-max-date-range-option").removeClass("everest-forms-hidden")):(c(this).parent().parent().parent().next(".everest-forms-min-max-date-option").removeClass("everest-forms-hidden"),c(this).parent().parent().parent().next().next(".everest-forms-min-max-date-range-option").addClass("everest-forms-hidden"))})}),jQuery(function(o){o(document).ready(function(){const e=o("#everest-forms-panel-field-settings-evf-custom-css");var t=wp.CodeMirror.fromTextArea(e[0],{indentUnit:2,indentWithTabs:!0,inputStyle:"contenteditable",lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0,continueComments:!0,extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-/":"toggleComment","Cmd-/":"toggleComment","Alt-F":"findPersistent","Ctrl-F":"findPersistent","Cmd-F":"findPersistent"},direction:"ltr",gutters:[],mode:"text/css",lint:!1,autoCloseBrackets:!0,autoCloseTags:!0,autoRefresh:!0,matchTags:{bothTags:!0},tabSize:2,theme:"default"});t.on("change",function(){e.html(t.getValue().replace(/<\s*script/gi,"").replace(/\s+on\w+\s*=/gi," "))});const i=o("#everest-forms-panel-field-settings-evf-custom-js");var s=wp.CodeMirror.fromTextArea(i[0],{indentUnit:2,indentWithTabs:!0,inputStyle:"contenteditable",lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0,continueComments:!0,extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-/":"toggleComment","Cmd-/":"toggleComment","Alt-F":"findPersistent","Ctrl-F":"findPersistent","Cmd-F":"findPersistent"},direction:"ltr",gutters:[],mode:"javascript",lint:!1,autoCloseBrackets:!0,autoCloseTags:!0,autoRefresh:!0,matchTags:{bothTags:!0},tabSize:2});function n(){o("#everest-forms-panel-field-settings-evf-enable-custom-css").is(":checked")?o("#everest-forms-panel-field-settings-evf-custom-css-wrap").show(500):o("#everest-forms-panel-field-settings-evf-custom-css-wrap").hide(500),o("#everest-forms-panel-field-settings-evf-enable-custom-js").is(":checked")?o("#everest-forms-panel-field-settings-evf-custom-js-wrap").show(500):o("#everest-forms-panel-field-settings-evf-custom-js-wrap").hide(500)}s.on("change",function(){i.html(s.getValue().replace(/<\s*script/gi,"").replace(/\s+on\w+\s*=/gi," "))}),o("#everest-forms-panel-field-settings-evf-enable-custom-css, #everest-forms-panel-field-settings-evf-enable-custom-js").on("change",e=>{n()}),n()})});