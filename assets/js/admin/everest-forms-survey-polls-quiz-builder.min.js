!function(d,i){var f,v,p={settings:{fieldReportData:{},charts:{},spinner:'<div class="evf-survey-loader"><i class="evf-loading evf-loading-active" /></div>'},init:function(){f=this.settings,p.bindUIActions()},bindUIActions:function(){var e=d(document).find('.everest-forms-survey-block-container[data-page-type="single-page"]'),t=d(e).attr("data-form-id");0<e.length&&(v=JSON.parse(d(e).attr("data-field-ids")),p.showSurveyQuestionReport(e,v[0],!1,t,0)),d(".everest-forms-field-option-row-input_type select").trigger("change"),d(document).on("ready",function(e){d(".everest-forms-survey-selection select#everest-forms-survey-question-list").trigger("change")}),d(document.body).on("init_field_options_toggle",function(e){p.choicesInit()}),d(document).on("click",".evf-survey-choices a.add",function(e){p.fieldChoiceAdd(e,this)}),d(document).on("click",".evf-survey-choices a.remove",function(e){p.fieldChoiceDelete(e,this)}),d(document).on("click",".add_feedback",function(e){p.feedbackAdd(e,this)}),d(document).on("click",".remove_feedback",function(e){p.feedbackRemove(e,this)}),d(document).on("click","#everest-forms-print-entried-summary",function(){var e=d(this).closest(".everest-forms-survey-block-container");d(e).printThis({debug:!1,importCSS:!0,importStyle:!1,printContainer:!0,pageTitle:"",removeInline:!1,printDelay:333,header:null,footer:null,base:!1,formValues:!0,canvas:!0,doctypeString:"...",removeScripts:!1,copyTagClasses:!1})}),d(document).on("click","#everest-forms-entried-summary-specific-field",function(){var e=d(this).closest(".everest-forms-survey-block");d(e).printThis({debug:!1,importCSS:!0,importStyle:!1,printContainer:!0,pageTitle:"",removeInline:!1,printDelay:333,header:null,footer:null,base:!1,formValues:!0,canvas:!0,removeScripts:!1,copyTagClasses:!1})}),d(document).on("input",".everest-forms-field-option-likert .evf-survey-choices input",function(){var e=d(this).closest(".evf-survey-choices").data("field-id"),t=d(this).closest("ul");p.fieldChoiceUpdate(e),"likert_rows"===t.data("choice-type")&&p.requiredFieldMessageInputFieldUpdate(t,d(this).closest("li"),this)}),d(document).on("change",".everest-forms-field-option-row-input_type select",function(){var e=d(this).parent().data("field-id");p.fieldChoiceUpdate(e)}),d(document).on("change",".evf-survey-choices input.default",function(e){var t=d(this).closest(".evf-survey-choices").data("field-id");d(this).parent("li").siblings().children(".default").prop("checked",!1),p.fieldChoiceUpdate(t)}),d(document).on("keyup",".everest-forms-field-option-row-highest_rating_text input",function(e){p.scaleRatingText(e,this,"highest")}),d(document).on("keyup",".everest-forms-field-option-row-lowest_rating_text input",function(e){p.scaleRatingText(e,this,"lowest")}),d(document.body).on("blur",".evf-input-highest-rating-point[type=number], .evf-input-lowest-rating-point[type=number], .score_to[type=number]",function(){d(".evf_error_tip").fadeOut("100",function(){d(this).remove()})}).on("change click",".evf-input-highest-rating-point[type=number]",function(e){var t=parseInt(d(this).val(),10),o=parseInt(d(this).parent().next().find(".evf-input-lowest-rating-point[name*=lowest_rating_point]").val(),10);100<t?(d(this).val("100"),p.scaleRatingPoint(e,d(this),"highest")):t<=o&&(d(this).val(o+1),p.scaleRatingPoint(e,d(this),"highest"))}).on("keyup click",".evf-input-highest-rating-point[type=number]",function(){var e=parseInt(d(this).val(),10),t=parseInt(d(this).parent().next().find(".evf-input-lowest-rating-point[name*=lowest_rating_point]").val(),10);100<e?d(document.body).triggerHandler("evf_add_error_tip",[d(this),"i18n_field_highest_rating_greater_than_max_value_error",i]):e<=t?d(document.body).triggerHandler("evf_add_error_tip",[d(this),"i18n_field_greater_than_lowest_point_error",i]):d(document.body).triggerHandler("evf_remove_error_tip",[d(this),"i18n_field_highest_rating_greater_than_max_value_error"])}).on("change click",".evf-input-lowest-rating-point[type=number]",function(e){var t=parseInt(d(this).val(),10),o=parseInt(d(this).parent().prev().find(".evf-input-highest-rating-point[name*=highest_rating_point]").val(),10);t<0&&(d(this).val("0"),p.scaleRatingPoint(e,d(this),"lowest")),o<=t&&(d(this).val(o-1),p.scaleRatingPoint(e,d(this),"lowest"))}).on("keyup click",".evf-input-lowest-rating-point[type=number]",function(){var e=parseInt(d(this).val(),10),t=parseInt(d(this).parent().prev().find(".evf-input-highest-rating-point[name*=highest_rating_point]").val(),10);e<0&&d(document.body).triggerHandler("evf_add_error_tip",[d(this),"i18n_field_lowest_rating_lower_than_min_value_error",i]),t<=e?d(document.body).triggerHandler("evf_add_error_tip",[d(this),"i18n_field_less_than_highest_point_error",i]):d(document.body).triggerHandler("evf_remove_error_tip",[d(this),"i18n_field_less_than_highest_point_error"])}),d(document).on("keyup input",".everest-forms-field-option-row-highest_rating_point input",function(e){p.scaleRatingPoint(e,this,"highest")}),d(document).on("keyup input",".everest-forms-field-option-row-lowest_rating_point input",function(e){p.scaleRatingPoint(e,this,"lowest")}),d(document).on("change","#everest-forms-panel-field-settings-enable_quiz",function(e){p.showQuizFieldOption(e,this)}),d(document).on("change","#everest-forms-panel-field-settings-enable_survey",function(e){p.showSurveyFieldOption(e,this)}),d(document).on("change",".evf_quiz_enable_container input",function(e){p.showQuizOptionField(e,this)}),d(document).on("change",".evf_survey_enable_container input",function(e){p.EnableSurveyOptionField(e,this)}),d(document).on("change","#everest-forms-survey-question-list",function(e){var t=d(this).val();p.showSurveyQuestionReport(d(this).closest(".everest-forms-survey-header"),t)}),d(document).on("change","#survey-filter-by-form",function(e){p.showSurveyQuestionReportByForm(e,this)}),d(document).on("change",".evf-correct-answers input[type=radio]",function(e){p.clickOneRadio(e,this)}),d(document).on("input",'.evf-choices-list input[type="text"]',function(e){p.livePreviewOnCorrectAnswer(e,this)}),d(document).on("click",".evf-choices-list .remove",function(e){p.removeRowCorrectAnswer(e,this)}),d(document).on("click",".evf-choices-list .add",function(e){p.addNewRowCorrectAnswer(e,this)}),d(document).on("change","#everest-forms-panel-field-settings-over_all_feedback",function(e){p.showQuizOverAllOption(e,this)}),d(document).on("change","#everest-forms-panel-field-settings-quiz_reporting",function(e){p.showQuizReportingOption(e,this)}),d(document).on("click",".survey-block-statistic-overview button",function(e){var t=d(this).data("field-id"),o=d(this).data("type");d(this).siblings().removeClass("current-tab-active"),d(this).addClass("current-tab-active"),f.charts[t].destroy();var i=d(this).parent().siblings(".survey-block-chart-overview").find(".everest-forms-chart-canvas").get(0).getContext("2d");p.generateChart(t,o,i)}),d(document).on("keyup input",".score_to",function(e){p.changeScoreFrom(e,this)}),d(document).on("change click",".score_to",function(e){var t=d(this),o=parseInt(t.val()),i=parseInt(t.closest(".evf-form-group").find(".score_from").val());o<=i&&""!=o&&t.val(i+1),100<o&&t.val(100),d(document.body).triggerHandler("evf_remove_error_tip",[t,"i18n_field_to_score_is_empty_error"])}),d(document).on("change",".everest-forms-field-option-row-style select",function(){var e=d(this),t=e.val(),e=e.parent().data("field-id"),o=d("#everest-forms-field-option-row-"+e+'-yes_icon_color button[class="button wp-color-result"]').css("backgroundColor"),i=d("#everest-forms-field-option-row-"+e+'-no_icon_color button[class="button wp-color-result"]').css("backgroundColor"),s=d("#everest-forms-field-option-row-"+e+'-yes_label input[type="text"]').val(),r=d("#everest-forms-field-option-row-"+e+'-no_label input[type="text"]').val(),e=d("#everest-forms-field-"+e).find(".yes-no-preview"),n="";p.checkSelectedYesNoVariation(t),"with_icon"===t?(e.removeClass("icon-text").removeClass("text-only"),n='<span class="yes yes-no-icon"><svg width="32" height="32" viewBox="0 0 24 24" style="fill:'+o+'"><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z"></path></svg></span>',n+='<span class="no yes-no-icon"><svg width="32" height="32" viewBox="0 0 24 24" style="fill:'+i+'"><path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v1.91l.01.01L1 14c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"></path></svg></span>'):"with_text"===t?(e.addClass(" text-only").removeClass("icon-text"),n='<input type="text" value="'+s+'" disabled /><input type="text" value="'+r+'" disabled />'):"with_icon_text"===t&&(e.addClass(" icon-text").removeClass("text-only"),n='<span class="yes yes-no-icon"><svg width="32" height="32" viewBox="0 0 24 24" style="fill:'+o+'"><path d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z"></path></svg><label>'+s+"</label></span>",n+='<span class="no yes-no-icon"><svg width="32" height="32" viewBox="0 0 24 24" style="fill:'+i+'"><path d="M15 3H6c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v1.91l.01.01L1 14c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06L9.83 23l6.59-6.59c.36-.36.58-.86.58-1.41V5c0-1.1-.9-2-2-2zm4 0v12h4V3h-4z"></path></svg><label>'+r+"</label></span>"),e.html(n)}),d(document).on("click",".everest-forms-field.everest-forms-field-yes-no",function(){var e=d(this).data("field-id"),e=d("#everest-forms-field-option-"+e+" option:selected").val();p.checkSelectedYesNoVariation(e)}),d(document).on("input",'.everest-forms-field-option-row-yes_label input[type="text"]',function(){var e=d(this).parent().data("field-id"),t=d(this).val();d("#everest-forms-field-"+e+" .yes-no-preview :input:first").val(t),d("#everest-forms-field-"+e+" .yes-no-preview .yes.yes-no-icon label").text(t)}),d(document).on("input",'.everest-forms-field-option-row-no_label input[type="text"]',function(){var e=d(this).parent().data("field-id"),t=d(this).val();d("#everest-forms-field-"+e+" .yes-no-preview :input:last").val(t),d("#everest-forms-field-"+e+" .yes-no-preview .no.yes-no-icon label").text(t)}),d(document).on("click",".everest-forms-field-yes-no",function(){d(".everest-forms-field-option-row-yes_icon_color input.evf-colorpicker").wpColorPicker({change:function(e){var t=d(this),o=t.val(),t=t.closest(".everest-forms-field-option-row").data("field-id");d("#everest-forms-field-"+t+" .yes svg").css("fill",o)}})}),d(document).on("click",".everest-forms-field-yes-no",function(){d(".everest-forms-field-option-row-no_icon_color input.evf-colorpicker").wpColorPicker({change:function(e){var t=d(this),o=t.val(),t=t.closest(".everest-forms-field-option-row").data("field-id");d("#everest-forms-field-"+t+" .no svg").css("fill",o)}})})},changeScoreFrom:function(e,t){t=d(t);to_score=parseInt(t.val()),value="",to_score<100&&(value=to_score+1,t.closest(".evf-form-group").next().find(".score_from").val(value)),(from_score=parseInt(t.closest(".evf-form-group").find(".score_from").val()))>=to_score?d(document.body).triggerHandler("evf_add_error_tip",[t,"i18n_field_from_score_greater_than_to_score",i]):d(document.body).triggerHandler("evf_remove_error_tip",[t,"i18n_field_from_score_greater_than_to_score"])},clickOneRadio:function(e,t){t=d(t);t.closest(".evf-correct-answers").find('input[type="radio"]').prop("checked",!1),t.prop("checked",!0)},addNewRowCorrectAnswer:function(e,t){var t=d(t),o=t.closest("li").attr("data-key"),i=t.closest("li").next("li").attr("data-key"),s=t.closest("li").next("li").children(".label").val(),r=t.closest(".evf-choices-list").attr("data-field-id");(current=t.closest(".everest-forms-field-option-group-basic").siblings(".everest-forms-field-option-group-quiz").find(".everest-forms-field-option-row-correct_answer .evf-correct-answers").find("li[data-key='"+o+"']").clone()).attr("data-key",i),current.find("input").attr("name","form_fields["+r+"][correct_answer]["+i+"]"),current.find("span").text(s),d(current).insertAfter(d(".everest-forms-field-option-row-correct_answer .evf-correct-answers").find("li[data-key='"+o+"']"))},removeRowCorrectAnswer:function(e,t){var t=d(t),o=t.closest("li").attr("data-key");1<t.closest(".evf-choices-list").find("li").length&&t.closest(".everest-forms-field-option-group-basic").siblings(".everest-forms-field-option-group-quiz").find(".everest-forms-field-option-row-correct_answer .evf-correct-answers").find("li[data-key='"+o+"']").remove()},livePreviewOnCorrectAnswer:function(e,t){var t=d(t),o=t.closest("li").attr("data-key");0<d(".everest-forms-field-option-row-correct_answer .evf-correct-answers").length&&t.closest(".everest-forms-field-option-group-basic").siblings(".everest-forms-field-option-group-quiz").find(".everest-forms-field-option-row-correct_answer .evf-correct-answers").find("li[data-key='"+o+"']").find("span").text(t.val())},showSurveyQuestionReportByForm:function(e,t){var t=d(t),o=t.val();t.siblings("i").remove(),t.siblings(".everest-forms-survey-block").remove(),d(f.spinner).insertAfter(t),o&&(o=i.admin_url+"admin.php?page=evf-entries&view=all-report&form-id="+o,window.location.href=o,t.siblings(".evf-survey-loader").remove())},showSurveyQuestionReport:function(s,r,n,a,l){var c=d(s),e=(n=void 0===n||n,a=(a=void 0!==a&&a)||d("#filter-by-form").val(),n&&c.siblings(".everest-forms-survey-block").remove(),{action:"everest_forms_survey_generate_report",field_id:r,form_id:a,security:i.ajax_nonce});n?(c.siblings(".evf-survey-loader").remove(),d(f.spinner).insertAfter(c)):c.append(f.spinner),d.ajax({url:i.ajax_url,data:e,type:"POST",success:function(e){t=n?(c.siblings(".evf-survey-loader").remove(),d(e.data.html).insertAfter(c)):(c.find(".evf-survey-loader").remove(),d(e.data.html).appendTo(c)),d(t).find("#survery-circle-"+r).length&&(i=d("#survery-circle-"+r).data("value"),(o=new ProgressBar.Circle("#survery-circle-"+r,{color:"#333840",strokeWidth:4,trailWidth:4,easing:"easeInOut",duration:1400,text:{autoStyleContainer:!1},from:{color:"#8e42eb",width:4},to:{color:"#8e42eb",width:4},step:function(e,t){t.path.setAttribute("stroke",e.color),t.path.setAttribute("stroke-width",e.width);e=Math.round(100*t.value());0===e?t.setText(""):t.setText(e)}})).text.style.fontFamily='"Raleway", Helvetica, sans-serif',o.text.style.fontSize="2rem",o.animate(i/100)),f.fieldReportData[r]=e.data.report;var t,o,i=d(t).find(".survey-block-chart-overview .everest-forms-chart-canvas");0!==i.length&&(o=i.get(0).getContext("2d"),p.generateChart(r,"bar",o)),v&&v.length>l+1&&(l++,p.showSurveyQuestionReport(s,v[l],n,a,l))}})},generateChart:function(e,t,o){var i=!1;null==(reportData=f.fieldReportData[e])&&undefined==typeof reportData||("bar"===t?i={type:"bar",data:{labels:Object.keys(reportData),datasets:[{label:"Data",hoverBackgroundColor:randomColor({luminosity:"light",count:Object.values(reportData).length}),backgroundColor:randomColor({luminosity:"light",count:Object.values(reportData).length}),data:Object.values(reportData)}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},tooltips:{callbacks:{label:function(e){return e.yLabel+"%"}}},scales:{xAxes:[{gridLines:{display:!1},ticks:{fontSize:14,callback:function(e){return"string"==typeof e&&20<e.length?e.substring(0,20)+"...":e}}}],yAxes:[{ticks:{min:0,max:100,stepSize:20,fontColor:"#999999",fontSize:11,callback:function(e){return e+"%"}}}]}}}:"pie"===t?i={type:"pie",data:{labels:Object.keys(reportData),datasets:[{hoverBackgroundColor:"#2b8fd2",data:Object.values(reportData),backgroundColor:randomColor({luminosity:"light",count:Object.values(reportData).length})}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{position:"right",labels:{fontSize:14,padding:15,generateLabels:function(c){var d=c.data;return d.labels.length&&d.datasets.length?d.labels.map(function(e,t){var o=c.getDatasetMeta(0),i=d.datasets[0],s=o.data[t],s=s&&s.custom||{},r=Chart.helpers.valueAtIndexOrDefault,n=c.options.elements.arc,a=s.backgroundColor||r(i.backgroundColor,t,n.backgroundColor),l=s.borderColor||r(i.borderColor,t,n.borderColor),s=s.borderWidth||r(i.borderWidth,t,n.borderWidth);return{text:e=20<e.length?e.substring(0,20)+"...":e,fillStyle:a,strokeStyle:l,lineWidth:s,hidden:isNaN(i.data[t])||o.data[t].hidden,index:t}}):[]}}},tooltips:{callbacks:{label:function(e,t){return t.labels[e.index]+" - "+t.datasets[0].data[e.index]+"%"}}}}}:"line"===t&&(i={type:"line",data:{labels:Object.keys(reportData),datasets:[{fill:!1,data:Object.values(reportData)}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!1},tooltips:{callbacks:{label:function(e,t){return t.datasets[0].data[e.index]+"%"}}},scales:{xAxes:[{gridLines:{display:!1},ticks:{fontSize:14,callback:function(e){return"string"==typeof e&&20<e.length?e.substring(0,20)+"...":e}}}],yAxes:[{ticks:{min:0,max:100,stepSize:20,fontColor:"#999999",fontSize:11,callback:function(e){return e+"%"}}}]}}})),i&&(f.charts[e]=new Chart(o,i))},showQuizOptionField:function(e,t){e.preventDefault();var o=d(t);!0===o.closest(".quiz-option").siblings(".survey-option").children(".evf_survey_enable_container").children("input").prop("checked")&&!0===o.prop("checked")?(o.closest(".quiz-option").children(".everst-forms-field-quiz-settings").removeClass("everest-forms-hidden"),o.closest(".quiz-option").children(".everst-forms-field-quiz-settings").addClass("everest-forms-show"),d.alert({title:!1,content:"You do have survey enabled for this field. Do you want to change it on Quiz?",icon:"dashicons dashicons-info",type:"blue",closeIcon:!1,backgroundDismiss:!1,buttons:{Yes:function(){o.closest(".quiz-option").siblings(".survey-option").children(".evf_survey_enable_container").children("input").prop("checked",!1),o.prop("checked",!0)},No:function(){o.prop("checked",!1),o.closest(".quiz-option").children(".everst-forms-field-quiz-settings").hasClass("everest-forms-show")&&o.closest(".quiz-option").children(".everst-forms-field-quiz-settings").removeClass("everest-forms-show").addClass("everest-forms-hidden")}}})):!0===o.prop("checked")?(o.closest(".quiz-option").children(".everst-forms-field-quiz-settings").removeClass("everest-forms-hidden"),o.closest(".quiz-option").children(".everst-forms-field-quiz-settings").addClass("everest-forms-show")):(o.closest(".quiz-option").children(".everst-forms-field-quiz-settings").removeClass("everest-forms-show"),o.closest(".quiz-option").children(".everst-forms-field-quiz-settings").addClass("everest-forms-hidden"))},EnableSurveyOptionField:function(e,t){e.preventDefault();var o=d(t);!0===o.closest(".survey-option").siblings(".quiz-option").children(".evf_quiz_enable_container").children("input").prop("checked")&&d.alert({title:!1,content:"You do have Quiz enabled for this field. Do you want to change it on Survey?",icon:"dashicons dashicons-info",type:"blue",closeIcon:!1,backgroundDismiss:!1,buttons:{Yes:function(){o.closest(".survey-option").siblings(".quiz-option").children(".evf_quiz_enable_container").children("input").prop("checked",!1),o.closest(".survey-option").siblings(".quiz-option").children(".everst-forms-field-quiz-settings").hasClass("everest-forms-show")&&o.closest(".survey-option").siblings(".quiz-option").children(".everst-forms-field-quiz-settings").removeClass("everest-forms-show").addClass("everest-forms-hidden"),o.prop("checked",!0)},No:function(){o.prop("checked",!1)}}})},showQuizFieldOption:function(e,t){e.preventDefault();var o=d(t);!0===o.prop("checked")?(d(".quiz-option .evf_quiz_enable_container input").prop("checked",!0),!0===d("#everest-forms-panel-field-settings-enable_survey").prop("checked")?d.alert({title:!1,content:"You do have survey forms. Do you want to change it on Quiz Form?",icon:"dashicons dashicons-info",closeIcon:!1,backgroundDismiss:!1,type:"blue",buttons:{Yes:function(){d(".quiz-option").children(".everst-forms-field-quiz-settings").removeClass("everest-forms-hidden").addClass("everest-forms-show"),d("#everest-forms-panel-field-settings-enable_survey").prop("checked",!1),d(".survey-option .evf_survey_enable_container input").prop("checked",!1),o.prop("checked",!0),o.closest(".evf-quiz-section").children(".evf-quiz-settings").hasClass("everest-forms-hidden")&&o.closest(".evf-quiz-section").children(".evf-quiz-settings").removeClass("everest-forms-hidden").addClass("everest-forms-show")},No:function(){o.prop("checked",!1),d(".quiz-option .evf_quiz_enable_container input").prop("checked",!1),o.closest(".evf-quiz-section").children(".evf-quiz-settings").hasClass("everest-forms-show")&&o.closest(".evf-quiz-section").children(".evf-quiz-settings").removeClass("everest-forms-show").addClass("everest-forms-hidden")}}}):o.closest(".evf-quiz-section").children(".evf-quiz-settings").toggleClass("everest-forms-hidden everest-forms-show")):(d(".quiz-option .evf_quiz_enable_container input").prop("checked",!1),o.closest(".evf-quiz-section").children(".evf-quiz-settings").hasClass("everest-forms-show")&&o.closest(".evf-quiz-section").children(".evf-quiz-settings").removeClass("everest-forms-show").addClass("everest-forms-hidden"))},showQuizOverAllOption:function(e,t){t=d(t);1==t.prop("checked")?(t.closest(".everest-forms-overall-feedback").addClass("feedback-enabled"),t.closest(".everest-forms-overall-feedback").children(".overall-feedback-options-list").removeClass("everest-forms-hidden").addClass("everest-forms-show")):(t.closest(".everest-forms-overall-feedback").removeClass("feedback-enabled"),t.closest(".everest-forms-overall-feedback").children(".overall-feedback-options-list").removeClass("everest-forms-show").addClass("everest-forms-hidden"))},showQuizReportingOption:function(e,t){t=d(t);1==t.prop("checked")?t.closest(".evf-quiz-reporting").children(".evf-quiz-reporting-options").removeClass("everest-forms-hidden").addClass("everest-forms-show"):t.closest(".evf-quiz-reporting").children(".evf-quiz-reporting-options").removeClass("everest-forms-show").addClass("everest-forms-hidden")},showSurveyFieldOption:function(e,t){e.preventDefault();var o=d(t);!0===o.prop("checked")?(d(".survey-option .evf_survey_enable_container input").prop("checked",!0),!0===d("#everest-forms-panel-field-settings-enable_quiz:checked").prop("checked")&&d.alert({title:!1,content:"You do have Quiz form. Do you want to change it on Survey Form?",icon:"dashicons dashicons-info",type:"blue",closeIcon:!1,backgroundDismiss:!1,buttons:{Yes:function(){d("#everest-forms-panel-field-settings-enable_quiz").prop("checked",!1),d(".quiz-option .evf_quiz_enable_container input").prop("checked",!1),o.prop("checked",!0),d(".evf-quiz-settings").hasClass("everest-forms-show")&&(d('.evf-quiz-settings input[type="checkbox"]').prop("checked",!1),d(".evf-quiz-settings").removeClass("everest-forms-show").addClass("everest-forms-hidden")),d(".everst-forms-field-quiz-settings").hasClass("everest-forms-show")&&(d('.evf-quiz-settings input[type="text"]').val(""),d('.evf-quiz-settings input[type="number"]').val(""),d('.evf-quiz-settings input[type="radio"]').prop("checked",!1),d('.evf-quiz-settings input[type="checkbox"]').prop("checked",!1),d(".everst-forms-field-quiz-settings").removeClass("everest-forms-show").addClass("everest-forms-hidden"))},No:function(){o.prop("checked",!1),d(".survey-option .evf_survey_enable_container input").prop("checked",!1)}}})):d(".survey-option .evf_survey_enable_container input").prop("checked",!1)},scaleRatingText:function(e,t,o){e.preventDefault();var i,e=d(t);previewVal=e.val(),("lowest"===o?(i=e.closest(".everest-forms-field-option-row-lowest_rating_text").attr("data-field-id"),d("#everest-forms-field-"+i).find(".lowest-rating")):(i=e.closest(".everest-forms-field-option-row-highest_rating_text").attr("data-field-id"),d("#everest-forms-field-"+i).find(".highest-rating"))).text(previewVal)},scaleRatingPoint:function(e,t,o){e.preventDefault();var e=d(t),t=e.closest(".everest-forms-field-option-row-"+o+"_rating_point").data("field-id"),i=d("#everest-forms-field-"+t);if(lowest_point=parseInt(d("#everest-forms-field-option-"+t+"-lowest_rating_point").val()),hightest_point=parseInt(d("#everest-forms-field-option-"+t+"-highest_rating_point").val()),ratingDiff=hightest_point-lowest_point,previewVal=e.val(),hightest_point>lowest_point){d("#everest-forms-field-"+t).find(".everest-forms-scale-rating-table").find(".highest-rating").parent("th").attr("colspan",ratingDiff+1),i.find(".everest-forms-scale-rating-table tbody tr").empty();for(var s=lowest_point;s<=hightest_point;s++)i.find(".everest-forms-scale-rating-table tbody tr").append('<td><input type="radio" disabled><label>'+s+"</label></td>")}},choicesInit:function(){d("ul.evf-survey-choices").sortable({items:"li",axis:"y",helper:".sort",scrollSensitivity:40})},fieldChoiceAdd:function(e,t){e.preventDefault();var e=d(t),t=e.closest("li").clone(),o=(t.find("input").val(""),e.closest(".evf-survey-choices")),i=o.data("field-id"),s=o.attr("data-next-id"),r=o.attr("data-choice-type");t.attr("data-key",s),t.find(".default").attr("name","form_fields["+i+"]["+r+"]["+s+"][default]"),t.find(".label").attr("name","form_fields["+i+"]["+r+"]["+s+"]"),e.closest("li").after(t),s++,e.closest(".evf-survey-choices").attr("data-next-id",s),p.fieldChoiceUpdate(i),"likert_rows"===o.data("choice-type")&&(r=e.closest("li"),p.requiredFieldMessageInputFieldAdd(o,r,t))},fieldChoiceDelete:function(e,t){e.preventDefault();var e=d(t),t=e.closest(".evf-survey-choices"),o=t.data("field-id");"1"==e.parent().parent().find("li").length?d.alert({title:!1,content:evf_data.i18n_row_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{ok:{text:evf_data.i18n_ok,btnClass:"btn-confirm",keys:["enter"]}}}):("likert_rows"===t.data("choice-type")&&(t=e.parent().data("key"),p.requiredFieldMessageInputFieldDelete(o,t)),e.parent().remove(),p.fieldChoiceUpdate(o))},requiredFieldMessageInputFieldUpdate:function(e,t,o){t=t.data("key"),e=e.data("field-id");d("#everest-forms-field-option-row-"+e+"-required-field-message-"+t).find("label")[0].firstChild.nodeValue=d(o).val()},requiredFieldMessageInputFieldAdd:function(e,t,o){var e=e.data("field-id"),t=t.data("key"),i=o.data("key"),s=d("#everest-forms-field-option-row-"+e+"-required-field-message-"+t),r=s.clone(),t="everest-forms-field-option-row-required-field-message-"+t,n="everest-forms-field-option-row-required-field-message-"+i,t=(r.attr("id","everest-forms-field-option-row-"+e+"-required-field-message-"+i).removeClass(t).addClass(n),"everest-forms-field-option-"+e+"-required-field-message-"+i),n=o.find("input").val(),o=(r.find("label").attr("for",t),r.find("label")[0].firstChild.nodeValue=n,r.find("label").find("i").tooltipster({onlyOne:!1,position:"bottom",content:"Enter a message to show for this row if it's required."}),"everest-forms-field-option-"+e+"-required-field-message-"+i),t="form_fields["+e+"][required-field-message-"+i+"]";r.find("input").attr("id",o).attr("name",t).val("This field is required."),s.after(r)},requiredFieldMessageInputFieldDelete:function(e,t){d("#everest-forms-field-option-row-"+e+"-required-field-message-"+t).remove()},feedbackAdd:function(e,t){e.preventDefault();var o,e=d(t);100<=e.siblings(".evf-form-group").find(".score_to").last().val()?d.alert({title:!1,content:"You can only add feedback for the score 100% or below.",icon:"dashicons dashicons-info",type:"blue",buttons:{ok:{text:evf_data.i18n_ok,btnClass:"btn-confirm",keys:["enter"]}}}):""===e.siblings(".evf-form-group").find(".score_to").last().val()?d(document.body).triggerHandler("evf_add_error_tip",[e.siblings(".evf-form-group").find(".score_to").last(),"i18n_field_to_score_is_empty_error",i]):((t=e.siblings(".evf-form-group").last().clone()).find("input").val(""),t.find("textarea").val(""),o=e.closest(".overall-feedback-option").attr("data-next-id"),t.attr("data-key",o),t.find(".score_from").attr("name","settings[score_feedback]["+o+"][from]"),t.find(".score_from").attr("value",parseInt(e.siblings(".evf-form-group").find(".score_to").last().val())+1),t.find(".score_to").attr("name","settings[score_feedback]["+o+"][to]"),t.find(".feedback-options-message").attr("name","settings[score_feedback]["+o+"][feedback]"),e.siblings(".evf-form-group").last().after(t),o++,e.closest(".overall-feedback-option").attr("data-next-id",o))},feedbackRemove:function(e,t){e.preventDefault();e=d(t);"1"==e.closest(".overall-feedback-option").find(".evf-form-group").length?d.alert({title:!1,content:evf_data.i18n_row_locked_msg,icon:"dashicons dashicons-info",type:"blue",buttons:{ok:{text:evf_data.i18n_ok,btnClass:"btn-confirm",keys:["enter"]}}}):(0!=e.closest(".evf-form-group").next(".evf-form-group").length&&e.closest(".evf-form-group").next(".evf-form-group").find(".score_from").val(e.closest(".evf-form-group").find(".score_from").val()),e.closest(".evf-form-group").remove())},fieldChoiceUpdate:function(e){d(".everest-forms-likert-dd-options").removeClass("everest-forms-show"),d(".everest-forms-likert-dd-options").addClass("everest-forms-hidden");var t=d("#everest-forms-field-option-row-"+e+"-drop_down_choices").find(".evf-survey-choices .default:checked").next(".label").val(),o=d("#everest-forms-field-option-row-"+e+"-drop_down_choices").find(".evf-survey-choices").find(".label").first().val(),i={rows:{},columns:{},colCount:0,inputType:d("#everest-forms-field-option-"+e+"-input_type").val(),selected_choice:void 0!==t?t:o},t=("select"===i.inputType&&(d(".everest-forms-likert-dd-options").removeClass("everest-forms-hidden"),d(".everest-forms-likert-dd-options").addClass("everest-forms-show")),d("#everest-forms-field-option-row-"+e+"-columns .evf-survey-choices li").each(function(){var e=d(this),t=e.data("key"),e=e.find("input").val();i.columns["c"+t]={key:t,value:e},i.colCount++}),d("#everest-forms-field-option-row-"+e+"-rows .evf-survey-choices li").each(function(){var e=d(this),t=e.data("key"),e=e.find("input").val();i.rows["r"+t]={key:t,value:e}}),i.width=80/i.colCount,wp.template("everest-forms-likert-field-preview"));d("#everest-forms-field-"+e).find("table").replaceWith(t(i))},checkSelectedYesNoVariation:function(e){d(".everest-forms-field-option-row-yes_icon_color").hide(),d(".everest-forms-field-option-row-no_icon_color").hide(),d(".everest-forms-field-option-row-yes_label").hide(),d(".everest-forms-field-option-row-no_label").hide(),"with_icon_text"===e&&(d(".everest-forms-field-option-row-yes_icon_color").show(),d(".everest-forms-field-option-row-no_icon_color").show(),d(".everest-forms-field-option-row-yes_label").show(),d(".everest-forms-field-option-row-no_label").show()),"with_icon"===e&&(d(".everest-forms-field-option-row-yes_icon_color").show(),d(".everest-forms-field-option-row-no_icon_color").show()),"with_text"===e&&(d(".everest-forms-field-option-row-yes_label").show(),d(".everest-forms-field-option-row-no_label").show())}};p.init(jQuery)}(jQuery,everest_forms_survey_polls_quiz_builder);