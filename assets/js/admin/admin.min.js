!function(n,s){n(".colorpicker").wpColorPicker(),n(document).on("init_perfect_scrollbar",function(){var e=n("nav.evf-nav-tab-wrapper");1<=e.length&&(window.evf_nav_ps=new PerfectScrollbar(e.selector,{suppressScrollY:!0,useBothWheelAxes:!0,wheelPropagation:!0}))}),n(window).on("resize orientationchange",function(){var e;1<=n("nav.evf-nav-tab-wrapper").length&&(clearTimeout(e),e=setTimeout(function(){window.evf_nav_ps.update()},250))}),n(document).ready(function(e){"undefined"!=typeof PerfectScrollbar&&e(document).trigger("init_perfect_scrollbar")}),n(document.body).on("evf_add_error_tip",function(e,t,r,i){var o=t.position();0===t.parent().find(".evf_error_tip").length&&(t.after('<div class="evf_error_tip '+r+'">'+i[r]+"</div>"),t.parent().find(".evf_error_tip").css("left",o.left+t.width()-t.width()/2-n(".evf_error_tip").width()/2).css("top",o.top+t.height()).fadeIn("100"))}).on("evf_remove_error_tip",function(e,t,r){t.parent().find(".evf_error_tip."+r).fadeOut("100",function(){n(this).remove()})}).on("click","input:not([type=number])",function(){n(".evf_error_tip").fadeOut("100",function(){n(this).remove()})}).on("blur",".evf-input-meta-key[type=text], .evf-input-number[type=number]",function(){n(".evf_error_tip").fadeOut("100",function(){n(this).remove()})}).on("change",".evf-input-meta-key[type=text], .evf-input-number[type=number]",function(){var e;e=n(this).is(".evf-input-number")?new RegExp("[^-0-9]+","gi"):new RegExp("[^a-z0-9_-]+","gi");var t=n(this).val(),r=t.replace(e,"");t!==r&&n(this).val(r)}).on("keyup",".evf-input-meta-key[type=text]",function(){var e,t;n(this).is(".evf-input-meta-key")&&(e=new RegExp("[^a-z0-9_-]+","gi"),t="i18n_field_meta_key_error");var r=n(this).val(),i=r.replace(e,"");r!==i?n(document.body).triggerHandler("evf_add_error_tip",[n(this),t,s]):n(document.body).triggerHandler("evf_remove_error_tip",[n(this),t])}).on("keyup focus",".evf-input-number[type=number]",function(){var e=n(this).parent().data("fieldId"),t=n("input#everest-forms-field-option-"+e+"-max_value"),r=n("input#everest-forms-field-option-"+e+"-min_value"),i=t.val(),o=r.val();0!==o.length&&0!==i.length&&(parseFloat(o)>parseFloat(i)?-1!==n(this).attr("id").indexOf("min_value")?n(document.body).triggerHandler("evf_add_error_tip",[n(this),"i18n_field_min_value_greater",s]):n(document.body).triggerHandler("evf_add_error_tip",[n(this),"i18n_field_max_value_smaller",s]):(n(document.body).triggerHandler("evf_remove_error_tip",[n(this),"i18n_field_max_value_smaller"]),n(document.body).triggerHandler("evf_remove_error_tip",[n(this),"i18n_field_min_value_greater"])))}).on("init_tooltips",function(){n(".tips, .help_tip, .everest-forms-help-tip, .everest-forms-help-tooltip, .everest-forms-icon").tooltipster({maxWidth:200,multiple:!0,interactive:!0,position:"bottom",contentAsHTML:!0,updateAnimation:!1,restoration:"current",functionInit:function(e,t){var r=n(t.origin).attr("data-tip");r&&e.content(r)}})}),n("body").on("mouseenter",".evf-content-email-settings-inner .everest-forms-help-tooltip:not(.tooltipstered)",function(){n(this).tooltipster({maxWidth:200,multiple:!0,interactive:!0,position:"bottom",contentAsHTML:!0,updateAnimation:!1,restoration:"current",functionInit:function(e,t){var r=n(t.origin).attr("data-tip");r&&e.content(r)}}),n(this).tooltipster("open")}),n(document).on("click",".everest-forms-email-add",function(){n(".evf-content-email-settings-inner .tooltipstered").tooltipster("destroy")}),n(document.body).trigger("init_tooltips"),n(document).on("heartbeat-send",function(e,t){var r=n("#everest-forms-entries-list"),i=r.find("#entries-list").data("form-id");last_entry_id=r.find("#entries-list").data("last-entry-id"),r.length&&"undefined"!=typeof last_entry_id&&(t.evf_new_entries_form_id=i,t.evf_new_entries_last_entry_id=last_entry_id)}),n(document).on("heartbeat-tick",function(e,t){var r=n("#everest-forms-entries-list"),i=r.find(".wp-list-table thead tr:first-child > :visible").length;r.length&&t.evf_new_entries_notification&&(r.find(".new-entries-notification").length||r.find(".wp-list-table thead").append('<tr class="new-entries-notification"><td colspan="'+i+'"><a href="#new" onClick="window.location.reload(true);"></a></td></tr>'),r.find(".new-entries-notification a").text(t.evf_new_entries_notification).slideDown({duration:500,start:function(){n(this).css({display:"block"})}}))}),n(document).on("click","#everest-forms-welcome .welcome-video-play",function(e){e.preventDefault(),n(this).find(".everest-froms-welcome-thumb").remove(),n(this).append('<div class="welcome-video-container"><iframe width="760" height="429" src="https://www.youtube.com/embed/N_HbZccA-Ts?rel=0&amp;showinfo=0&amp;autoplay=1" frameborder="0" allowfullscreen></iframe></div>')}),n("#everest-forms-import").change(function(e){var t=n("#everest-forms-import").prop("files")[0];n("#import-file-name").html(t.name)}),n(".everest-forms-export-form-action").on("click",function(){var e=n(this).closest(".everest-forms-export-form").find("#everest-forms-form-export").val();if(n(this).closest(".everest-forms-export-form").find("#message").remove(),!e)return n(this).closest(".everest-forms-export-form").find("h3").after('<div id="message" class="error inline everest-froms-import_notice"><p><strong>'+everest_forms_admin.i18n_form_export_action_error+"</strong></p></div>"),!1}),n(".everest_forms_import_action").on("click",function(){var e=n("#everest-forms-import").prop("files")[0],t=new FormData;t.append("jsonfile",e),t.append("action","everest_forms_import_form_action"),t.append("security",everest_forms_admin.ajax_import_nonce),n.ajax({url:evf_email_params.ajax_url,dataType:"json",cache:!1,contentType:!1,processData:!1,data:t,type:"POST",beforeSend:function(){n(".everest_forms_import_action").closest(".everest_forms_import_action").append('<i class="evf-loading evf-loading-active"></i>'),n(".everest-froms-import_notice").remove()},complete:function(e){var t="";n(".everest_forms_import_action").closest(".everest_forms_import_action").find(".evf-loading").remove(),n(".everest-froms-import_notice").remove(),t=!0===e.responseJSON.success?'<div id="message" class="updated inline everest-froms-import_notice"><p><strong>'+e.responseJSON.data.message+"</strong></p></div>":'<div id="message" class="error inline everest-froms-import_notice"><p><strong>'+e.responseJSON.data.message+"</strong></p></div>",n(".everest-forms-import-form").find("h3").after(t),n("#everest-forms-import").val("")}})})}(jQuery,everest_forms_admin);