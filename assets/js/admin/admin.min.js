!function(o,a){o(".colorpicker").wpColorPicker(),o(document).on("init_perfect_scrollbar",function(){var e=o("nav.evf-nav-tab-wrapper");1<=e.length&&(window.evf_nav_ps=new PerfectScrollbar(e.selector,{suppressScrollY:!0,useBothWheelAxes:!0,wheelPropagation:!0}))}),o(window).on("resize orientationchange",function(){var e;1<=o("nav.evf-nav-tab-wrapper").length&&(clearTimeout(e),e=setTimeout(function(){window.evf_nav_ps.update()},250))}),o(document).ready(function(e){"undefined"!=typeof PerfectScrollbar&&e(document).trigger("init_perfect_scrollbar")}),o(document.body).on("evf_add_error_tip",function(e,t,n,i){var r=t.position();0===t.parent().find(".evf_error_tip").length&&(t.after('<div class="evf_error_tip '+n+'">'+i[n]+"</div>"),t.parent().find(".evf_error_tip").css("left",r.left+t.width()-t.width()/2-o(".evf_error_tip").width()/2).css("top",r.top+t.height()).fadeIn("100"))}).on("evf_remove_error_tip",function(e,t,n){t.parent().find(".evf_error_tip."+n).fadeOut("100",function(){o(this).remove()})}).on("click","input:not([type=number])",function(){o(".evf_error_tip").fadeOut("100",function(){o(this).remove()})}).on("blur",".evf-input-meta-key[type=text], .evf-input-number[type=number]",function(){o(".evf_error_tip").fadeOut("100",function(){o(this).remove()})}).on("change",".evf-input-meta-key[type=text], .evf-input-number[type=number]",function(){var e;e=o(this).is(".evf-input-number")?new RegExp("[^-0-9]+","gi"):new RegExp("[^a-z0-9_-]+","gi");var t=o(this).val(),n=t.replace(e,"");t!==n&&o(this).val(n)}).on("keyup",".evf-input-meta-key[type=text]",function(){var e,t;o(this).is(".evf-input-meta-key")&&(e=new RegExp("[^a-z0-9_-]+","gi"),t="i18n_field_meta_key_error");var n=o(this).val(),i=n.replace(e,"");n!==i?o(document.body).triggerHandler("evf_add_error_tip",[o(this),t,a]):o(document.body).triggerHandler("evf_remove_error_tip",[o(this),t])}).on("keyup focus",".evf-input-number[type=number]",function(){var e=o(this).parent().data("fieldId"),t=o("input#everest-forms-field-option-"+e+"-max_value"),n=o("input#everest-forms-field-option-"+e+"-min_value"),i=t.val(),r=n.val();0!==r.length&&0!==i.length&&(parseFloat(r)>parseFloat(i)?-1!==o(this).attr("id").indexOf("min_value")?o(document.body).triggerHandler("evf_add_error_tip",[o(this),"i18n_field_min_value_greater",a]):o(document.body).triggerHandler("evf_add_error_tip",[o(this),"i18n_field_max_value_smaller",a]):(o(document.body).triggerHandler("evf_remove_error_tip",[o(this),"i18n_field_max_value_smaller"]),o(document.body).triggerHandler("evf_remove_error_tip",[o(this),"i18n_field_min_value_greater"])))}).on("init_tooltips",function(){o(".tips, .help_tip, .everest-forms-help-tip, .everest-forms-help-tooltip").tooltipster({maxWidth:200,multiple:!0,interactive:!0,position:"bottom",contentAsHTML:!0,updateAnimation:!1,restoration:"current",functionInit:function(e,t){var n=o(t.origin).attr("data-tip");n&&e.content(n)}})}),o("body").on("mouseenter",".evf-content-email-settings-inner .everest-forms-help-tooltip:not(.tooltipstered)",function(){o(this).tooltipster({maxWidth:200,multiple:!0,interactive:!0,position:"bottom",contentAsHTML:!0,updateAnimation:!1,restoration:"current",functionInit:function(e,t){var n=o(t.origin).attr("data-tip");n&&e.content(n)}}),o(this).tooltipster("open")}),o(document).on("click",".everest-forms-email-add",function(){o(".evf-content-email-settings-inner .tooltipstered").tooltipster("destroy")}),o(document.body).trigger("init_tooltips"),o(document).on("heartbeat-send",function(e,t){var n=o("#everest-forms-entries-list"),i=n.find("#entries-list").data("form-id");last_entry_id=n.find("#entries-list").data("last-entry-id"),n.length&&"undefined"!=typeof last_entry_id&&(t.evf_new_entries_form_id=i,t.evf_new_entries_last_entry_id=last_entry_id)}),o(document).on("heartbeat-tick",function(e,t){var n=o("#everest-forms-entries-list"),i=n.find(".wp-list-table thead tr:first-child > :visible").length;n.length&&t.evf_new_entries_notification&&(n.find(".new-entries-notification").length||n.find(".wp-list-table thead").append('<tr class="new-entries-notification"><td colspan="'+i+'"><a href="#new" onClick="window.location.reload(true);"></a></td></tr>'),n.find(".new-entries-notification a").text(t.evf_new_entries_notification).slideDown({duration:500,start:function(){o(this).css({display:"block"})}}))})}(jQuery,everest_forms_admin);