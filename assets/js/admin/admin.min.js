!function(n,i){n(document).on("click",".everest-forms-field.everest-forms-field-rating",function(){n(".everest-forms-field-option-row-icon_color input.evf-colorpicker").wpColorPicker({change:function(e){var t=n(this),r=t.val(),t=t.closest(".everest-forms-field-option-row").data("field-id");n("#everest-forms-field-"+t+" .rating-icon svg").css("fill",r)}})}),n(document).ready(function(){function e(){"Weekly"!==n("#everest_forms_entries_reporting_frequency").val()?n("#everest_forms_entries_reporting_day").closest(".everest-forms-global-settings").hide():n("#everest_forms_entries_reporting_day").closest(".everest-forms-global-settings").show()}var t,r,o;e(),t=n(".everest-forms").find("form")[0],r=!1,n(t).on("change",function(e){"everest-forms-enable-premium-sidebar"!==e.target.name&&(r=!0)}),o=!1,n(t).on("submit",function(){o=!0}),n(t).find(".evf-nav__link").on("click",function(){o=!0}),n(window).on("beforeunload",function(e){r&&!o?(e.preventDefault(),e.returnValue=""):e.stopImmediatePropagation()}),n(document).on("change click","#everest_forms_entries_reporting_frequency",e)}),n(document).ready(function(){n(document).on("change","#everest-forms-enable-premium-sidebar",function(){var e=n("#everest-forms-enable-premium-sidebar").is(":checked");localStorage.setItem("isPremiumSidebarEnabled",e),document.cookie="isPremiumSidebarEnabled="+e+"; path=/;",e?(n("body").removeClass("evf-premium-sidebar-hidden").addClass("evf-premium-sidebar-show"),n(".everest-forms-toggle-text").text("Show Sidebar")):(n("body").removeClass("evf-premium-sidebar-show").addClass("evf-premium-sidebar-hidden"),n(".everest-forms-toggle-text").text("Hide Sidebar"))})}),n(document).on("init_perfect_scrollbar",function(){1<=n("nav.evf-nav-tab-wrapper").length&&(window.evf_nav_ps=new PerfectScrollbar("nav.evf-nav-tab-wrapper",{suppressScrollY:!0,useBothWheelAxes:!0,wheelPropagation:!0}))}),window.addEventListener("resize orientationchange",function(){var e;1<=n("nav.evf-nav-tab-wrapper").length&&(clearTimeout(e),setTimeout(function(){window.evf_nav_ps.update()},400))}),n(document).ready(function(e){"undefined"!=typeof PerfectScrollbar&&e(document).trigger("init_perfect_scrollbar")}),n(document.body).on("evf_add_error_tip",function(e,t,r,o){var i=t.position();0===t.parent().find(".evf_error_tip").length&&(t.after('<div class="evf_error_tip '+r+'">'+o[r]+"</div>"),t.parent().find(".evf_error_tip").css("left",i.left+t.width()-t.width()/2-n(".evf_error_tip").width()/2).css("top",i.top+t.height()).fadeIn("100"))}).on("evf_remove_error_tip",function(e,t,r){t.parent().find(".evf_error_tip."+r).fadeOut("100",function(){n(this).remove()})}).on("click","input:not([type=number])",function(){n(".evf_error_tip").fadeOut("100",function(){n(this).remove()})}).on("blur",".evf-input-meta-key[type=text], .evf-input-number[type=number]",function(){n(".evf_error_tip").fadeOut("100",function(){n(this).remove()})}).on("change",".evf-input-meta-key[type=text], .evf-input-number[type=number]",function(){var e=n(this).is(".evf-input-number")?new RegExp("[^-0-9]+","gi"):new RegExp("[^a-z0-9_-]+","gi"),t=n(this).val(),e=t.replace(e,"");t!==e&&n(this).val(e)}).on("keyup",".evf-input-meta-key[type=text]",function(){n(this).is(".evf-input-meta-key")&&(r=new RegExp("[^a-z0-9_-]+","gi"),e="i18n_field_meta_key_error");var e,t=n(this).val(),r=t.replace(r,"");t!==r?n(document.body).triggerHandler("evf_add_error_tip",[n(this),e,i]):n(document.body).triggerHandler("evf_remove_error_tip",[n(this),e])}).on("keyup focus",".evf-input-number[type=number]",function(){var e=n(this).parent().data("fieldId")?n(this).parent().data("fieldId"):n(this).closest(".everest-forms-field-option-row").data("field-id"),t=n("input#everest-forms-field-option-"+e+"-max_value"),e=n("input#everest-forms-field-option-"+e+"-min_value"),t=t.val(),e=e.val();0!==e.length&&0!==t.length&&(parseFloat(e)>parseFloat(t)?-1!==n(this).attr("id").indexOf("min_value")?n(document.body).triggerHandler("evf_add_error_tip",[n(this),"i18n_field_min_value_greater",i]):n(document.body).triggerHandler("evf_add_error_tip",[n(this),"i18n_field_max_value_smaller",i]):(n(document.body).triggerHandler("evf_remove_error_tip",[n(this),"i18n_field_max_value_smaller"]),n(document.body).triggerHandler("evf_remove_error_tip",[n(this),"i18n_field_min_value_greater"])))}).on("keydown click",".evf-max-file-number[type=number]",function(e){if(!(95<e.keyCode&&e.keyCode<106||47<e.keyCode&&e.keyCode<58||8==e.keyCode))return!1}).on("focusout",".evf-input-number[type=number]",function(e){var t=n(this).parent().data("fieldId")?n(this).parent().data("fieldId"):n(this).closest(".everest-forms-field-option-row").data("field-id"),r=n("input#everest-forms-field-option-"+t+"-max_value"),t=n("input#everest-forms-field-option-"+t+"-min_value"),o=parseFloat(r.val()),i=parseFloat(t.val());(o<i||""===r.val()&&""!==t.val())&&r.val(i+1)}).on("click",".everest-forms-field-number, .everest-forms-field-range-slider",function(e){var t=n(this).data("field-id");n(document).on("keydown click","#everest-forms-field-option-"+t+"-default_value",function(e){if(!(95<e.keyCode&&e.keyCode<106||47<e.keyCode&&e.keyCode<58||8==e.keyCode))return!1}),n(document).on("keyup focus","#everest-forms-field-option-"+t+"-default_value",function(e){var t=n(this).parent().data("fieldId")?n(this).parent().data("fieldId"):n(this).closest(".everest-forms-field-option-row").data("field-id"),r=n("input#everest-forms-field-option-"+t+"-max_value"),t=n("input#everest-forms-field-option-"+t+"-min_value"),r=r.val(),t=t.val(),e=e.target.value,o=n(this);0!==t.length&&(0!==r.length&&parseFloat(e)>parseFloat(r)?(n(document.body).triggerHandler("evf_remove_error_tip",[o,"i18n_field_def_value_smaller"]),n(document.body).triggerHandler("evf_add_error_tip",[o,"i18n_field_def_value_greater",i])):n(document.body).triggerHandler("evf_remove_error_tip",[o,"i18n_field_def_value_greater"]),0!==e.length&&parseFloat(e)<parseFloat(t)?(n(document.body).triggerHandler("evf_remove_error_tip",[o,"i18n_field_def_value_greater"]),n(document.body).triggerHandler("evf_add_error_tip",[o,"i18n_field_def_value_smaller",i])):n(document.body).triggerHandler("evf_remove_error_tip",[o,"i18n_field_def_value_smaller"]))}).on("focusout","#everest-forms-field-option-"+t+"-default_value",function(e){var t=n(this).parent().data("fieldId")?n(this).parent().data("fieldId"):n(this).closest(".everest-forms-field-option-row").data("field-id"),r=n("input#everest-forms-field-option-"+t+"-max_value"),t=n("input#everest-forms-field-option-"+t+"-min_value"),r=parseFloat(r.val()),t=parseFloat(t.val()),o=parseFloat(e.target.value);(o<t||r<o)&&(e.target.value="")})}).on("click",".everest-forms-field-payment-quantity",function(e){var t=n(this).data("field-id");n(document).on("keydown click","#everest-forms-field-option-"+t+"-default_value",function(e){if(!(95<e.keyCode&&e.keyCode<106||47<e.keyCode&&e.keyCode<58||8==e.keyCode))return!1})}).on("init_tooltips",function(){n(".tips, .help_tip, .everest-forms-help-tip, .everest-forms-help-tooltip, .everest-forms-icon").tooltipster({maxWidth:200,multiple:!0,interactive:!0,position:"bottom",contentAsHTML:!0,updateAnimation:!1,restoration:"current",functionInit:function(e,t){t=n(t.origin).attr("data-tip");t&&e.content(t)}})}),n("body").on("mouseenter",".evf-content-email-settings-inner .everest-forms-help-tooltip:not(.tooltipstered)",function(){n(this).tooltipster({maxWidth:200,multiple:!0,interactive:!0,position:"bottom",contentAsHTML:!0,updateAnimation:!1,restoration:"current",functionInit:function(e,t){t=n(t.origin).attr("data-tip");t&&e.content(t)}}),n(this).tooltipster("open")}),n(document).on("click",".everest-forms-email-add",function(){n(".evf-content-email-settings-inner .tooltipstered").tooltipster("destroy")}),n(document).on("click",".everest-forms-email-duplicate",function(){n(".evf-content-email-settings-inner .tooltipstered").tooltipster("destroy")}),n(document.body).trigger("init_tooltips"),n(document).on("heartbeat-send",function(e,t){var r=n("#everest-forms-entries-list"),o=r.find("#entries-list").data("form-id");last_entry_id=r.find("#entries-list").data("last-entry-id"),r.length&&"undefined"!=typeof last_entry_id&&(t.evf_new_entries_form_id=o,t.evf_new_entries_last_entry_id=last_entry_id)}),n(document).on("heartbeat-tick",function(e,t){var r=n("#everest-forms-entries-list"),o=r.find(".wp-list-table thead tr:first-child > :visible").length;r.length&&t.evf_new_entries_notification&&(r.find(".new-entries-notification").length||r.find(".wp-list-table thead").append('<tr class="new-entries-notification"><td colspan="'+o+'"><a href="#new" onClick="window.location.reload(true);"></a></td></tr>'),r.find(".new-entries-notification a").text(t.evf_new_entries_notification).slideDown({duration:500,start:function(){n(this).css({display:"block"})}}))}),n(document).on("click","#everest-forms-welcome .welcome-video-play",function(e){e.preventDefault(),n(this).find(".everest-froms-welcome-thumb").remove(),n(this).append('<div class="welcome-video-container"><iframe width="760" height="429" src="https://www.youtube.com/embed/N_HbZccA-Ts?rel=0&amp;showinfo=0&amp;autoplay=1" frameborder="0" allowfullscreen></iframe></div>')}),n("#everest-forms-import").on("change",function(e){var t=n("#everest-forms-import").prop("files")[0];n("#import-file-name").html(t.name)}),n(".everest-forms-export-form-action").on("click",function(){var e=n(this).closest(".everest-forms-export-form").find("#everest-forms-form-export").val();if(n(this).closest(".everest-forms-export-form").find("#message").remove(),!e)return n(this).closest(".everest-forms-export-form").find("h3").after('<div id="message" class="error inline everest-froms-import_notice"><p><strong>'+everest_forms_admin.i18n_form_export_action_error+"</strong></p></div>"),!1}),n(".everest_forms_import_action").on("click",function(){var e=n("#everest-forms-import").prop("files")[0],t=new FormData;t.append("jsonfile",e),t.append("action","everest_forms_import_form_action"),t.append("security",everest_forms_admin.ajax_import_nonce),n.ajax({url:evf_email_params.ajax_url,dataType:"json",cache:!1,contentType:!1,processData:!1,data:t,type:"POST",beforeSend:function(){n(".everest_forms_import_action").closest(".everest_forms_import_action").append('<i class="evf-loading evf-loading-active"></i>'),n(".everest-froms-import_notice").remove()},complete:function(e){var t="";n(".everest_forms_import_action").closest(".everest_forms_import_action").find(".evf-loading").remove(),n(".everest-froms-import_notice").remove(),t=!0===e.responseJSON.success?'<div id="message" class="updated inline everest-froms-import_notice"><p><strong>'+e.responseJSON.data.message+"</strong></p></div>":'<div id="message" class="error inline everest-froms-import_notice"><p><strong>'+e.responseJSON.data.message+"</strong></p></div>",n(".everest-forms-import-form").find("h3").after(t),n("#everest-forms-import").val(""),n("#import-file-name").html("No file selected")}})}),n(".everest-forms-btn-group .everest-forms-btn").on("click",function(){n(this).siblings().removeClass("is-active"),n(this).addClass("is-active")}),n(document).find(".evf-form-locate").on("click",function(e){e.preventDefault();var t={action:"everest_forms_locate_form_action",id:n(this).data("id"),security:everest_forms_admin_locate.ajax_locate_nonce},r=e.target.closest(".row-actions");n.ajax({url:everest_forms_admin_locate.ajax_url,dataType:"json",cache:!1,data:t,type:"POST",beforeSend:function(){n(r).append('<i class="evf-loading evf-loading-active"></i>')},success:function(e){var o,i;0<Object.keys(e.data).length?(o='<div class = "locate-form"><span>'+everest_forms_admin_locate.form_found+"</span>",i=1,n.each(e.data,function(e,t){1<i&&(o+=", ");var r=e.split(" ");4<r.length&&(e=r.slice(0,4).join(" "),e+="..."),o+=' <a href="'+t+'" target="_blank">'+e+"</a>",i++}),o+="</div>",0!=n(r).find(".locate-form").length&&n(r).find(".locate-form").remove(),n(r).find("span:first").prepend(o)):(0!=n(r).find(".locate-form").length&&n(r).find(".locate-form").remove(),n(r).find("span:first").prepend('<div class = "locate-form"><span>'+everest_forms_admin_locate.form_found_error+"</span></div>")),n(r).find(".evf-loading").remove()}})}),n(".evf-fm-dismiss-notice").on("click",function(e){e.preventDefault();e={action:"everest_forms_fm_dismiss_notice",option_id:n(this).data("option-id"),security:everest_forms_admin_form_migrator.evf_fm_dismiss_notice_nonce};n.ajax({url:everest_forms_admin_form_migrator.ajax_url,type:"POST",dataType:"JSON",data:e,success:function(e){e.success&&n(".evf-fm-notice").hide()}})}),n(".evf-smart-phone-field").each(function(e,t){var r=n(t),o=r.attr("name");setTimeout(function(){n('input[name="'+o+'"]').val(r.val())},2e3)}),n(".everest-forms-system-info-setting-copy").tooltipster({content:"Copied",trigger:"click",theme:"tooltipster-noir",interactive:!0,functionBefore:function(e,t){var r=n(".everest-forms-system-info-setting table")[0],o=document.createRange();o.selectNode(r),window.getSelection().removeAllRanges(),window.getSelection().addRange(o),document.execCommand("copy"),window.getSelection().removeAllRanges()}}),n(document).ready(function(){n("#everest_forms_search_addons").on("keyup search",function(){var t=n(this).val().toLowerCase(),r=!1;n(".the-list .plugin-card").each(function(){var e=n(this);-1<e.text().toLowerCase().indexOf(t)?(e.show(),r=!0):e.hide()}),r?(n(".refresh").show(),n("#evf_addon_no_result_found").hide()):(n(".refresh").hide(),n("#evf_addon_no_result_found").remove(),n(".refresh").after('<p id="evf_addon_no_result_found">No Result Found</p>'))})}),n("#everest_forms_enable_restapi").is(":checked")?n(document).find(".evf-restapi-key-wrapper").show():n(document).find(".evf-restapi-key-wrapper").hide(),n("#everest_forms_enable_restapi").on("click",function(e){e=e.target.checked;e?n(document).find(".evf-restapi-key-wrapper").show():n(document).find(".evf-restapi-key-wrapper").hide()}),n("#everest_forms_restapi_keys").on("click",function(e){evfClearClipboard(),evfSetClipboard(n(this).val(),n(this)),e.preventDefault()}).on("aftercopy",function(){n(this).tooltipster("content",n(this).attr("data-copied")).trigger("mouseenter").on("mouseleave",function(){var e=n(this);setTimeout(function(){e.tooltipster("content",e.attr("data-tip"))},5e3)})}),n(".everest-forms-generate-api-key, .everest-forms-regenerate-api-key").on("click",function(){var e={action:"everest_forms_generate_restapi_key",security:everest_forms_admin_generate_restapi_key.ajax_restapi_key_nonce};n.ajax({url:everest_forms_admin_generate_restapi_key.ajax_url,type:"post",data:e,success:e=>{n(document).find("#everest_forms_restapi_keys").val(e.data)}})})}(jQuery,everest_forms_admin);