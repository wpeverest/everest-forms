jQuery(function(u){"use strict";if("undefined"==typeof everest_forms_params)return!1;({$everest_form:u("form.everest-form"),init:function(){this.init_inputMask(),this.init_mailcheck(),this.init_datepicker(),this.load_validation(),this.submission_scroll(),this.$everest_form.on("input validate change",".input-text, select, input:checkbox, input:radio",this.validate_field)},init_inputMask:function(){"undefined"!=typeof u.fn.inputmask&&u(".evf-masked-input").inputmask()},init_mailcheck:function(){"undefined"!=typeof u.fn.mailcheck&&everest_forms_params.mailcheck_enabled&&(0<everest_forms_params.mailcheck_domains.length&&(Mailcheck.defaultDomains=Mailcheck.defaultDomains.concat(everest_forms_params.mailcheck_domains)),0<everest_forms_params.mailcheck_toplevel_domains.length&&(Mailcheck.defaultTopLevelDomains=Mailcheck.defaultTopLevelDomains.concat(everest_forms_params.mailcheck_toplevel_domains)),u(document).on("blur",".evf-field-email input",function(){var e=u(this),i=e.attr("id");e.mailcheck({suggested:function(e,a){u("#"+i+"_suggestion").remove();var t=everest_forms_params.i18n_messages_email_suggestion.replace("{suggestion}",'<a href="#" class="mailcheck-suggestion" data-id="'+i+'" title="'+everest_forms_params.i18n_messages_email_suggestion_title+'">'+a.full+"</a>");u(e).after('<label class="evf-error mailcheck-error" id="'+i+'_suggestion">'+t+"</label>")},empty:function(){u("#"+i+"_suggestion").remove()}})}),u(document).on("click",".evf-field-email .mailcheck-suggestion",function(e){var a=u(this),t=a.attr("data-id");e.preventDefault(),u("#"+t).val(a.text()),a.parent().remove()}))},init_datepicker:function(){0<u(".evf-field-date-time").length&&u(".flatpickr-field").each(function(){var e=5,a=u(this).data();switch(a.dateTime){case"date":u(this).flatpickr({disableMobile:!0,mode:a.mode,minDate:a.minDate,maxDate:a.maxDate,dateFormat:a.dateFormat});break;case"time":undefined!==a.timeInterval&&(e=parseInt(a.timeInterval,10)),u(this).flatpickr({enableTime:!0,noCalendar:!0,minuteIncrement:e,dateFormat:a.dateFormat,disableMobile:!0,time_24hr:a.dateFormat.includes("H:i")});break;case"date-time":undefined!==a.timeInterval&&(e=parseInt(a.timeInterval,10)),u(this).flatpickr({enableTime:!0,noCalendar:!1,disableMobile:!0,mode:a.mode,minDate:a.minDate,maxDate:a.maxDate,minuteIncrement:e,dateFormat:a.dateFormat,time_24hr:a.dateFormat.includes("H:i")})}})},load_validation:function(){if("undefined"==typeof u.fn.validate)return!1;u(".evf-field-url input[type=url]").change(function(){var e=u(this).val();if(!e)return!1;"http://"!==e.substr(0,7)&&"https://"!==e.substr(0,8)&&u(this).val("http://"+e)}),u.extend(u.validator.messages,{required:everest_forms_params.i18n_messages_required,url:everest_forms_params.i18n_messages_url,email:everest_forms_params.i18n_messages_email,number:everest_forms_params.i18n_messages_number}),u.validator.methods.email=function(e,a){var t=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return this.optional(a)||t.test(e)},this.$everest_form.each(function(){u(this).validate({ignore:"",errorClass:"evf-error",validClass:"evf-valid",errorPlacement:function(e,a){"radio"===a.attr("type")||"checkbox"===a.attr("type")?a.hasClass("everest-forms-likert-field-option")?a.closest("tr").children("th").append(e):a.parent().parent().parent().append(e):a.is("select")&&a.attr("class").match(/date-month|date-day|date-year/)?0===a.parent().find("label.evf-error:visible").length&&a.parent().find("select:last").after(e):a.hasClass("evf-smart-phone-field")?a.parent().after(e):e.insertAfter(a)},highlight:function(e,a,t){var i=u(e),s=i.closest(".form-row"),r=i.attr("name");"radio"===i.attr("type")||"checkbox"===i.attr("type")?s.find("input[name='"+r+"']").addClass(a).removeClass(t):i.addClass(a).removeClass(t),s.removeClass("everest-forms-validated").addClass("everest-forms-invalid evf-has-error")},unhighlight:function(e,a,t){var i=u(e),s=i.closest(".form-row"),r=i.attr("name");"radio"===i.attr("type")||"checkbox"===i.attr("type")?s.find("input[name='"+r+"']").addClass(t).removeClass(a):i.addClass(t).removeClass(a),s.removeClass("evf-has-error")},submitHandler:function(e){var a=u(e).find(".evf-submit"),t=a.data("process-text");t&&a.text(t).prop("disabled",!0),e.submit()}})})},validate_field:function(e){var a=u(this),t=a.closest(".form-row"),i=!0,s=t.is(".validate-required"),r=t.is(".validate-email"),F=e.type;if(t.hasClass("evf-field-address"))0===t.find("input.evf-error").length&&t.removeClass("everest-forms-invalid everest-forms-invalid-required-field everest-forms-invalid-email").addClass("everest-forms-validated");else if("input"===F&&t.removeClass("everest-forms-invalid everest-forms-invalid-required-field everest-forms-invalid-email everest-forms-validated"),"validate"===F||"change"===F){if(s&&(a.hasClass("everest-forms-likert-field-option")?0<t.find("input.evf-error").length&&(t.removeClass("everest-forms-validated").addClass("everest-forms-invalid everest-forms-invalid-required-field"),i=!1):"checkbox"===a.attr("type")&&0===t.find("input:checked").length?(t.removeClass("everest-forms-validated").addClass("everest-forms-invalid everest-forms-invalid-required-field"),i=!1):""===a.val()&&(t.removeClass("everest-forms-validated").addClass("everest-forms-invalid everest-forms-invalid-required-field"),i=!1)),r)if(a.val())new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(a.val())||(t.removeClass("everest-forms-validated").addClass("everest-forms-invalid everest-forms-invalid-email"),i=!1);i&&t.removeClass("everest-forms-invalid everest-forms-invalid-required-field everest-forms-invalid-email").addClass("everest-forms-validated")}},submission_scroll:function(){u("div.everest-forms-submission-scroll").length&&u("html,body").animate({scrollTop:u("div.everest-forms-submission-scroll").offset().top-100},1e3)}}).init()});