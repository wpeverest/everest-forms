jQuery(function(f){"use strict";if("undefined"==typeof everest_forms_params)return!1;var t=function(){return{language:{noResults:function(){return everest_forms_params.i18n_no_matches}}}},l={$everest_form:f("form.everest-form"),init:function(){this.init_inputMask(),this.init_mailcheck(),this.init_datepicker(),this.init_datedropdown(),this.load_validation(),this.submission_scroll(),this.randomize_elements(),this.init_enhanced_select(),this.checkUncheckAllcheckbox(),this.validateMinimumWordLength(),this.validateMinimumcharacterLength(),this.loadPhoneField(),this.loadCountryFlags(),this.ratingInit(),this.FormSubmissionWaitingTime(),this.$everest_form.on("input validate change",".input-text, select, input:checkbox, input:radio",this.validate_field),this.$everest_form.on("focusin",'.input-text, select, input[type="checkbox"], input[type="radio"]',function(){f(this).addClass("everest-forms-field-active")}).on("focusout",'.input-text, select, input[type="checkbox"], input[type="radio"]',function(){f(this).removeClass("everest-forms-field-active")}),f(document.body).trigger("everest_forms_loaded")},init_inputMask:function(){"undefined"!=typeof f.fn.inputmask&&f(".evf-masked-input").inputmask()},init_mailcheck:function(){"undefined"!=typeof f.fn.mailcheck&&everest_forms_params.mailcheck_enabled&&(0<everest_forms_params.mailcheck_domains.length&&(Mailcheck.defaultDomains=Mailcheck.defaultDomains.concat(everest_forms_params.mailcheck_domains)),0<everest_forms_params.mailcheck_toplevel_domains.length&&(Mailcheck.defaultTopLevelDomains=Mailcheck.defaultTopLevelDomains.concat(everest_forms_params.mailcheck_toplevel_domains)),f(document).on("blur",".evf-field-email input",function(){var e=f(this),a=e.attr("id");e.mailcheck({suggested:function(e,t){f("#"+a+"_suggestion").remove();t=everest_forms_params.i18n_messages_email_suggestion.replace("{suggestion}",'<a href="#" class="mailcheck-suggestion" data-id="'+a+'" title="'+everest_forms_params.i18n_messages_email_suggestion_title+'">'+t.full+"</a>");(e.parents("span.input-wrapper").length?f(e).parents("span.input-wrapper"):f(e)).after('<label class="evf-error mailcheck-error" id="'+a+'_suggestion">'+t+"</label>")},empty:function(){f("#"+a+"_suggestion").remove()}})}),f(document).on("click",".evf-field-email .mailcheck-suggestion",function(e){var t=f(this),a=t.attr("data-id");e.preventDefault(),f("#"+a).val(t.text()),t.parent().remove()}))},init_datepicker:function(){var e=f(".evf-field-date-time");e.length&&e.find(".flatpickr-field").length&&e.find(".flatpickr-field").each(function(){var e,t=5,a=f(this).data(),i=[],s="",r=(a.minDateRange&&(s="today")!==a.minDateRange&&(s=/^\s*[-+]?\d+\s*d/i.test(a.minDateRange)?(s=a.minDateRange.match(/^\s*[-+]?\d+\s*d/i)[0].replace("d",""),(new Date).fp_incr(s)):"today"),"");switch(a.maxDateRange&&(r="today")!==a.maxDateRange&&(r=/^\s*[-+]?\d+\s*d/i.test(a.maxDateRange)?(r=a.maxDateRange.match(/^\s*[-+]?\d+\s*d/i)[0].replace("d",""),(new Date).fp_incr(r)):""),a.disableDates&&(i=a.disableDates.split(",")),e=a.pastDisableDate||"",a.dateTime){case"date":f(this).flatpickr({disableMobile:!0,mode:a.mode,minDate:s||a.minDate||e,maxDate:r||a.maxDate,dateFormat:a.dateFormat,disable:i});break;case"time":undefined!==a.timeInterval&&(t=parseInt(a.timeInterval,10)),f(this).flatpickr({enableTime:!0,noCalendar:!0,minuteIncrement:t,dateFormat:a.dateFormat,disableMobile:!0,time_24hr:a.dateFormat.includes("H:i")});break;case"date-time":undefined!==a.timeInterval&&(t=parseInt(a.timeInterval,10)),f(this).flatpickr({enableTime:!0,noCalendar:!1,disableMobile:!0,mode:a.mode,minDate:s||a.minDate||e,maxDate:r||a.maxDate,minuteIncrement:t,dateFormat:a.dateFormat,time_24hr:a.dateFormat.includes("H:i"),disable:i})}}),f(document).find(".evf-field-date-time input").on("change",function(e){var t=f(this).data("slot-booking"),a=f(this).parent(),i=f(this).parent().find("label.evf-error");1===t&&(t={action:"everest_forms_slot_booking","data-time-value":f(this).val(),"data-format":f(this).data("date-format"),"data-time-format":f(this).data("date-time"),mode:f(this).data("mode"),"form-id":f(this).data("form-id"),"time-interval":f(this).data("time-interval"),security:everest_forms_params.everest_forms_slot_booking},f.ajax({url:everest_forms_params.ajax_url,data:t,type:"POST",beforeSend:function(){var e=f(document).find(".evf-submit-container button");f(e).prop("disabled",!0)},success:function(e){var t;f(i).length&&f(i).remove(),!0===e.success?(e=e.data.message,f(a).append('<label class="evf-error">'+e+"</label>"),t=f(document).find(".evf-submit-container button"),f(t).prop("disabled",!0)):(t=f(document).find(".evf-submit-container button"),f(t).prop("disabled",!1))}}))})},init_datedropdown:function(){f(".date-dropdown-field").each(function(){var e=f(this);e.hide(),l.change_minutes(e)}),f("body").on("change",".date-time-container [id*=hour-select]",function(){var e=f(this).siblings("input.date-dropdown-field");l.change_minutes(e)}),f("body").on("change",".date-time-container [id*=-select]",function(){var e=f(this).siblings("input.date-dropdown-field");e.val(l.format_dropdown_date(e))})},change_minutes:function(e){var t=e.attr("id");if(void 0!==e.siblings("#minute-select-"+t).attr("id")){for(var a=e.attr("data-max-hour"),i=e.attr("data-min-hour"),s=e.attr("data-max-minute"),r=e.attr("data-min-minute"),n=(void 0!==i&&""!=i||(i=0),void 0!==a&&""!=a||(i=23),void 0!==r&&""!=r||(r=0),void 0!==s&&""!=s||(s=59),""),d=0;d<=59;d++)if(!(e.siblings("#hour-select-"+t).val()==i&&d<r)){if(e.siblings("#hour-select-"+t).val()==a&&s<d)break;n+='<option value = "'+d+'"> '+(d<10?"0"+d:d)+"</option>"}e.siblings("#minute-select-"+t).html(n),e.siblings("#minute-select-"+t).attr("value",e.siblings("#minute-select-"+t).find("option:first").val())}e.val(l.format_dropdown_date(e))},format_dropdown_date:function(e){var t=e.attr("id"),t={selected_year:e.siblings("#year-select-"+t).val(),selected_month:e.siblings("#month-select-"+t).val(),selected_day:e.siblings("#day-select-"+t).val(),selected_hour:e.siblings("#hour-select-"+t).val(),selected_minute:e.siblings("#minute-select-"+t).val()},e={date_format:e.attr("data-date-format"),date_time:e.attr("data-date-time")},a="";return"date"!=e.date_time&&"date-time"!=e.date_time||(t.selected_day=t.selected_day<10?"0"+t.selected_day:t.selected_day,a=e.date_format.match(/F j, Y/)?["January","Febuary","March","April","May","June","July","August","September","October","November","December"][parseInt(t.selected_month)-1]+" "+t.selected_day+", "+t.selected_year:(t.selected_month=t.selected_month<10?"0"+t.selected_month:t.selected_month,e.date_format.match(/Y-m-d/)?t.selected_year+"-"+t.selected_month+"-"+t.selected_day:e.date_format.match(/m\/d\/Y/)?t.selected_month+"/"+t.selected_day+"/"+t.selected_year:t.selected_day+"/"+t.selected_month+"/"+t.selected_year)),"time"!=e.date_time&&"date-time"!=e.date_time||(t.selected_minute=t.selected_minute<10?"0"+t.selected_minute:t.selected_minute,e.date_format.match(/H:i/)?(t.selected_hour=t.selected_hour<10?"0"+t.selected_hour:t.selected_hour,a+=" "+t.selected_hour+":"+t.selected_minute):(e="PM",t.selected_hour<12?(e="AM",0==t.selected_hour&&(t.selected_hour=12)):12<t.selected_hour&&(t.selected_hour=t.selected_hour-12),a+=" "+t.selected_hour+":"+t.selected_minute+" "+e)),a.trim()},load_validation:function(){if("undefined"==typeof f.fn.validate)return!1;f(".evf-field-url input[type=url]").on("change",function(){var e=f(this).val();if(!e)return!1;"http://"!==e.substr(0,7)&&"https://"!==e.substr(0,8)&&f(this).val("http://"+e)}),f.extend(f.validator.messages,{required:everest_forms_params.i18n_messages_required,url:everest_forms_params.i18n_messages_url,email:everest_forms_params.i18n_messages_email,number:everest_forms_params.i18n_messages_number}),f.validator.methods.email=function(e,t){var a=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return this.optional(t)||a.test(e)},f.validator.addMethod("confirm",function(e,t,a){return f.validator.methods.equalTo.call(this,e,t,a)},everest_forms_params.i18n_messages_confirm),f.validator.addMethod("check-limit",function(e,t){var t=f(t).closest("ul"),a=t.find('input[type="checkbox"]:checked'),t=parseInt(t.attr("data-choice-limit")||0,10);return 0===t||a.length<=t},function(e,t){t=parseInt(f(t).closest("ul").attr("data-choice-limit")||0,10);return everest_forms_params.i18n_messages_check_limit.replace("{#}",t)}),f.validator.addMethod("phone-field",function(e,t){return!e.match(/[^\d()\-+\s]/)&&(this.optional(t)||0<e.replace(/[^\d]/g,"").length)},everest_forms_params.i18n_messages_phone),"undefined"!=typeof f.fn.intlTelInput&&f.validator.addMethod("smart-phone-field",function(e,t){return!e.match(/[^\d()\-+\s]/)&&(this.optional(t)||f(t).intlTelInput("isValidNumber"))},everest_forms_params.i18n_messages_phone),this.$everest_form.each(function(){var e=f(this),u={};f(".evf-field").each(function(){var e=f(this).closest("form").data("formid"),t=f(this).data("field-id"),a=f(this).data("required-field-message"),i="everest_forms[form_fields]["+t+"]";if(f(this).is(".evf-field-payment-single"))f(this).find(".evf-payment-price").is(".evf-payment-user-input")||(f(this).find(".evf-payment-price").attr("required",!1),a=null);else if(f(this).is(".evf-field-checkbox, .evf-field-payment-checkbox"))i+="[]";else if(f(this).is(".evf-field-image-upload"))i="evf_"+e+"_"+t;else if(f(this).is(".evf-field-signature"))i="everest_forms[form_fields]["+t+"][signature_image]";else if(f(this).is(".evf-field-phone"))i+="[phone_field]";else if(f(this).is(".evf-field-email")||f(this).is(".evf-field-password"))u[i="everest_forms[form_fields]["+t+"]"]={required:a},u[i="everest_forms[form_fields]["+t+"][primary]"]={required:a},u[i="everest_forms[form_fields]["+t+"][secondary]"]={required:a},a=null;else if(f(this).is(".evf-field-address")){for(var s={address1:f(this).data("required-field-message-address1"),city:f(this).data("required-field-message-city"),state:f(this).data("required-field-message-state"),postal:f(this).data("required-field-message-postal"),country:f(this).data("required-field-message-country")},r=Object.keys(s),n=0;n<r.length;n++){var d=r[n],a=s[r[n]];u[i="everest_forms[form_fields]["+t+"]["+d+"]"]={required:a}}a=null}else if(f(this).is(".evf-field-likert")){var l=f(this).data("row-keys"),s={};if(l&&Array.isArray(l)){for(n=0;n<l.length;n++){var o=l[n];s[o]=f(this).data("required-field-message-"+o)}for(n=0;n<l.length;n++)a=s[l[n]],i="everest_forms[form_fields]["+t+"]["+l[n]+"]",u[i]={required:a}}a=null}else f(this).is(".evf-field-file-upload")&&(i="everest_forms_"+e+"_"+t);a&&(u[i]={required:a})}),e.validate({messages:u,ignore:"",errorClass:"evf-error",validClass:"evf-valid",errorPlacement:function(e,t){t.closest(".evf-field").is(".evf-field-privacy-policy")?t.closest(".evf-field").append(e):t.closest(".evf-field").is(".evf-field-range-slider")?t.closest(".evf-field").find(".evf-field-description").length?t.closest(".evf-field").find(".evf-field-description").before(e):t.closest(".evf-field").append(e):t.closest(".evf-field").is(".evf-field-scale-rating")?t.closest(".evf-field").find(".everest-forms-field-scale-rating").after(e):"radio"===t.attr("type")||"checkbox"===t.attr("type")?(t.hasClass("everest-forms-likert-field-option")?t.closest("tr").children("th"):(t.closest(".evf-field-checkbox").find("label.evf-error").remove(),t.parent().parent().parent())).append(e):t.is("select")&&t.attr("class").match(/date-month|date-day|date-year/)?0===t.parent().find("label.evf-error:visible").length&&t.parent().find("select:last").after(e):t.is("select")&&t.hasClass("evf-enhanced-select")?0===t.parent().find("label.evf-error:visible").length&&t.parent().find(".select2").after(e):t.hasClass("evf-smart-phone-field")||t.hasClass("everest-forms-field-password-primary")||t.hasClass("everest-forms-field-password-secondary")?(t.parents("span.input-wrapper").length?t.parents("span.input-wrapper"):t.parent()).after(e):t.parents("span.input-wrapper").length?t.parents("span.input-wrapper").after(e):e.insertAfter(t)},highlight:function(e,t,a){var e=f(e),i=e.closest(".form-row"),s=e.attr("name");("radio"===e.attr("type")||"checkbox"===e.attr("type")?i.find('input[name="'+s+'"]'):e).addClass(t).removeClass(a),i.removeClass("everest-forms-validated").addClass("everest-forms-invalid evf-has-error")},unhighlight:function(e,t,a){var e=f(e),i=e.closest(".form-row"),s=e.attr("name");("radio"===e.attr("type")||"checkbox"===e.attr("type")?i.find('input[name="'+s+'"]'):e).addClass(a).removeClass(t),i.removeClass("evf-has-error")},submitHandler:function(e){var t=f(e),a=t.find(".evf-submit"),i=a.data("process-text"),s=a.get(0).recaptchaID,r=t.find("[data-gateway='razorpay']"),n=t.find("[data-gateway*='stripe']");if(i&&a.text(i).prop("disabled",!0),0===s)return grecaptcha.execute(s),!1;0<r.length||(1!==t.data("ajax_submission")||n.length<0&&0!==n.children.length)&&e.submit()},onkeyup:function(e,t){f(e).hasClass("everest-forms-novalidate-onkeyup")||9===t.which&&""===this.elementValue(e)||-1!==f.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onfocusout:function(e){var t=!1;f(e).hasClass("everest-forms-novalidate-onkeyup")&&!e.value&&(t=!0),(t=this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)?t:!0)&&this.element(e)},onclick:function(e){var t=!1,a=(e||{}).type,i=f(e);"checkbox"===a?(i.closest(".evf-field-checkbox").find("label.evf-error").remove(),t=!0):!1===a&&f(e).valid(),t&&this.element(e)}})})},validate_field:function(e){var t=f(this),a=f("body"),i=t.closest(".form-row"),s=!0,r=i.is(".validate-required"),n=i.is(".validate-email"),e=e.type;a.hasClass("everest-forms-is-offline")?i.removeClass("everest-forms-invalid everest-forms-invalid-required-field everest-forms-invalid-email everest-forms-validated"):i.hasClass("evf-field-address")||i.hasClass("evf-field-payment-single")||f("body").hasClass("everest-forms-is-offline")?0===i.find("input.evf-error").length&&i.removeClass("everest-forms-invalid everest-forms-invalid-required-field everest-forms-invalid-email").addClass("everest-forms-validated"):("input"===e&&i.removeClass("everest-forms-invalid everest-forms-invalid-required-field everest-forms-invalid-email everest-forms-validated"),"validate"!==e&&"change"!==e||(r&&(t.hasClass("everest-forms-likert-field-option")?0<i.find("input.evf-error").length&&(i.removeClass("everest-forms-validated").addClass("everest-forms-invalid everest-forms-invalid-required-field"),s=!1):("checkbox"===t.attr("type")&&0===i.find("input:checked").length||""===t.val())&&(i.removeClass("everest-forms-validated").addClass("everest-forms-invalid everest-forms-invalid-required-field"),s=!1)),n&&t.val()&&!new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(t.val())&&(i.removeClass("everest-forms-validated").addClass("everest-forms-invalid everest-forms-invalid-email"),s=!1),s&&i.removeClass("everest-forms-invalid everest-forms-invalid-required-field everest-forms-invalid-email").addClass("everest-forms-validated")))},submission_scroll:function(){f("div.everest-forms-submission-scroll").length&&f("html,body").animate({scrollTop:f("div.everest-forms-submission-scroll").offset().top-100},1e3)},randomize_elements:function(){f(".everest-forms-randomize").each(function(){for(var e=f(this),t=e.children();t.length;)e.append(t.splice(Math.floor(Math.random()*t.length),1)[0])})},init_enhanced_select:function(){try{f(document.body).on("evf-frontend-enhanced-select-init",function(){"undefined"!=typeof f.fn.selectWoo&&f("select.evf-enhanced-select:visible").filter(":not(.evf-enhanced)").each(function(){var e=f.extend({minimumResultsForSearch:10<f(this).find("option").length?10:null,placeholder:f(this).attr("placeholder")||"",allowClear:!f(this).prop("multiple")},t());f(this).selectWoo(e).addClass("evf-enhanced")})}).trigger("evf-frontend-enhanced-select-init")}catch(e){window.console.log(e)}},checkUncheckAllcheckbox:function(){var e=f("form.everest-form").find(".evf-field, .evf-field-checkbox, .form-row").find("ul").find("li.evf-select-all-checkbox-li").find("#evfCheckAll");e.length&&e.each(function(){var a=f(this);a.on("click",function(){1==f(this).prop("checked")?a.parent().parent().find("li").find("input:checkbox").not(a).prop("checked",!0):0==f(this).prop("checked")&&a.parent().parent().find("li").find("input:checkbox").not(a).prop("checked",!1)}),a.parent().parent().find("li").find("input:checkbox").not(a).on("change",function(){var e=a.parent().parent().find("li").find("input:checkbox:checked").not(a).length,t=a.parent().parent().find("li").find("input:checkbox").not(a).length;e===t?a.prop("checked",!0):e<t&&a.prop("checked",!1)})})},validateMinimumWordLength:function(){Array.prototype.slice.call(document.querySelectorAll(".everest-forms-min-words-length-enabled")).map(function(e){var t=parseInt(e.dataset.textMinLength,10)||0;jQuery.validator.addMethod("minWordLength",function(e,t,a){return e.trim().split(/\s+/).length>=a[0]},everest_forms_params.il8n_min_word_length_err_msg),jQuery("#"+e.id).each(function(){jQuery(this).rules("add",{minWordLength:[t]})})})},validateMinimumcharacterLength:function(){Array.prototype.slice.call(document.querySelectorAll(".everest-forms-min-characters-length-enabled")).map(function(e){var t=parseInt(e.dataset.textMinLength,10)||0;jQuery.validator.addMethod("minCharacterLength",function(e,t,a){return e.length>=a[0]},everest_forms_params.il8n_min_character_length_err_msg),jQuery("#"+e.id).each(function(){jQuery(this).rules("add",{minCharacterLength:[t]})})})},loadPhoneField:function(){var e,t,i={};if("undefined"==typeof f.fn.intlTelInput)return!1;"yes"!==everest_forms_params.disable_user_details&&(i.geoIpLookup=l.currentIpToCountry),"yes"===everest_forms_params.disable_user_details&&(e=this.getFirstBrowserLanguage(),t=-1<e.indexOf("-")?e.split("-").pop():""),t=t&&(window.intlTelInputGlobals.getCountryData().filter(function(e){return e.iso2===t.toLowerCase()}).length?t:""),i.initialCountry="yes"===everest_forms_params.disable_user_details&&t?t:"auto",f(".evf-smart-phone-field").each(function(e,t){var a=f(t),t=(i.hiddenInput=a.closest(".evf-field-phone").data("field-id"),i.utilsScript=everest_forms_params.plugin_url+"assets/js/intlTelInput/utils.js",a.intlTelInput(i),a.attr("name"));a.attr("name",t+"[phone_field]"),a.blur(function(){a.intlTelInput("isValidNumber")&&a.siblings('input[type="hidden"]').val(a.intlTelInput("getNumber"))})})},currentIpToCountry:function(a){f.get("https://ipapi.co/json").always(function(e){var t,e=e&&e.country?e.country:"";e||(e=-1<(t=everest_forms_pro.getFirstBrowserLanguage()).indexOf("-")?t.split("-").pop():""),a(e)})},loadCountryFlags:function(){"undefined"!=typeof f.fn.selectWoo&&(f.fn.selectWoo.amd.define("evfCountrySelectionAdapter",["select2/utils","select2/selection/single"],function(e,t){return t.prototype.update=function(e){var t,a;0===e.length?this.clear():(e=e[0],t=this.$selection.find(".select2-selection__rendered"),a=this.display(e,t),t.empty().append(a),t.prop("title",e.title||e.text))},t}),f("select.evf-country-flag-selector:visible").each(function(){var e=f.extend({placeholder:f(this).attr("placeholder")||"",selectionAdapter:f.fn.selectWoo.amd.require("evfCountrySelectionAdapter"),templateResult:l.getFormattedCountryFlags,templateSelection:l.getFormattedCountryFlags},t());f(this).selectWoo(e)}))},getFormattedCountryFlags:function(e){return e.id?f('<div class="iti__flag-box"><div class="iti__flag iti__'+e.id.toLowerCase()+'"></div></div><span class="iti__country-name">'+e.text+"</span>"):e.text},FormSubmissionWaitingTime:function(){f(document).ready(function(){var e=f(".everest-form").data("ajax_submission");if(f("#evf_submission_start_time").length<0)return"";f("#evf_submission_start_time").val(Date.now());var t,a=function(){var e,t,a=f("#evf_submission_duration");a.length&&(e=parseInt(a.data("duration"),10),t=setInterval(function(){a.text(e),--e<0&&(clearInterval(t),a.parent().remove())},1e3))};1===e?(t=new MutationObserver(function(e){e.forEach(function(e){0<e.addedNodes.length&&f(e.addedNodes).each(function(){f("#evf_submission_duration").length&&(a(),t.disconnect())})})}),e=document.body,t.observe(e,{childList:!0,subtree:!0})):a()})},getFirstBrowserLanguage:function(){var e,t,a=window.navigator,i=["language","browserLanguage","systemLanguage","userLanguage"];if(Array.isArray(a.languages))for(e=0;e<a.languages.length;e++)if((t=a.languages[e])&&t.length)return t;for(e=0;e<i.length;e++)if((t=a[i[e]])&&t.length)return t;return""},ratingInit:function(){f(".everest-forms-field-rating").hover(function(){f(this).parent().find(".everest-forms-field-rating").removeClass("selected hover"),f(this).prevAll().addBack().addClass("hover")},function(){f(this).parent().find(".everest-forms-field-rating").removeClass("selected hover"),f(this).parent().find("input:checked").parent().prevAll().addBack().addClass("selected")}),f(document).on("change",".everest-forms-field-rating input",function(){var e=f(this);e.closest(".everest-forms-field-rating-container").find(".everest-forms-field-rating").removeClass("hover selected"),e.parent().prevAll().addBack().addClass("selected")}),f(document).ready(function(){f(".everest-forms-field-rating input:checked").trigger("change")})}};l.init()});