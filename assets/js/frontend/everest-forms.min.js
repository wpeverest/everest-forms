jQuery(function(u){"use strict";if("undefined"==typeof everest_forms_params)return!1;var l={$everest_form:u("form.everest-form"),init:function(){this.init_inputMask(),this.init_mailcheck(),this.init_datepicker(),this.init_datedropdown(),this.load_validation(),this.submission_scroll(),this.randomize_elements(),this.init_enhanced_select(),this.checkUncheckAllcheckbox(),this.$everest_form.on("input validate change",".input-text, select, input:checkbox, input:radio",this.validate_field),u(document.body).trigger("everest_forms_loaded")},init_inputMask:function(){"undefined"!=typeof u.fn.inputmask&&u(".evf-masked-input").inputmask()},init_mailcheck:function(){"undefined"!=typeof u.fn.mailcheck&&everest_forms_params.mailcheck_enabled&&(0<everest_forms_params.mailcheck_domains.length&&(Mailcheck.defaultDomains=Mailcheck.defaultDomains.concat(everest_forms_params.mailcheck_domains)),0<everest_forms_params.mailcheck_toplevel_domains.length&&(Mailcheck.defaultTopLevelDomains=Mailcheck.defaultTopLevelDomains.concat(everest_forms_params.mailcheck_toplevel_domains)),u(document).on("blur",".evf-field-email input",function(){var e=u(this),i=e.attr("id");e.mailcheck({suggested:function(e,t){u("#"+i+"_suggestion").remove();t=everest_forms_params.i18n_messages_email_suggestion.replace("{suggestion}",'<a href="#" class="mailcheck-suggestion" data-id="'+i+'" title="'+everest_forms_params.i18n_messages_email_suggestion_title+'">'+t.full+"</a>");u(e).after('<label class="evf-error mailcheck-error" id="'+i+'_suggestion">'+t+"</label>")},empty:function(){u("#"+i+"_suggestion").remove()}})}),u(document).on("click",".evf-field-email .mailcheck-suggestion",function(e){var t=u(this),i=t.attr("data-id");e.preventDefault(),u("#"+i).val(t.text()),t.parent().remove()}))},init_datepicker:function(){0<u(".evf-field-date-time").length&&u(".flatpickr-field").each(function(){var e=5,t=u(this).data(),i=[];switch(t.disableDates&&(i=t.disableDates.split(",")),t.dateTime){case"date":u(this).flatpickr({disableMobile:!0,mode:t.mode,minDate:t.minDate,maxDate:t.maxDate,dateFormat:t.dateFormat,disable:i});break;case"time":undefined!==t.timeInterval&&(e=parseInt(t.timeInterval,10)),u(this).flatpickr({enableTime:!0,noCalendar:!0,minuteIncrement:e,dateFormat:t.dateFormat,disableMobile:!0,time_24hr:t.dateFormat.includes("H:i")});break;case"date-time":undefined!==t.timeInterval&&(e=parseInt(t.timeInterval,10)),u(this).flatpickr({enableTime:!0,noCalendar:!1,disableMobile:!0,mode:t.mode,minDate:t.minDate,maxDate:t.maxDate,minuteIncrement:e,dateFormat:t.dateFormat,time_24hr:t.dateFormat.includes("H:i"),disable:i})}})},init_datedropdown:function(){u(".date-dropdown-field").each(function(){var e=u(this);e.hide(),l.change_minutes(e)}),u("body").on("change",".date-time-container [id*=hour-select]",function(){var e=u(this).siblings("input.date-dropdown-field");l.change_minutes(e)}),u("body").on("change",".date-time-container [id*=-select]",function(){var e=u(this).siblings("input.date-dropdown-field");e.val(l.format_dropdown_date(e))})},change_minutes:function(e){var t=e.attr("id");if(void 0!==e.siblings("#minute-select-"+t).attr("id")){var i=e.attr("data-max-hour"),a=e.attr("data-min-hour"),s=e.attr("data-max-minute"),r=e.attr("data-min-minute");void 0!==a&&""!=a||(a=0),void 0!==i&&""!=i||(a=23),void 0!==r&&""!=r||(r=0),void 0!==s&&""!=s||(s=59);for(var n="",d=0;d<=59;d++)if(!(e.siblings("#hour-select-"+t).val()==a&&d<r)){if(e.siblings("#hour-select-"+t).val()==i&&s<d)break;n+='<option value = "'+d+'"> '+(d<10?"0"+d:d)+"</option>"}e.siblings("#minute-select-"+t).html(n),e.siblings("#minute-select-"+t).attr("value",e.siblings("#minute-select-"+t).find("option:first").val())}e.val(l.format_dropdown_date(e))},format_dropdown_date:function(e){var t=e.attr("id"),i={selected_year:e.siblings("#year-select-"+t).val(),selected_month:e.siblings("#month-select-"+t).val(),selected_day:e.siblings("#day-select-"+t).val(),selected_hour:e.siblings("#hour-select-"+t).val(),selected_minute:e.siblings("#minute-select-"+t).val()},t={date_format:e.attr("data-date-format"),date_time:e.attr("data-date-time")},e="";return"date"!=t.date_time&&"date-time"!=t.date_time||(i.selected_day=i.selected_day<10?"0"+i.selected_day:i.selected_day,e=t.date_format.match(/F j, Y/)?["January","Febuary","March","April","May","June","July","August","September","October","November","December"][parseInt(i.selected_month)-1]+" "+i.selected_day+", "+i.selected_year:(i.selected_month=i.selected_month<10?"0"+i.selected_month:i.selected_month,t.date_format.match(/Y-m-d/)?i.selected_year+"-"+i.selected_month+"-"+i.selected_day:t.date_format.match(/m\/d\/Y/)?i.selected_month+"/"+i.selected_day+"/"+i.selected_year:i.selected_day+"/"+i.selected_month+"/"+i.selected_year)),"time"!=t.date_time&&"date-time"!=t.date_time||(i.selected_minute=i.selected_minute<10?"0"+i.selected_minute:i.selected_minute,t.date_format.match(/H:i/)?(i.selected_hour=i.selected_hour<10?"0"+i.selected_hour:i.selected_hour,e+=" "+i.selected_hour+":"+i.selected_minute):(t="PM",i.selected_hour<12?(t="AM",0==i.selected_hour&&(i.selected_hour=12)):12<i.selected_hour&&(i.selected_hour=i.selected_hour-12),e+=" "+i.selected_hour+":"+i.selected_minute+" "+t)),e.trim()},load_validation:function(){if("undefined"==typeof u.fn.validate)return!1;u(".evf-field-url input[type=url]").on("change",function(){var e=u(this).val();if(!e)return!1;"http://"!==e.substr(0,7)&&"https://"!==e.substr(0,8)&&u(this).val("http://"+e)}),u.extend(u.validator.messages,{required:everest_forms_params.i18n_messages_required,url:everest_forms_params.i18n_messages_url,email:everest_forms_params.i18n_messages_email,number:everest_forms_params.i18n_messages_number}),u.validator.methods.email=function(e,t){var i=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return this.optional(t)||i.test(e)},u.validator.addMethod("confirm",function(e,t,i){return u.validator.methods.equalTo.call(this,e,t,i)},everest_forms_params.i18n_messages_confirm),u.validator.addMethod("check-limit",function(e,t){var i=u(t).closest("ul"),t=i.find('input[type="checkbox"]:checked'),i=parseInt(i.attr("data-choice-limit")||0,10);return 0===i||t.length<=i},function(e,t){t=parseInt(u(t).closest("ul").attr("data-choice-limit")||0,10);return everest_forms_params.i18n_messages_check_limit.replace("{#}",t)}),this.$everest_form.each(function(){var e=u(this),f={};u(".evf-field").each(function(){var e=u(this).closest("form").data("formid"),t=u(this).data("field-id"),i=u(this).data("required-field-message"),a="everest_forms[form_fields]["+t+"]";if(u(this).is(".evf-field-payment-single"))u(this).find(".evf-payment-price").is(".evf-payment-user-input")||(u(this).find(".evf-payment-price").attr("required",!1),i=null);else if(u(this).is(".evf-field-checkbox, .evf-field-payment-checkbox"))a+="[]";else if(u(this).is(".evf-field-image-upload"))a="evf_"+e+"_"+t;else if(u(this).is(".evf-field-signature"))a="everest_forms[form_fields]["+t+"][signature_image]";else if(u(this).is(".evf-field-phone"))a+="[phone_field]";else if(u(this).is(".evf-field-email")||u(this).is(".evf-field-password"))f[a="everest_forms[form_fields]["+t+"]"]={required:i},f[a="everest_forms[form_fields]["+t+"][primary]"]={required:i},f[a="everest_forms[form_fields]["+t+"][secondary]"]={required:i},i=null;else if(u(this).is(".evf-field-address")){for(var s={address1:u(this).data("required-field-message-address1"),city:u(this).data("required-field-message-city"),state:u(this).data("required-field-message-state"),postal:u(this).data("required-field-message-postal"),country:u(this).data("required-field-message-country")},r=Object.keys(s),n=0;n<r.length;n++){var d=r[n],i=s[r[n]];f[a="everest_forms[form_fields]["+t+"]["+d+"]"]={required:i}}i=null}else if(u(this).is(".evf-field-likert")){var l=u(this).data("row-keys"),s={};if(l&&Array.isArray(l)){for(n=0;n<l.length;n++){var o=l[n];s[o]=u(this).data("required-field-message-"+o)}for(n=0;n<l.length;n++)i=s[l[n]],a="everest_forms[form_fields]["+t+"]["+l[n]+"]",f[a]={required:i}}i=null}else u(this).is(".evf-field-file-upload")&&(a="everest_forms_"+e+"_"+t);i&&(f[a]={required:i})}),e.validate({messages:f,ignore:"",errorClass:"evf-error",validClass:"evf-valid",errorPlacement:function(e,t){t.closest(".evf-field").is(".evf-field-privacy-policy")?t.closest(".evf-field").append(e):t.closest(".evf-field").is(".evf-field-range-slider")?t.closest(".evf-field").find(".evf-field-description").length?t.closest(".evf-field").find(".evf-field-description").before(e):t.closest(".evf-field").append(e):t.closest(".evf-field").is(".evf-field-scale-rating")?t.closest(".evf-field").find(".everest-forms-field-scale-rating").after(e):"radio"===t.attr("type")||"checkbox"===t.attr("type")?t.hasClass("everest-forms-likert-field-option")?t.closest("tr").children("th").append(e):(t.closest(".evf-field-checkbox").find("label.evf-error").remove(),t.parent().parent().parent().append(e)):t.is("select")&&t.attr("class").match(/date-month|date-day|date-year/)?0===t.parent().find("label.evf-error:visible").length&&t.parent().find("select:last").after(e):t.is("select")&&t.hasClass("evf-enhanced-select")?0===t.parent().find("label.evf-error:visible").length&&t.parent().find(".select2").after(e):t.hasClass("evf-smart-phone-field")||t.hasClass("everest-forms-field-password-primary")||t.hasClass("everest-forms-field-password-secondary")?t.parent().after(e):e.insertAfter(t)},highlight:function(e,t,i){var a=u(e),s=a.closest(".form-row"),e=a.attr("name");("radio"===a.attr("type")||"checkbox"===a.attr("type")?s.find('input[name="'+e+'"]'):a).addClass(t).removeClass(i),s.removeClass("everest-forms-validated").addClass("everest-forms-invalid evf-has-error")},unhighlight:function(e,t,i){var a=u(e),s=a.closest(".form-row"),e=a.attr("name");("radio"===a.attr("type")||"checkbox"===a.attr("type")?s.find('input[name="'+e+'"]'):a).addClass(i).removeClass(t),s.removeClass("evf-has-error")},submitHandler:function(e){var t=u(e),i=t.find(".evf-submit"),a=i.data("process-text"),s=i.get(0).recaptchaID,r=t.find("[data-gateway='razorpay']");if(a&&i.text(a).prop("disabled",!0),0===s)return grecaptcha.execute(s),!1;0<r.length||1!==t.data("ajax_submission")&&e.submit()},onkeyup:function(e,t){u(e).hasClass("everest-forms-novalidate-onkeyup")||9===t.which&&""===this.elementValue(e)||-1!==u.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onfocusout:function(e){var t=!1;u(e).hasClass("everest-forms-novalidate-onkeyup")&&!e.value&&(t=!0),(t=!this.checkable(e)&&(e.name in this.submitted||!this.optional(e))?!0:t)&&this.element(e)},onclick:function(e){var t=!1,i=(e||{}).type,a=u(e);"checkbox"===i?(a.closest(".evf-field-checkbox").find("label.evf-error").remove(),t=!0):!1===i&&u(e).valid(),t&&this.element(e)}})})},validate_field:function(e){var t=u(this),i=u("body"),a=t.closest(".form-row"),s=!0,r=a.is(".validate-required"),n=a.is(".validate-email"),e=e.type;i.hasClass("everest-forms-is-offline")?a.removeClass("everest-forms-invalid everest-forms-invalid-required-field everest-forms-invalid-email everest-forms-validated"):a.hasClass("evf-field-address")||a.hasClass("evf-field-payment-single")||u("body").hasClass("everest-forms-is-offline")?0===a.find("input.evf-error").length&&a.removeClass("everest-forms-invalid everest-forms-invalid-required-field everest-forms-invalid-email").addClass("everest-forms-validated"):("input"===e&&a.removeClass("everest-forms-invalid everest-forms-invalid-required-field everest-forms-invalid-email everest-forms-validated"),"validate"!==e&&"change"!==e||(r&&(t.hasClass("everest-forms-likert-field-option")?0<a.find("input.evf-error").length&&(a.removeClass("everest-forms-validated").addClass("everest-forms-invalid everest-forms-invalid-required-field"),s=!1):("checkbox"===t.attr("type")&&0===a.find("input:checked").length||""===t.val())&&(a.removeClass("everest-forms-validated").addClass("everest-forms-invalid everest-forms-invalid-required-field"),s=!1)),n&&t.val()&&(new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(t.val())||(a.removeClass("everest-forms-validated").addClass("everest-forms-invalid everest-forms-invalid-email"),s=!1)),s&&a.removeClass("everest-forms-invalid everest-forms-invalid-required-field everest-forms-invalid-email").addClass("everest-forms-validated")))},submission_scroll:function(){u("div.everest-forms-submission-scroll").length&&u("html,body").animate({scrollTop:u("div.everest-forms-submission-scroll").offset().top-100},1e3)},randomize_elements:function(){u(".everest-forms-randomize").each(function(){for(var e=u(this),t=e.children();t.length;)e.append(t.splice(Math.floor(Math.random()*t.length),1)[0])})},init_enhanced_select:function(){try{u(document.body).on("evf-frontend-enhanced-select-init",function(){"undefined"!=typeof u.fn.selectWoo&&u("select.evf-enhanced-select:visible").filter(":not(.evf-enhanced)").each(function(){var e=u.extend({minimumResultsForSearch:10,placeholder:u(this).attr("placeholder")||"",allowClear:!u(this).prop("multiple")},{language:{noResults:function(){return everest_forms_params.i18n_no_matches}}});u(this).selectWoo(e).addClass("evf-enhanced")})}).trigger("evf-frontend-enhanced-select-init")}catch(e){window.console.log(e)}},checkUncheckAllcheckbox:function(){var e=u("form.everest-form").find(".evf-field, .evf-field-checkbox, .form-row").find("ul").find("li.evf-select-all-checkbox-li").find("#evfCheckAll");e.length&&e.each(function(){var i=u(this);i.on("click",function(){1==u(this).prop("checked")?i.parent().parent().find("li").find("input:checkbox").not(i).prop("checked",!0):0==u(this).prop("checked")&&i.parent().parent().find("li").find("input:checkbox").not(i).prop("checked",!1)}),i.parent().parent().find("li").find("input:checkbox").not(i).on("change",function(){var e=i.parent().parent().find("li").find("input:checkbox:checked").not(i).length,t=i.parent().parent().find("li").find("input:checkbox").not(i).length;e===t?i.prop("checked",!0):e<t&&i.prop("checked",!1)})})}};l.init()});